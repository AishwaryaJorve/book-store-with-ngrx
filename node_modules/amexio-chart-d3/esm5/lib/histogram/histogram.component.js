/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, ChangeDetectorRef } from "@angular/core";
import { AmexioD3BaseChartComponent } from "../base/base.component";
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
import * as d3 from 'd3';
var HistogramComponent = /** @class */ (function (_super) {
    tslib_1.__extends(HistogramComponent, _super);
    function HistogramComponent(myservice, cdf, device) {
        var _this = _super.call(this, 'histogram') || this;
        _this.myservice = myservice;
        _this.cdf = cdf;
        _this.device = device;
        _this.svgheight = 400;
        _this.color = "blue";
        _this.datahisto = [];
        _this.values = [];
        _this.array = [];
        _this.xaxisArray = [];
        _this.yaxisArray = [];
        _this.yaxisData = [];
        _this.histogramarray = [];
        _this.histogramdata = [];
        _this.lengtharray = [];
        _this.arrayofLength = [];
        _this.chartData = [];
        _this.finaldataarray = [];
        _this.tooltipArray = [];
        _this.index = 0;
        return _this;
    }
    /**
     * @return {?}
     */
    HistogramComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.wt = this.svgwidth;
        /** @type {?} */
        var res;
        if (this.level <= 1) {
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((/**
                 * @param {?} response
                 * @return {?}
                 */
                function (response) {
                    res = response;
                    _this.httpresponse = response;
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                }), (/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.datahisto = [];
                        _this.datahisto = _this.getResponseData(res);
                        _this.transformData();
                        _this.plotXaxis();
                        _this.plotYaxis();
                        _this.tooltipData();
                        _this.dataforChart();
                        _this.transformData1(_this.finaldataarray);
                        _this.plotChart();
                    }), 0);
                }));
            }
            else if (this.datahisto) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.datahisto = _this.getResponseData(_this.datahisto);
                    _this.transformData();
                    _this.plotXaxis();
                    _this.plotYaxis();
                    _this.tooltipData();
                    _this.dataforChart();
                    _this.transformData1(_this.finaldataarray);
                    _this.plotChart();
                }), 0);
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    HistogramComponent.prototype.fetchData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var requestJson;
        /** @type {?} */
        var key = this.drillabledatakey;
        /** @type {?} */
        var resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            var drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                resp = response;
                _this.httpresponse = response;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
            }), (/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    //this.data = this.getResponseData(resp);
                    _this.drawChart();
                }), 0);
            }));
        }
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.drawChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.datahisto = _this.getResponseData(_this.httpresponse);
            _this.transformData();
            _this.plotXaxis();
            _this.plotYaxis();
            _this.tooltipData();
            _this.dataforChart();
            _this.transformData1(_this.finaldataarray);
            _this.plotChart();
        }), 0);
    };
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    HistogramComponent.prototype.getResponseData = /**
     * @param {?} httpResponse
     * @return {?}
     */
    function (httpResponse) {
        /** @type {?} */
        var responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            var dr = this.datareader.split('.');
            try {
                for (var dr_1 = tslib_1.__values(dr), dr_1_1 = dr_1.next(); !dr_1_1.done; dr_1_1 = dr_1.next()) {
                    var ir = dr_1_1.value;
                    responsedata = responsedata[ir];
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (dr_1_1 && !dr_1_1.done && (_a = dr_1.return)) _a.call(dr_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
        var e_1, _a;
    };
    /**
     * @param {?} data1
     * @return {?}
     */
    HistogramComponent.prototype.transformData1 = /**
     * @param {?} data1
     * @return {?}
     */
    function (data1) {
        var _this = this;
        this.keyArray = [];
        this.legendArray = [];
        data1.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        function (element, i) {
            if (i == 0) {
                element.forEach((/**
                 * @param {?} innerelement
                 * @param {?} index
                 * @return {?}
                 */
                function (innerelement, index) {
                    if (index > 0) {
                        _this.legendArray[innerelement] = { 'data': [] };
                        _this.keyArray.push(innerelement);
                    }
                    else if (index == 0) {
                        _this.xaxis = innerelement;
                    }
                }));
            }
        }));
        /** @type {?} */
        var tempinnerarray;
        tempinnerarray = [];
        data1.forEach((/**
         * @param {?} element
         * @param {?} index
         * @return {?}
         */
        function (element, index) {
            if (index > 0) {
                /** @type {?} */
                var obj_1 = {};
                element.forEach((/**
                 * @param {?} innerelement
                 * @param {?} innerindex
                 * @return {?}
                 */
                function (innerelement, innerindex) {
                    if (innerindex >= 0) {
                        /** @type {?} */
                        var key = _this.keyArray[innerindex - 1];
                        obj_1[key] = element[innerindex];
                        /** @type {?} */
                        var legenddata = _this.legendArray[key];
                        if (legenddata) {
                            legenddata.data.push({ 'value': element[innerindex], 'label': element[0] });
                        }
                    }
                }));
                tempinnerarray.push(obj_1);
            }
        }));
        this.data = [];
        tempinnerarray.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            _this.data.push(element);
        }));
        this.legends = [];
        /** @type {?} */
        var element = this.datahisto[0];
        /** @type {?} */
        var object = { 'label': element[1] + " " + "of" + " " + element[0], 'color': this.color };
        this.legends.push(object);
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.plotChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var tooltip = this.toolTip(d3);
        /** @type {?} */
        var data;
        data = this.data;
        /** @type {?} */
        var keysetarray = [];
        /** @type {?} */
        var series;
        series = [];
        series = d3.stack().keys(this.keyArray)
            .offset(d3.stackOffsetDiverging)(this.data);
        /** @type {?} */
        var i = 0;
        /** @type {?} */
        var tempdata;
        tempdata = [];
        tempdata = series;
        tempdata.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            element.forEach((/**
             * @param {?} innerelement
             * @return {?}
             */
            function (innerelement) {
                /** @type {?} */
                var singletooltip = [];
                singletooltip.push(innerelement.data.tooltipdata[i]);
                innerelement.push(singletooltip);
            }));
            i++;
        }));
        /** @type {?} */
        var chartdata = [];
        for (i = 0; i < tempdata.length - 1; i++) {
            chartdata.push(tempdata[i]);
        }
        if (this.resizeflag == false) {
            //RESIZE STEP 1
            if (this.wt) {
                this.svgwidth = this.wt;
            }
            else if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            //RESIZE STEP 1 ENDS HERE
        }
        /** @type {?} */
        var margin = { top: 20, right: 20, bottom: 50, left: 60 };
        /** @type {?} */
        var width = this.svgwidth - margin.left - margin.right;
        /** @type {?} */
        var height = this.svgheight - margin.top - margin.bottom;
        //const height = +svg.attr("height") - margin.top - margin.bottom;
        /** @type {?} */
        var x;
        /** @type {?} */
        var y;
        this.svg = d3.select("#" + this.componentId)
            .attr('viewBox', '0 0 ' + this.svgwidth + ' ' + this.svgheight)
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        /** @type {?} */
        var barWidth = (width / this.chartData.length);
        /** @type {?} */
        var inc = barWidth / 2;
        x = d3.scalePoint()
            .domain(this.xaxisArray, (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d; }))
            .rangeRound([0, width]);
        y = d3.scaleLinear().rangeRound([height, 0]);
        y.domain([0, d3.max(this.arrayofLength)]);
        /** @type {?} */
        var z = d3.scaleOrdinal(d3.schemeCategory10);
        this.arrayofLength = [];
        // add x axis to svg
        if (this.device.IsDesktop() == true) {
            if (this.svgwidth <= 400) {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x)).
                    selectAll("text")
                    .attr("y", 0)
                    .attr("x", 9)
                    .attr("dy", ".35em")
                    .attr("transform", "rotate(60)")
                    .style("text-anchor", "start");
            }
            else {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));
            }
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        /** @type {?} */
        var horizontalpadding = 0.05;
        //add y axis to svg
        this.svg.append("g")
            .call(d3.axisLeft(y).ticks(this.tickscount));
        this.plotLine(this.svg, x, y, height, width);
        /** @type {?} */
        var histogramBar = this.svg.append("g")
            .selectAll("g")
            .data(chartdata)
            .enter().append("g")
            .attr("fill", this.color)
            .selectAll("rect")
            .data((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return d;
        }));
        /** @type {?} */
        var histogramBar1 = this.svg.append("g")
            .selectAll("g")
            .data(chartdata)
            .enter().append("g")
            .selectAll("labels")
            .data((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return d;
        }));
        /** @type {?} */
        var cnt = 0;
        histogramBar.enter().append("rect")
            .attr("width", barWidth - 1)
            .attr("y", (/**
         * @param {?} d
         * @param {?} index
         * @return {?}
         */
        function (d, index) {
            cnt++;
            return y(d[1]);
        }))
            .attr("cursor", "pointer")
            .attr("height", (/**
         * @param {?} d
         * @param {?} index
         * @return {?}
         */
        function (d, index) {
            return Math.abs(y(d[0]) - y(d[1] - horizontalpadding));
        }))
            .attr("transform", (/**
         * @param {?} d
         * @param {?} i
         * @return {?}
         */
        function (d, i) {
            /** @type {?} */
            var translate = [barWidth * i, 0];
            return "translate(" + translate + ")";
        }))
            .on("mouseover", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "visible");
        })).on("mousemove", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            /** @type {?} */
            var data = d[2];
            return tooltip.html(_this.setKey(data[0]))
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        })).on("mouseout", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "hidden");
        }))
            .on("click", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            /** @type {?} */
            var clickdata = d[2];
            _this.histogramClick(clickdata[0]);
            _this.fordrillableClick(_this, d, event);
            return tooltip.style("visibility", "hidden");
        }));
        if (this.labelflag) {
            histogramBar1.enter()
                .append("text")
                .style("font-weight", "bold")
                .attr("text-anchor", "middle")
                .attr("fill", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (_this.labelcolor && _this.labelcolor.length > 0) {
                    return _this.labelcolor;
                }
                else {
                    return "black";
                }
            }))
                .attr("y", (/**
             * @param {?} d
             * @param {?} i
             * @return {?}
             */
            function (d, i) {
                return y(d[1]);
            }))
                .text((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                /** @type {?} */
                var data;
                /** @type {?} */
                var data2;
                data = d[2];
                data2 = data[0];
                if (data2) {
                    return data2.value;
                }
                else {
                    return null;
                }
            }))
                .attr("transform", (/**
             * @param {?} d
             * @param {?} i
             * @return {?}
             */
            function (d, i) {
                /** @type {?} */
                var translate = [((barWidth * i) + barWidth / 2), (Math.abs(y(d[0]) - y(d[1] - horizontalpadding)))];
                return "translate(" + translate + ")";
            }))
                .on("mouseover", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "visible");
            })).on("mousemove", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                /** @type {?} */
                var data = d[2];
                return tooltip.html(_this.setKey(data[0]))
                    .style("top", (d3.event.pageY - 10) + "px")
                    .style("left", (d3.event.pageX + 10) + "px");
            })).on("mouseout", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "hidden");
            }))
                .on("click", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                /** @type {?} */
                var clickdata = d[2];
                _this.histogramClick(clickdata[0]);
                _this.fordrillableClick(_this, d, event);
                return tooltip.style("visibility", "hidden");
            }))
                .attr("cursor", "pointer");
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    HistogramComponent.prototype.histogramClick = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var object = {};
        /** @type {?} */
        var data = this.datahisto[0];
        /** @type {?} */
        var label1 = data[1];
        /** @type {?} */
        var label2 = data[0];
        if (obj.label.length) {
            object[label2 + ":"] = obj.label;
            object[label1 + ":"] = obj.value;
        }
        this.chartClick(object);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    HistogramComponent.prototype.legendClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.onLegendClick.emit(this.datahisto);
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.transformData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.array = [];
        this.values = [];
        this.datahisto.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            _this.values.push(element[1]);
        }));
        for (var i = 1; i < this.values.length; i++) {
            this.array.push(this.values[i]);
        }
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.plotXaxis = /**
     * @return {?}
     */
    function () {
        this.xaxisArray = [];
        this.xaxisArray.push(0);
        /** @type {?} */
        var newvalue = 0;
        /** @type {?} */
        var value = Math.ceil(d3.max(this.array));
        if (value % 10 == 0) {
            value = value;
        }
        else {
            value = (10 - value % 10) + value;
        }
        /** @type {?} */
        var quotient = value / 5;
        while (newvalue < value) {
            newvalue = newvalue + quotient;
            this.xaxisArray.push(newvalue);
        }
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.plotYaxis = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var tempvalue = 0;
        /** @type {?} */
        var lengthofArray = 0;
        /** @type {?} */
        var lengthcount = 0;
        /** @type {?} */
        var templength = 0;
        /** @type {?} */
        var newvalue = 0;
        this.yaxisArray = [];
        this.histogramarray = [];
        this.lengtharray = [];
        this.histogramdata = [];
        this.arrayofLength = [];
        this.chartData = [];
        this.xaxisArray.forEach((/**
         * @param {?} element1
         * @return {?}
         */
        function (element1) {
            _this.yaxisArray = [];
            _this.array.forEach((/**
             * @param {?} element2
             * @return {?}
             */
            function (element2) {
                if (tempvalue < element2 && element2 <= element1) {
                    _this.yaxisArray.push(element2);
                }
                lengthofArray = _this.yaxisArray.length;
            }));
            if (templength > lengthofArray) {
                lengthcount = templength;
            }
            else {
                lengthcount = lengthofArray;
            }
            templength = lengthcount;
            tempvalue = element1;
            _this.lengtharray.push(lengthofArray);
        }));
        /** @type {?} */
        var value = Math.ceil(templength);
        /** @type {?} */
        var quotient = value / 5;
        while (newvalue <= value) {
            newvalue = newvalue + quotient;
            this.yaxisData.push(newvalue);
        }
        for (var i = 1; i < this.histogramarray.length; i++) {
            this.histogramdata.push(this.histogramarray[i]);
        }
        for (var i = 1; i < this.lengtharray.length; i++) {
            this.arrayofLength.push(this.lengtharray[i]);
        }
        for (var i = 0; i < this.arrayofLength.length; i++) {
            /** @type {?} */
            var data = {};
            data["value"] = this.arrayofLength[i];
            this.chartData.push(data);
        }
        this.array = [];
    };
    //RESIZE STEP 4 STARTS
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    HistogramComponent.prototype.validateresize = 
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.wt) {
            }
            else {
                _this.resize();
            }
        }), 0);
    };
    //RESIZE STEP 4 ENDS
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    HistogramComponent.prototype.resize = 
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    function () {
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        if (this.wt) {
            this.svgwidth = this.wt;
        }
        else if (this.chartId) {
            this.svgwidth = this.chartId.nativeElement.offsetWidth;
        }
        this.cdf.detectChanges();
        this.transformData();
        this.plotXaxis();
        this.plotYaxis();
        this.tooltipData();
        this.dataforChart();
        this.transformData1(this.finaldataarray);
        this.plotChart();
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.dataforChart = /**
     * @return {?}
     */
    function () {
        this.finaldataarray = [];
        /** @type {?} */
        var initialArray = [];
        /** @type {?} */
        var temparray = [];
        initialArray.push('level');
        /** @type {?} */
        var maxElement = Math.max.apply(null, this.arrayofLength);
        /** @type {?} */
        var maxlength = maxElement;
        /** @type {?} */
        var n = 1;
        while (n <= maxElement) {
            initialArray.push('' + n);
            n++;
        }
        initialArray.push('tooltipdata');
        /** @type {?} */
        var length = this.arrayofLength.length;
        /** @type {?} */
        var num = 1;
        /** @type {?} */
        var number = 1;
        /** @type {?} */
        var j = 0;
        this.finaldataarray.push(initialArray);
        for (var i = 0; i < this.arrayofLength.length; i++) {
            /** @type {?} */
            var value = this.arrayofLength[i];
            /** @type {?} */
            var tempvalue = value;
            temparray = [];
            temparray.push('' + i);
            maxElement = maxlength;
            if (value > 0) {
                while (value != 0) {
                    temparray.push(number);
                    value--;
                }
                maxElement = maxElement - tempvalue;
                while (maxElement != 0) {
                    temparray.push(0);
                    maxElement--;
                }
            }
            else {
                while (maxElement != 0) {
                    temparray.push(0);
                    maxElement--;
                }
            }
            temparray.push(this.tooltipArray[j]);
            this.finaldataarray.push(temparray);
            j++;
        }
    };
    /**
     * @return {?}
     */
    HistogramComponent.prototype.tooltipData = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var arrayofTooltip = [];
        /** @type {?} */
        var obj = { "label": "", "value": "" };
        this.datahisto.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            obj = { "label": "", "value": "" };
            obj["label"] = element[0];
            obj["value"] = element[1];
            arrayofTooltip.push(obj);
        }));
        /** @type {?} */
        var value1 = this.xaxisArray[0];
        /** @type {?} */
        var tooltipdata = [];
        var _loop_1 = function (j) {
            tooltipdata = [];
            /** @type {?} */
            var value2 = this_1.xaxisArray[j];
            arrayofTooltip.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                if (value1 <= element.value && element.value <= value2) {
                    /** @type {?} */
                    var tooltipobj = { "label": "", "value": "" };
                    tooltipobj["label"] = element["label"];
                    tooltipobj["value"] = element["value"];
                    tooltipdata.push(tooltipobj);
                }
            }));
            this_1.tooltipArray.push(tooltipdata);
            value1 = value2;
        };
        var this_1 = this;
        for (var j = 1; j < this.xaxisArray.length; j++) {
            _loop_1(j);
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    HistogramComponent.prototype.setKey = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var object = {};
        /** @type {?} */
        var data = this.datahisto[0];
        /** @type {?} */
        var label1 = data[1];
        /** @type {?} */
        var label2 = data[0];
        object[label2 + ":"] = obj.label;
        object[label1 + ":"] = obj.value;
        return (this.toolTipForBar(object));
    };
    /**
     * @param {?} g
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    HistogramComponent.prototype.plotLine = /**
     * @param {?} g
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    function (g, x, y, height, width) {
        if (this.hScale) {
            g.append('g')
                .attr("color", "lightgrey")
                .call(d3.axisLeft(y)
                .tickSize(-width).tickFormat('').ticks(this.tickscount));
        }
    };
    HistogramComponent.decorators = [
        { type: Component, args: [{
                    selector: 'amexio-d3-chart-histogram',
                    template: "<div #chartId *ngIf=\"drillableFlag\" (window:resize)=\"validateresize()\">\n    <table *ngIf=\"datahisto.length > 0\" style=\"width: 100%;\">\n        <tr *ngIf=\"title.length > 0\">\n            <td colspan=\"2\" style=\"font-size: 18px; font-weight: bold; \"> {{title}} </td>\n        </tr>\n        <tr>\n            <td>\n                <svg [attr.height]=\"svgheight\" [attr.width]=\"svgwidth\" [attr.id]=\"componentId\">\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf=\"legend\">\n            <td style=\"display: block; padding: 5px;\">\n                <amexio-d3-legend *ngIf=\"legend\" [horizontal]=\"true\" (onClick)=\"legendClick($event)\" [data]=\"legends\" style=\"height:100%;\"></amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    <div *ngIf=\"datahisto.length < 1\" class=\"lmask\" style=\"padding-top:50%\">\n        </div>\n</div>",
                    styles: [".bar{background-color:#3943cf;padding:.02px}"]
                },] },
    ];
    HistogramComponent.ctorParameters = function () { return [
        { type: CommanDataService },
        { type: ChangeDetectorRef },
        { type: DeviceQueryService }
    ]; };
    HistogramComponent.propDecorators = {
        svgwidth: [{ type: Input, args: ['width',] }],
        svgheight: [{ type: Input, args: ['height',] }],
        color: [{ type: Input, args: ['color',] }],
        datahisto: [{ type: Input, args: ['data',] }],
        tickscount: [{ type: Input, args: ['yaxis-interval',] }],
        chartId: [{ type: ViewChild, args: ['chartId',] }],
        divid: [{ type: ViewChild, args: ['divid',] }]
    };
    return HistogramComponent;
}(AmexioD3BaseChartComponent));
export { HistogramComponent };
if (false) {
    /** @type {?} */
    HistogramComponent.prototype.svgwidth;
    /** @type {?} */
    HistogramComponent.prototype.svgheight;
    /** @type {?} */
    HistogramComponent.prototype.color;
    /** @type {?} */
    HistogramComponent.prototype.datahisto;
    /** @type {?} */
    HistogramComponent.prototype.tickscount;
    /** @type {?} */
    HistogramComponent.prototype.chartId;
    /** @type {?} */
    HistogramComponent.prototype.divid;
    /** @type {?} */
    HistogramComponent.prototype.wt;
    /** @type {?} */
    HistogramComponent.prototype.httpresponse;
    /** @type {?} */
    HistogramComponent.prototype.svg;
    /** @type {?} */
    HistogramComponent.prototype.data1;
    /** @type {?} */
    HistogramComponent.prototype.values;
    /** @type {?} */
    HistogramComponent.prototype.array;
    /** @type {?} */
    HistogramComponent.prototype.xaxisArray;
    /** @type {?} */
    HistogramComponent.prototype.yaxisArray;
    /** @type {?} */
    HistogramComponent.prototype.yaxisData;
    /** @type {?} */
    HistogramComponent.prototype.histogramarray;
    /** @type {?} */
    HistogramComponent.prototype.histogramdata;
    /** @type {?} */
    HistogramComponent.prototype.lengtharray;
    /** @type {?} */
    HistogramComponent.prototype.arrayofLength;
    /** @type {?} */
    HistogramComponent.prototype.chartData;
    /** @type {?} */
    HistogramComponent.prototype.finaldataarray;
    /** @type {?} */
    HistogramComponent.prototype.legendArray;
    /** @type {?} */
    HistogramComponent.prototype.keyArray;
    /** @type {?} */
    HistogramComponent.prototype.predefinedcolors;
    /** @type {?} */
    HistogramComponent.prototype.legends;
    /** @type {?} */
    HistogramComponent.prototype.charttype;
    /** @type {?} */
    HistogramComponent.prototype.data;
    /** @type {?} */
    HistogramComponent.prototype.datareaderdata;
    /** @type {?} */
    HistogramComponent.prototype.xaxis;
    /** @type {?} */
    HistogramComponent.prototype.tempp;
    /** @type {?} */
    HistogramComponent.prototype.tooltipArray;
    /** @type {?} */
    HistogramComponent.prototype.index;
    /**
     * @type {?}
     * @private
     */
    HistogramComponent.prototype.myservice;
    /**
     * @type {?}
     * @private
     */
    HistogramComponent.prototype.cdf;
    /**
     * @type {?}
     * @private
     */
    HistogramComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzdG9ncmFtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FtZXhpby1jaGFydC1kMy8iLCJzb3VyY2VzIjpbImxpYi9oaXN0b2dyYW0vaGlzdG9ncmFtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQVUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkcsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFcEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDcEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDdEUsT0FBTyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFDekI7SUF3QndDLDhDQUEwQjtJQW1DaEUsNEJBQW9CLFNBQTRCLEVBQVUsR0FBc0IsRUFBVSxNQUEwQjtRQUFwSCxZQUNFLGtCQUFNLFdBQVcsQ0FBQyxTQUNuQjtRQUZtQixlQUFTLEdBQVQsU0FBUyxDQUFtQjtRQUFVLFNBQUcsR0FBSCxHQUFHLENBQW1CO1FBQVUsWUFBTSxHQUFOLE1BQU0sQ0FBb0I7UUFqQ25HLGVBQVMsR0FBVyxHQUFHLENBQUM7UUFDekIsV0FBSyxHQUFXLE1BQU0sQ0FBQztRQUN4QixlQUFTLEdBQVEsRUFBRSxDQUFDO1FBU25DLFlBQU0sR0FBVSxFQUFFLENBQUM7UUFDbkIsV0FBSyxHQUFVLEVBQUUsQ0FBQztRQUNsQixnQkFBVSxHQUFVLEVBQUUsQ0FBQztRQUN2QixnQkFBVSxHQUFVLEVBQUUsQ0FBQztRQUN2QixlQUFTLEdBQVUsRUFBRSxDQUFDO1FBQ3RCLG9CQUFjLEdBQVUsRUFBRSxDQUFDO1FBQzNCLG1CQUFhLEdBQVUsRUFBRSxDQUFBO1FBQ3pCLGlCQUFXLEdBQVUsRUFBRSxDQUFDO1FBQ3hCLG1CQUFhLEdBQVUsRUFB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QUNuQixTQUFTLFNBQUMsT0FBTzs7SUFnbkJwQix5QkFBQztDQUFBLEFBaHBCRCxDQXdCd0MsMEJBQTBCLEdBd25CakU7U0F4bkJZLGtCQUFrQjs7O0lBQzdCLHNDQUFpQzs7SUFDakMsdUNBQXlDOztJQUN6QyxtQ0FBdUM7O0lBQ3ZDLHVDQUFtQzs7SUFDbkMsd0NBQTRDOztJQUU1QyxxQ0FBMEM7O0lBQzFDLG1DQUFzQzs7SUFDdEMsZ0NBQVc7O0lBQ1gsMENBQWtCOztJQUNsQixpQ0FBUzs7SUFDVCxtQ0FBVzs7SUFDWCxvQ0FBbUI7O0lBQ25CLG1DQUFrQjs7SUFDbEIsd0NBQXVCOztJQUN2Qix3Q0FBdUI7O0lBQ3ZCLHVDQUFzQjs7SUFDdEIsNENBQTJCOztJQUMzQiwyQ0FBeUI7O0lBQ3pCLHlDQUF3Qjs7SUFDeEIsMkNBQTBCOztJQUMxQix1Q0FBc0I7O0lBQ3RCLDRDQUEyQjs7SUFDM0IseUNBQW1COztJQUNuQixzQ0FBZ0I7O0lBQ2hCLDhDQUF3Qjs7SUFDeEIscUNBQWU7O0lBQ2YsdUNBQWtCOztJQUNsQixrQ0FBWTs7SUFDWiw0Q0FBc0I7O0lBQ3RCLG1DQUFXOztJQUNYLG1DQUFXOztJQUNYLDBDQUF5Qjs7SUFDekIsbUNBQVU7Ozs7O0lBQ0UsdUNBQW9DOzs7OztJQUFFLGlDQUE4Qjs7Ozs7SUFBRSxvQ0FBa0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIE9uSW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQW1leGlvRDNCYXNlQ2hhcnRDb21wb25lbnQgfSBmcm9tIFwiLi4vYmFzZS9iYXNlLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgUGxvdENhcnQgfSBmcm9tIFwiLi4vYmFzZS9jaGFydC5jb21wb25lbnRcIjtcbmltcG9ydCB7IENvbW1hbkRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29tbWFuLmRhdGEuc2VydmljZSc7XG5pbXBvcnQgeyBEZXZpY2VRdWVyeVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9kZXZpY2UucXVlcnkuc2VydmljZSc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhbWV4aW8tZDMtY2hhcnQtaGlzdG9ncmFtJyxcbiAgdGVtcGxhdGU6IGA8ZGl2ICNjaGFydElkICpuZ0lmPVwiZHJpbGxhYmxlRmxhZ1wiICh3aW5kb3c6cmVzaXplKT1cInZhbGlkYXRlcmVzaXplKClcIj5cbiAgICA8dGFibGUgKm5nSWY9XCJkYXRhaGlzdG8ubGVuZ3RoID4gMFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7XCI+XG4gICAgICAgIDx0ciAqbmdJZj1cInRpdGxlLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsgXCI+IHt7dGl0bGV9fSA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgPHN2ZyBbYXR0ci5oZWlnaHRdPVwic3ZnaGVpZ2h0XCIgW2F0dHIud2lkdGhdPVwic3Znd2lkdGhcIiBbYXR0ci5pZF09XCJjb21wb25lbnRJZFwiPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgPHRyICpuZ0lmPVwibGVnZW5kXCI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgcGFkZGluZzogNXB4O1wiPlxuICAgICAgICAgICAgICAgIDxhbWV4aW8tZDMtbGVnZW5kICpuZ0lmPVwibGVnZW5kXCIgW2hvcml6b250YWxdPVwidHJ1ZVwiIChvbkNsaWNrKT1cImxlZ2VuZENsaWNrKCRldmVudClcIiBbZGF0YV09XCJsZWdlbmRzXCIgc3R5bGU9XCJoZWlnaHQ6MTAwJTtcIj48L2FtZXhpby1kMy1sZWdlbmQ+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgIDwvdGFibGU+XG4gICAgPGRpdiAqbmdJZj1cImRhdGFoaXN0by5sZW5ndGggPCAxXCIgY2xhc3M9XCJsbWFza1wiIHN0eWxlPVwicGFkZGluZy10b3A6NTAlXCI+XG4gICAgICAgIDwvZGl2PlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYC5iYXJ7YmFja2dyb3VuZC1jb2xvcjojMzk0M2NmO3BhZGRpbmc6LjAycHh9YF1cbn0pXG5leHBvcnQgY2xhc3MgSGlzdG9ncmFtQ29tcG9uZW50IGV4dGVuZHMgQW1leGlvRDNCYXNlQ2hhcnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoJ3dpZHRoJykgc3Znd2lkdGg6IG51bWJlcjtcbiAgQElucHV0KCdoZWlnaHQnKSBzdmdoZWlnaHQ6IG51bWJlciA9IDQwMDtcbiAgQElucHV0KCdjb2xvcicpIGNvbG9yOiBzdHJpbmcgPSBcImJsdWVcIjtcbiAgQElucHV0KCdkYXRhJykgZGF0YWhpc3RvOiBhbnkgPSBbXTtcbiAgQElucHV0KCd5YXhpcy1pbnRlcnZhbCcpIHRpY2tzY291bnQ6IG51bWJlcjtcbiBcbiAgQFZpZXdDaGlsZCgnY2hhcnRJZCcpIGNoYXJ0SWQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RpdmlkJykgZGl2aWQ6IEVsZW1lbnRSZWY7XG4gIHd0OiBudW1iZXI7XG4gIGh0dHByZXNwb25zZTogYW55O1xuICBzdmc6IGFueTtcbiAgZGF0YTE6IGFueTtcbiAgdmFsdWVzOiBhbnlbXSA9IFtdO1xuICBhcnJheTogYW55W10gPSBbXTtcbiAgeGF4aXNBcnJheTogYW55W10gPSBbXTtcbiAgeWF4aXNBcnJheTogYW55W10gPSBbXTtcbiAgeWF4aXNEYXRhOiBhbnlbXSA9IFtdO1xuICBoaXN0b2dyYW1hcnJheTogYW55W10gPSBbXTtcbiAgaGlzdG9ncmFtZGF0YTogYW55W10gPSBbXVxuICBsZW5ndGhhcnJheTogYW55W10gPSBbXTtcbiAgYXJyYXlvZkxlbmd0aDogYW55W10gPSBbXTtcbiAgY2hhcnREYXRhOiBhbnlbXSA9IFtdO1xuICBmaW5hbGRhdGFhcnJheTogYW55W10gPSBbXTtcbiAgbGVnZW5kQXJyYXk6IGFueVtdO1xuICBrZXlBcnJheTogYW55W107XG4gIHByZWRlZmluZWRjb2xvcnM6IGFueVtdO1xuICBsZWdlbmRzOiBhbnlbXTtcbiAgY2hhcnR0eXBlOiBzdHJpbmc7XG4gIGRhdGE6IGFueVtdO1xuICBkYXRhcmVhZGVyZGF0YTogYW55W107XG4gIHhheGlzOiBhbnk7XG4gIHRlbXBwOiBhbnk7XG4gIHRvb2x0aXBBcnJheTogYW55W10gPSBbXTtcbiAgaW5kZXggPSAwO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15c2VydmljZTogQ29tbWFuRGF0YVNlcnZpY2UsIHByaXZhdGUgY2RmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBkZXZpY2U6IERldmljZVF1ZXJ5U2VydmljZSkge1xuICAgIHN1cGVyKCdoaXN0b2dyYW0nKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMud3QgPSB0aGlzLnN2Z3dpZHRoO1xuICAgIGxldCByZXM6IGFueVxuICAgIGlmICh0aGlzLmxldmVsIDw9IDEpIHtcbiAgICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICAgIHRoaXMubXlzZXJ2aWNlLmZldGNoVXJsRGF0YSh0aGlzLmh0dHB1cmwsIHRoaXMuaHR0cG1ldGhvZCkuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcyA9IHJlc3BvbnNlO1xuICAgICAgICAgIHRoaXMuaHR0cHJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFoaXN0byA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kYXRhaGlzdG8gPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKClcbiAgICAgICAgICAgIHRoaXMucGxvdFhheGlzKCk7XG4gICAgICAgICAgICB0aGlzLnBsb3RZYXhpcygpO1xuICAgICAgICAgICAgdGhpcy50b29sdGlwRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhZm9yQ2hhcnQoKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YTEodGhpcy5maW5hbGRhdGFhcnJheSk7XG4gICAgICAgICAgICB0aGlzLnBsb3RDaGFydCgpO1xuXG4gICAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhaGlzdG8pIHtcblxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGF0YWhpc3RvID0gdGhpcy5nZXRSZXNwb25zZURhdGEodGhpcy5kYXRhaGlzdG8pO1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSgpXG4gICAgICAgICAgdGhpcy5wbG90WGF4aXMoKTtcbiAgICAgICAgICB0aGlzLnBsb3RZYXhpcygpO1xuICAgICAgICAgIHRoaXMudG9vbHRpcERhdGEoKTtcbiAgICAgICAgICB0aGlzLmRhdGFmb3JDaGFydCgpO1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YTEodGhpcy5maW5hbGRhdGFhcnJheSk7XG4gICAgICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcblxuICAgICAgICB9LCAwKTtcblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZldGNoRGF0YShkYXRhOiBhbnkpIHtcblxuICAgIGxldCByZXF1ZXN0SnNvbjtcbiAgICBsZXQga2V5ID0gdGhpcy5kcmlsbGFibGVkYXRha2V5O1xuICAgIGxldCByZXNwOiBhbnk7XG4gICAgaWYgKHRoaXMuZHJpbGxhYmxlZGF0YWtleS5sZW5ndGgpIHtcbiAgICAgIGxldCBkcmlsbGFibGVkYXRhID0gdGhpcy5nZXRNdWx0aXBsZURyaWxsYmxlS2V5RGF0YShkYXRhLCBrZXkpO1xuICAgICAgcmVxdWVzdEpzb24gPSBkcmlsbGFibGVkYXRhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJlcXVlc3RKc29uID0gZGF0YTtcbiAgICB9XG5cblxuICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICB0aGlzLm15c2VydmljZS5wb3N0ZmV0Y2hEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kLCByZXF1ZXN0SnNvbikuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwID0gcmVzcG9uc2U7XG4gICAgICAgIHRoaXMuaHR0cHJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy90aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXNwKTtcbiAgICAgICAgICB0aGlzLmRyYXdDaGFydCgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGRyYXdDaGFydCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWhpc3RvID0gdGhpcy5nZXRSZXNwb25zZURhdGEodGhpcy5odHRwcmVzcG9uc2UpO1xuICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKClcbiAgICAgIHRoaXMucGxvdFhheGlzKCk7XG4gICAgICB0aGlzLnBsb3RZYXhpcygpO1xuICAgICAgdGhpcy50b29sdGlwRGF0YSgpO1xuICAgICAgdGhpcy5kYXRhZm9yQ2hhcnQoKTtcbiAgICAgIHRoaXMudHJhbnNmb3JtRGF0YTEodGhpcy5maW5hbGRhdGFhcnJheSk7XG4gICAgICB0aGlzLnBsb3RDaGFydCgpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgZ2V0UmVzcG9uc2VEYXRhKGh0dHBSZXNwb25zZTogYW55KSB7XG4gICAgbGV0IHJlc3BvbnNlZGF0YSA9IGh0dHBSZXNwb25zZTtcbiAgICBpZiAodGhpcy5kYXRhcmVhZGVyICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGRyID0gdGhpcy5kYXRhcmVhZGVyLnNwbGl0KCcuJyk7XG4gICAgICBmb3IgKGNvbnN0IGlyIG9mIGRyKSB7XG4gICAgICAgIHJlc3BvbnNlZGF0YSA9IHJlc3BvbnNlZGF0YVtpcl07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3BvbnNlZGF0YSA9IGh0dHBSZXNwb25zZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlZGF0YTtcbiAgfVxuXG4gIHRyYW5zZm9ybURhdGExKGRhdGExOiBhbnkpIHtcbiAgICB0aGlzLmtleUFycmF5ID0gW107XG4gICAgdGhpcy5sZWdlbmRBcnJheSA9IFtdO1xuICAgIGRhdGExLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgZWxlbWVudC5mb3JFYWNoKChpbm5lcmVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5sZWdlbmRBcnJheVtpbm5lcmVsZW1lbnRdID0geyAnZGF0YSc6IFtdIH07XG4gICAgICAgICAgICB0aGlzLmtleUFycmF5LnB1c2goaW5uZXJlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgdGhpcy54YXhpcyA9IGlubmVyZWxlbWVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCB0ZW1waW5uZXJhcnJheTogYW55W107XG4gICAgdGVtcGlubmVyYXJyYXkgPSBbXTtcbiAgICBkYXRhMS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICBsZXQgb2JqOiBhbnkgPSB7fTtcbiAgICAgICAgZWxlbWVudC5mb3JFYWNoKChpbm5lcmVsZW1lbnQsIGlubmVyaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAoaW5uZXJpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleUFycmF5W2lubmVyaW5kZXggLSAxXTtcbiAgICAgICAgICAgIG9ialtrZXldID0gZWxlbWVudFtpbm5lcmluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2VuZGRhdGEgPSB0aGlzLmxlZ2VuZEFycmF5W2tleV07XG4gICAgICAgICAgICBpZiAobGVnZW5kZGF0YSkge1xuICAgICAgICAgICAgICBsZWdlbmRkYXRhLmRhdGEucHVzaCh7ICd2YWx1ZSc6IGVsZW1lbnRbaW5uZXJpbmRleF0sICdsYWJlbCc6IGVsZW1lbnRbMF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGVtcGlubmVyYXJyYXkucHVzaChvYmopO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGVtcGlubmVyYXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIHRoaXMuZGF0YS5wdXNoKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMubGVnZW5kcyA9IFtdO1xuICAgIGxldCBlbGVtZW50ID0gdGhpcy5kYXRhaGlzdG9bMF07XG4gICAgbGV0IG9iamVjdCA9IHsgJ2xhYmVsJzogZWxlbWVudFsxXSArIFwiIFwiICsgXCJvZlwiICsgXCIgXCIgKyBlbGVtZW50WzBdLCAnY29sb3InOiB0aGlzLmNvbG9yIH07XG4gICAgdGhpcy5sZWdlbmRzLnB1c2gob2JqZWN0KTtcbiAgfVxuXG4gIHBsb3RDaGFydCgpIHtcblxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnRvb2xUaXAoZDMpO1xuICAgIGxldCBkYXRhO1xuICAgIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IGtleXNldGFycmF5OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBzZXJpZXM7XG4gICAgc2VyaWVzID0gW107XG4gICAgc2VyaWVzID0gZDMuc3RhY2soKS5rZXlzKHRoaXMua2V5QXJyYXkpXG4gICAgICAub2Zmc2V0KGQzLnN0YWNrT2Zmc2V0RGl2ZXJnaW5nKVxuICAgICAgKHRoaXMuZGF0YSk7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCB0ZW1wZGF0YTtcbiAgICB0ZW1wZGF0YSA9IFtdO1xuICAgIHRlbXBkYXRhID0gc2VyaWVzO1xuICAgIHRlbXBkYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LmZvckVhY2goaW5uZXJlbGVtZW50ID0+IHtcbiAgICAgICAgbGV0IHNpbmdsZXRvb2x0aXAgPSBbXTtcbiAgICAgICAgc2luZ2xldG9vbHRpcC5wdXNoKGlubmVyZWxlbWVudC5kYXRhLnRvb2x0aXBkYXRhW2ldKTtcbiAgICAgICAgaW5uZXJlbGVtZW50LnB1c2goc2luZ2xldG9vbHRpcCk7XG4gICAgICB9KTtcbiAgICAgIGkrKztcbiAgICB9KTtcblxuICAgIGxldCBjaGFydGRhdGEgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGVtcGRhdGEubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjaGFydGRhdGEucHVzaCh0ZW1wZGF0YVtpXSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnJlc2l6ZWZsYWcgPT0gZmFsc2UpIHtcbiAgICAgIC8vUkVTSVpFIFNURVAgMVxuICAgICAgaWYgKHRoaXMud3QpIHtcbiAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMud3Q7XG5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGFydElkKSB7XG4gICAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcblxuICAgICAgfVxuICAgICAgLy9SRVNJWkUgU1RFUCAxIEVORFMgSEVSRVxuICAgIH1cbiAgICBjb25zdCBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiA1MCwgbGVmdDogNjAgfTtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuc3Znd2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnN2Z2hlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgLy9jb25zdCBoZWlnaHQgPSArc3ZnLmF0dHIoXCJoZWlnaHRcIikgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblxuICAgIGxldCB4LCB5O1xuXG4gICAgdGhpcy5zdmcgPSBkMy5zZWxlY3QoXCIjXCIgKyB0aGlzLmNvbXBvbmVudElkKVxuICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB0aGlzLnN2Z3dpZHRoICsgJyAnICsgdGhpcy5zdmdoZWlnaHQpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgbGV0IGJhcldpZHRoID0gKHdpZHRoIC8gdGhpcy5jaGFydERhdGEubGVuZ3RoKTtcbiAgICBsZXQgaW5jID0gYmFyV2lkdGggLyAyO1xuICAgIHggPSBkMy5zY2FsZVBvaW50KClcbiAgICAgIC5kb21haW4odGhpcy54YXhpc0FycmF5LCAoZCkgPT4geyByZXR1cm4gZDsgfSlcbiAgICAgIC5yYW5nZVJvdW5kKFswLCB3aWR0aF0pO1xuXG5cbiAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZVJvdW5kKFtoZWlnaHQsIDBdKTtcbiAgICB5LmRvbWFpbihbMCwgZDMubWF4KHRoaXMuYXJyYXlvZkxlbmd0aCldKTtcblxuICAgIGxldCB6ID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApO1xuICAgIHRoaXMuYXJyYXlvZkxlbmd0aCA9IFtdO1xuICAgIC8vIGFkZCB4IGF4aXMgdG8gc3ZnXG5cbiAgICBpZiAodGhpcy5kZXZpY2UuSXNEZXNrdG9wKCkgPT0gdHJ1ZSkge1xuICAgICAgaWYgKHRoaXMuc3Znd2lkdGggPD0gNDAwKSB7XG4gICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSkuXG4gICAgICAgICAgc2VsZWN0QWxsKFwidGV4dFwiKVxuICAgICAgICAgIC5hdHRyKFwieVwiLCAwKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCA5KVxuICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDYwKVwiKVxuICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgpKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgpKS5cbiAgICAgICAgc2VsZWN0QWxsKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInlcIiwgMClcbiAgICAgICAgLmF0dHIoXCJ4XCIsIDkpXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSg2MClcIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKTtcblxuICAgIH1cblxuICAgIGxldCBob3Jpem9udGFscGFkZGluZyA9IDAuMDU7XG4gICAgLy9hZGQgeSBheGlzIHRvIHN2Z1xuICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KHkpLnRpY2tzKHRoaXMudGlja3Njb3VudCkpO1xuXG4gICAgdGhpcy5wbG90TGluZSh0aGlzLnN2ZywgeCwgeSwgaGVpZ2h0LCB3aWR0aCk7XG5cbiAgICBsZXQgaGlzdG9ncmFtQmFyID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgIC5kYXRhKGNoYXJ0ZGF0YSlcbiAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCB0aGlzLmNvbG9yKVxuICAgICAgLnNlbGVjdEFsbChcInJlY3RcIilcbiAgICAgIC5kYXRhKChkKSA9PiB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSlcblxuICAgIGxldCBoaXN0b2dyYW1CYXIxID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgIC5kYXRhKGNoYXJ0ZGF0YSlcbiAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgIC8vIC5hdHRyKFwiZmlsbFwiLCB0aGlzLmNvbG9yKVxuICAgICAgLnNlbGVjdEFsbChcImxhYmVsc1wiKVxuICAgICAgLmRhdGEoKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9KVxuICAgIGxldCBjbnQgPSAwO1xuXG5cbiAgICBoaXN0b2dyYW1CYXIuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIGJhcldpZHRoIC0gMSlcbiAgICAgIC5hdHRyKFwieVwiLCAoZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY250Kys7XG4gICAgICAgIHJldHVybiB5KGRbMV0pO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyh5KGRbMF0pIC0geShkWzFdIC0gaG9yaXpvbnRhbHBhZGRpbmcpKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCAoZCwgaSkgPT4ge1xuICAgICAgICBsZXQgdHJhbnNsYXRlID0gW2JhcldpZHRoICogaSwgMF07XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZSArIFwiKVwiO1xuICAgICAgfSlcbiAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoZCkgPT4ge1xuICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xuICAgICAgfSkub24oXCJtb3VzZW1vdmVcIixcbiAgICAgICAgKGQ6IGFueSkgPT4ge1xuICAgICAgICAgIGxldCBkYXRhID0gZFsyXTtcbiAgICAgICAgICByZXR1cm4gdG9vbHRpcC5odG1sKHRoaXMuc2V0S2V5KGRhdGFbMF0pKVxuICAgICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArIFwicHhcIilcbiAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgXCJweFwiKTtcblxuICAgICAgICB9KS5vbihcIm1vdXNlb3V0XCIsIChkKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICB9KVxuICAgICAgLm9uKFwiY2xpY2tcIiwgKGQpID0+IHtcbiAgICAgICAgbGV0IGNsaWNrZGF0YSA9IGRbMl07XG4gICAgICAgIHRoaXMuaGlzdG9ncmFtQ2xpY2soY2xpY2tkYXRhWzBdKTtcbiAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgIH0pO1xuICAgIGlmICh0aGlzLmxhYmVsZmxhZykge1xuICAgICAgaGlzdG9ncmFtQmFyMS5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5zdHlsZShcImZvbnQtd2VpZ2h0XCIsIFwiYm9sZFwiKVxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCAoZCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmxhYmVsY29sb3IgJiYgdGhpcy5sYWJlbGNvbG9yLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsY29sb3I7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuYXR0cihcInlcIiwgKGQsIGkpID0+IHtcbiAgICAgICAgICByZXR1cm4geShkWzFdKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRleHQoKGQpID0+IHtcblxuICAgICAgICAgIGxldCBkYXRhOiBhbnk7XG4gICAgICAgICAgbGV0IGRhdGEyOiBhbnk7XG4gICAgICAgICAgZGF0YSA9IGRbMl07XG4gICAgICAgICAgZGF0YTIgPSBkYXRhWzBdO1xuICAgICAgICAgIGlmIChkYXRhMikge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEyLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgKGQsIGkpID0+IHtcbiAgICAgICAgICBsZXQgdHJhbnNsYXRlID0gWygoYmFyV2lkdGggKiBpKSArIGJhcldpZHRoIC8gMiksIChNYXRoLmFicyh5KGRbMF0pIC0geShkWzFdIC0gaG9yaXpvbnRhbHBhZGRpbmcpKSldO1xuICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZSArIFwiKVwiO1xuICAgICAgICB9KVxuICAgICAgICAvL2xhYmVsIGNsaWNrIGxvZ2ljXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoZCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG4gICAgICAgIH0pLm9uKFwibW91c2Vtb3ZlXCIsXG4gICAgICAgICAgKGQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBkWzJdO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuaHRtbCh0aGlzLnNldEtleShkYXRhWzBdKSlcbiAgICAgICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArIFwicHhcIilcbiAgICAgICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVggKyAxMCkgKyBcInB4XCIpO1xuXG4gICAgICAgICAgfSkub24oXCJtb3VzZW91dFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgIH0pXG4gICAgICAgIC5vbihcImNsaWNrXCIsIChkKSA9PiB7XG4gICAgICAgICAgbGV0IGNsaWNrZGF0YSA9IGRbMl07XG4gICAgICAgICAgdGhpcy5oaXN0b2dyYW1DbGljayhjbGlja2RhdGFbMF0pO1xuICAgICAgICAgIHRoaXMuZm9yZHJpbGxhYmxlQ2xpY2sodGhpcywgZCwgZXZlbnQpO1xuICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgXCJwb2ludGVyXCIpXG5cbiAgICB9XG4gIH1cblxuICBoaXN0b2dyYW1DbGljayhvYmo6IGFueSkge1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YWhpc3RvWzBdO1xuICAgIGxldCBsYWJlbDEgPSBkYXRhWzFdO1xuICAgIGxldCBsYWJlbDIgPSBkYXRhWzBdO1xuICAgIGlmIChvYmoubGFiZWwubGVuZ3RoKSB7XG4gICAgICBvYmplY3RbbGFiZWwyICsgXCI6XCJdID0gb2JqLmxhYmVsO1xuICAgICAgb2JqZWN0W2xhYmVsMSArIFwiOlwiXSA9IG9iai52YWx1ZTtcbiAgICB9XG4gICAgdGhpcy5jaGFydENsaWNrKG9iamVjdCk7XG4gIH1cblxuICBsZWdlbmRDbGljayhldmVudDogYW55KSB7XG4gICAgdGhpcy5vbkxlZ2VuZENsaWNrLmVtaXQodGhpcy5kYXRhaGlzdG8pO1xuICB9XG5cbiAgdHJhbnNmb3JtRGF0YSgpIHtcbiAgICB0aGlzLmFycmF5ID0gW107XG4gICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB0aGlzLmRhdGFoaXN0by5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy52YWx1ZXMucHVzaChlbGVtZW50WzFdKTtcbiAgICB9KTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMudmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmFycmF5LnB1c2godGhpcy52YWx1ZXNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHBsb3RYYXhpcygpIHtcbiAgICB0aGlzLnhheGlzQXJyYXkgPSBbXTtcbiAgICB0aGlzLnhheGlzQXJyYXkucHVzaCgwKTtcbiAgICBsZXQgbmV3dmFsdWU6IG51bWJlciA9IDA7XG4gICAgbGV0IHZhbHVlID0gTWF0aC5jZWlsKGQzLm1heCh0aGlzLmFycmF5KSk7XG4gICAgaWYgKHZhbHVlICUgMTAgPT0gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSAoMTAgLSB2YWx1ZSAlIDEwKSArIHZhbHVlO1xuICAgIH1cbiAgICBsZXQgcXVvdGllbnQgPSB2YWx1ZSAvIDU7XG4gICAgd2hpbGUgKG5ld3ZhbHVlIDwgdmFsdWUpIHtcbiAgICAgIG5ld3ZhbHVlID0gbmV3dmFsdWUgKyBxdW90aWVudDtcbiAgICAgIHRoaXMueGF4aXNBcnJheS5wdXNoKG5ld3ZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwbG90WWF4aXMoKSB7XG4gICAgbGV0IHRlbXB2YWx1ZSA9IDA7XG4gICAgbGV0IGxlbmd0aG9mQXJyYXkgPSAwO1xuICAgIGxldCBsZW5ndGhjb3VudCA9IDA7XG4gICAgbGV0IHRlbXBsZW5ndGggPSAwO1xuICAgIGxldCBuZXd2YWx1ZTogbnVtYmVyID0gMDtcbiAgICB0aGlzLnlheGlzQXJyYXkgPSBbXTtcbiAgICB0aGlzLmhpc3RvZ3JhbWFycmF5ID0gW107XG4gICAgdGhpcy5sZW5ndGhhcnJheSA9IFtdO1xuICAgIHRoaXMuaGlzdG9ncmFtZGF0YSA9IFtdO1xuICAgIHRoaXMuYXJyYXlvZkxlbmd0aCA9IFtdO1xuICAgIHRoaXMuY2hhcnREYXRhID0gW107XG4gICAgdGhpcy54YXhpc0FycmF5LmZvckVhY2goZWxlbWVudDEgPT4ge1xuICAgICAgdGhpcy55YXhpc0FycmF5ID0gW107XG4gICAgICB0aGlzLmFycmF5LmZvckVhY2goZWxlbWVudDIgPT4ge1xuICAgICAgICBpZiAodGVtcHZhbHVlIDwgZWxlbWVudDIgJiYgZWxlbWVudDIgPD0gZWxlbWVudDEpIHtcbiAgICAgICAgICB0aGlzLnlheGlzQXJyYXkucHVzaChlbGVtZW50Mik7XG4gICAgICAgIH1cbiAgICAgICAgbGVuZ3Rob2ZBcnJheSA9IHRoaXMueWF4aXNBcnJheS5sZW5ndGg7XG4gICAgICB9KTtcbiAgICAgIGlmICh0ZW1wbGVuZ3RoID4gbGVuZ3Rob2ZBcnJheSkge1xuICAgICAgICBsZW5ndGhjb3VudCA9IHRlbXBsZW5ndGg7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbGVuZ3RoY291bnQgPSBsZW5ndGhvZkFycmF5O1xuICAgICAgfVxuICAgICAgdGVtcGxlbmd0aCA9IGxlbmd0aGNvdW50O1xuICAgICAgdGVtcHZhbHVlID0gZWxlbWVudDE7XG4gICAgICB0aGlzLmxlbmd0aGFycmF5LnB1c2gobGVuZ3Rob2ZBcnJheSk7XG4gICAgfSk7XG5cbiAgICBsZXQgdmFsdWUgPSBNYXRoLmNlaWwodGVtcGxlbmd0aCk7XG4gICAgbGV0IHF1b3RpZW50ID0gdmFsdWUgLyA1O1xuICAgIHdoaWxlIChuZXd2YWx1ZSA8PSB2YWx1ZSkge1xuICAgICAgbmV3dmFsdWUgPSBuZXd2YWx1ZSArIHF1b3RpZW50O1xuICAgICAgdGhpcy55YXhpc0RhdGEucHVzaChuZXd2YWx1ZSlcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuaGlzdG9ncmFtYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuaGlzdG9ncmFtZGF0YS5wdXNoKHRoaXMuaGlzdG9ncmFtYXJyYXlbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5sZW5ndGhhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcnJheW9mTGVuZ3RoLnB1c2godGhpcy5sZW5ndGhhcnJheVtpXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcnJheW9mTGVuZ3RoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgZGF0YVtcInZhbHVlXCJdID0gdGhpcy5hcnJheW9mTGVuZ3RoW2ldO1xuICAgICAgdGhpcy5jaGFydERhdGEucHVzaChkYXRhKTtcbiAgICB9XG4gICAgdGhpcy5hcnJheSA9IFtdO1xuXG4gIH1cblxuICAvL1JFU0laRSBTVEVQIDQgU1RBUlRTXG4gIHZhbGlkYXRlcmVzaXplKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMud3QpIHtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgIH1cbiAgICB9LCAwKVxuICB9XG4gIC8vUkVTSVpFIFNURVAgNCBFTkRTXG5cbiAgcmVzaXplKCkge1xuICAgIHRoaXMuc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgdGhpcy5yZXNpemVmbGFnID0gdHJ1ZTtcbiAgICBpZiAodGhpcy53dCkge1xuICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMud3Q7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0SWQpIHtcbiAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG4gICAgdGhpcy5jZGYuZGV0ZWN0Q2hhbmdlcygpOyB0aGlzLnRyYW5zZm9ybURhdGEoKVxuICAgIHRoaXMucGxvdFhheGlzKCk7XG4gICAgdGhpcy5wbG90WWF4aXMoKTtcbiAgICB0aGlzLnRvb2x0aXBEYXRhKCk7XG4gICAgdGhpcy5kYXRhZm9yQ2hhcnQoKTtcbiAgICB0aGlzLnRyYW5zZm9ybURhdGExKHRoaXMuZmluYWxkYXRhYXJyYXkpO1xuICAgIHRoaXMucGxvdENoYXJ0KCk7XG4gIH1cblxuICBkYXRhZm9yQ2hhcnQoKSB7XG4gICAgdGhpcy5maW5hbGRhdGFhcnJheSA9IFtdID0gW107XG4gICAgbGV0IGluaXRpYWxBcnJheTogYW55W10gPSBbXTtcbiAgICBsZXQgdGVtcGFycmF5OiBhbnlbXSA9IFtdO1xuICAgIGluaXRpYWxBcnJheS5wdXNoKCdsZXZlbCcpO1xuICAgIGxldCBtYXhFbGVtZW50ID0gTWF0aC5tYXguYXBwbHkobnVsbCwgdGhpcy5hcnJheW9mTGVuZ3RoKTtcbiAgICBsZXQgbWF4bGVuZ3RoID0gbWF4RWxlbWVudDtcbiAgICBsZXQgbiA9IDE7XG4gICAgd2hpbGUgKG4gPD0gbWF4RWxlbWVudCkge1xuICAgICAgaW5pdGlhbEFycmF5LnB1c2goJycgKyBuKVxuICAgICAgbisrO1xuICAgIH1cbiAgICBpbml0aWFsQXJyYXkucHVzaCgndG9vbHRpcGRhdGEnKTtcbiAgICBsZXQgbGVuZ3RoID0gdGhpcy5hcnJheW9mTGVuZ3RoLmxlbmd0aDtcbiAgICBsZXQgbnVtID0gMTtcbiAgICBsZXQgbnVtYmVyID0gMTtcbiAgICBsZXQgaiA9IDA7XG4gICAgdGhpcy5maW5hbGRhdGFhcnJheS5wdXNoKGluaXRpYWxBcnJheSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyYXlvZkxlbmd0aC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHZhbHVlID0gdGhpcy5hcnJheW9mTGVuZ3RoW2ldO1xuICAgICAgbGV0IHRlbXB2YWx1ZSA9IHZhbHVlO1xuICAgICAgdGVtcGFycmF5ID0gW107XG4gICAgICB0ZW1wYXJyYXkucHVzaCgnJyArIGkpO1xuICAgICAgbWF4RWxlbWVudCA9IG1heGxlbmd0aDtcbiAgICAgIGlmICh2YWx1ZSA+IDApIHtcbiAgICAgICAgd2hpbGUgKHZhbHVlICE9IDApIHtcbiAgICAgICAgICB0ZW1wYXJyYXkucHVzaChudW1iZXIpO1xuICAgICAgICAgIHZhbHVlLS1cbiAgICAgICAgfVxuICAgICAgICBtYXhFbGVtZW50ID0gbWF4RWxlbWVudCAtIHRlbXB2YWx1ZTtcblxuICAgICAgICB3aGlsZSAobWF4RWxlbWVudCAhPSAwKSB7XG4gICAgICAgICAgdGVtcGFycmF5LnB1c2goMCk7XG4gICAgICAgICAgbWF4RWxlbWVudC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgd2hpbGUgKG1heEVsZW1lbnQgIT0gMCkge1xuICAgICAgICAgIHRlbXBhcnJheS5wdXNoKDApO1xuICAgICAgICAgIG1heEVsZW1lbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGVtcGFycmF5LnB1c2godGhpcy50b29sdGlwQXJyYXlbal0pXG4gICAgICB0aGlzLmZpbmFsZGF0YWFycmF5LnB1c2godGVtcGFycmF5KTtcbiAgICAgIGorKztcbiAgICB9XG4gIH1cblxuXG4gIHRvb2x0aXBEYXRhKCkge1xuICAgIGxldCBhcnJheW9mVG9vbHRpcDogYW55W10gPSBbXTtcbiAgICBsZXQgb2JqID0geyBcImxhYmVsXCI6IFwiXCIsIFwidmFsdWVcIjogXCJcIiB9O1xuICAgIHRoaXMuZGF0YWhpc3RvLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBvYmogPSB7IFwibGFiZWxcIjogXCJcIiwgXCJ2YWx1ZVwiOiBcIlwiIH07XG4gICAgICBvYmpbXCJsYWJlbFwiXSA9IGVsZW1lbnRbMF07XG4gICAgICBvYmpbXCJ2YWx1ZVwiXSA9IGVsZW1lbnRbMV07XG4gICAgICBhcnJheW9mVG9vbHRpcC5wdXNoKG9iaik7XG4gICAgfSk7XG5cbiAgICBsZXQgdmFsdWUxID0gdGhpcy54YXhpc0FycmF5WzBdO1xuXG4gICAgbGV0IHRvb2x0aXBkYXRhOiBhbnlbXSA9IFtdO1xuICAgIGZvciAobGV0IGogPSAxOyBqIDwgdGhpcy54YXhpc0FycmF5Lmxlbmd0aDsgaisrKSB7XG4gICAgICB0b29sdGlwZGF0YSA9IFtdO1xuICAgICAgbGV0IHZhbHVlMiA9IHRoaXMueGF4aXNBcnJheVtqXTtcblxuICAgICAgYXJyYXlvZlRvb2x0aXAuZm9yRWFjaChlbGVtZW50ID0+IHtcblxuICAgICAgICBpZiAodmFsdWUxIDw9IGVsZW1lbnQudmFsdWUgJiYgZWxlbWVudC52YWx1ZSA8PSB2YWx1ZTIpIHtcblxuICAgICAgICAgIGxldCB0b29sdGlwb2JqID0geyBcImxhYmVsXCI6IFwiXCIsIFwidmFsdWVcIjogXCJcIiB9XG4gICAgICAgICAgdG9vbHRpcG9ialtcImxhYmVsXCJdID0gZWxlbWVudFtcImxhYmVsXCJdO1xuICAgICAgICAgIHRvb2x0aXBvYmpbXCJ2YWx1ZVwiXSA9IGVsZW1lbnRbXCJ2YWx1ZVwiXTtcbiAgICAgICAgICB0b29sdGlwZGF0YS5wdXNoKHRvb2x0aXBvYmopO1xuXG5cbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICAgIHRoaXMudG9vbHRpcEFycmF5LnB1c2godG9vbHRpcGRhdGEpO1xuICAgICAgdmFsdWUxID0gdmFsdWUyO1xuICAgIH1cbiAgfVxuXG5cbiAgc2V0S2V5KG9iajogYW55KSB7XG5cbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFoaXN0b1swXTtcbiAgICBsZXQgbGFiZWwxID0gZGF0YVsxXTtcbiAgICBsZXQgbGFiZWwyID0gZGF0YVswXTtcblxuICAgIG9iamVjdFtsYWJlbDIgKyBcIjpcIl0gPSBvYmoubGFiZWw7XG4gICAgb2JqZWN0W2xhYmVsMSArIFwiOlwiXSA9IG9iai52YWx1ZTtcblxuICAgIHJldHVybiAodGhpcy50b29sVGlwRm9yQmFyKG9iamVjdCkpXG4gIH1cblxuICBwbG90TGluZShnLCB4LCB5LCBoZWlnaHQsIHdpZHRoKSB7XG4gICAgaWYgKHRoaXMuaFNjYWxlKSB7XG4gICAgICBnLmFwcGVuZCgnZycpXG4gICAgICAgIC5hdHRyKFwiY29sb3JcIiwgXCJsaWdodGdyZXlcIilcbiAgICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSlcbiAgICAgICAgICAudGlja1NpemUoLXdpZHRoKS50aWNrRm9ybWF0KCcnKS50aWNrcyh0aGlzLnRpY2tzY291bnQpKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==