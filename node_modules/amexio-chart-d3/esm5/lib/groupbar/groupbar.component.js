/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';
import { AmexioD3BaseChartComponent } from "../base/base.component";
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
import * as d3 from 'd3';
var GroupbarComponent = /** @class */ (function (_super) {
    tslib_1.__extends(GroupbarComponent, _super);
    function GroupbarComponent(myservice, cdf, device) {
        var _this = _super.call(this, 'multibar') || this;
        _this.myservice = myservice;
        _this.cdf = cdf;
        _this.device = device;
        _this.data = [];
        _this.legend = true;
        _this.barwidth = 0;
        _this.onLegendClick = new EventEmitter();
        _this.svgheight = 300;
        _this.showzeroflag = true;
        _this.groupbarchartArray = [];
        _this.urllegendArray = [];
        _this.defualtColors = [];
        _this.predefinedcolors = ["#3366cc", "#dc3912", "#ff9900", "#109618", "#990099", "#0099c6", "#dd4477", "#66aa00", "#b82e2e", "#316395", "#994499", "#22aa99", "#aaaa11", "#6633cc", "#e67300", "#8b0707", "#651067", "#329262", "#5574a6", "#3b3eac"];
        return _this;
    }
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.wt = this.svgwidth;
        if (this.level <= 1) {
            /** @type {?} */
            var res_1;
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((/**
                 * @param {?} response
                 * @return {?}
                 */
                function (response) {
                    res_1 = response;
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                }), (/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.data = _this.getResponseData(res_1);
                        _this.initializeData();
                        _this.plotD3Chart();
                    }), 0);
                }));
            }
            else if (this.data) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.data = _this.getResponseData(_this.data);
                    _this.initializeData();
                    _this.plotD3Chart();
                }), 0);
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    GroupbarComponent.prototype.fetchData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var requestJson;
        /** @type {?} */
        var key = this.drillabledatakey;
        /** @type {?} */
        var resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            var drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                resp = response;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
            }), (/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.data = _this.getResponseData(resp);
                    _this.drawChart();
                }), 0);
            }));
        }
    };
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.drawChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.initializeData();
            _this.plotD3Chart();
        }), 0);
    };
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    GroupbarComponent.prototype.getResponseData = /**
     * @param {?} httpResponse
     * @return {?}
     */
    function (httpResponse) {
        /** @type {?} */
        var responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            var dr = this.datareader.split('.');
            try {
                for (var dr_1 = tslib_1.__values(dr), dr_1_1 = dr_1.next(); !dr_1_1.done; dr_1_1 = dr_1.next()) {
                    var ir = dr_1_1.value;
                    responsedata = responsedata[ir];
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (dr_1_1 && !dr_1_1.done && (_a = dr_1.return)) _a.call(dr_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
        var e_1, _a;
    };
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.plotD3Chart = /**
     * @return {?}
     */
    function () {
        this.convertToJSON();
        this.plotGroupBarChart();
        this.transformData(this.data);
    };
    /**
     * @private
     * @return {?}
     */
    GroupbarComponent.prototype.plotGroupBarChart = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var tooltip = this.toolTip(d3);
        this.defualtColors = this.predefinedcolors;
        // this.svgwidth = this.chartId.nativeElement.offsetWidth;
        if (this.resizeflag == false) {
            //RESIZE STEP 1
            if (this.wt) {
                this.svgwidth = this.wt;
            }
            else if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            //RESIZE STEP 1 ENDS HERE 
        }
        /** @type {?} */
        var margin = { top: 20, right: 20, bottom: 50, left: 40 };
        /** @type {?} */
        var width = this.svgwidth - margin.left - margin.right;
        /** @type {?} */
        var height = this.svgheight - margin.top - margin.bottom;
        this.svg = d3.select("#" + this.componentId)
            .attr('viewBox', '0 0 ' + this.svgwidth + ' ' + this.svgheight)
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        /** @type {?} */
        var x0 = d3.scaleBand()
            .rangeRound([0, width])
            .padding(0.2);
        /** @type {?} */
        var x1 = d3.scaleBand().padding(0.1);
        /** @type {?} */
        var y = d3.scaleLinear()
            .rangeRound([height, 0]);
        //setting x and y domains
        this.years = this.groupbarchartArray.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.labels; }));
        /** @type {?} */
        var label = this.groupbarchartArray[0].values.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.label; }));
        x0.domain(this.years);
        x1.domain(label).rangeRound([0, x0.bandwidth()]);
        y.domain([0, d3.max(this.groupbarchartArray, (/**
             * @param {?} labels
             * @return {?}
             */
            function (labels) { return d3.max(labels.values, (/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.value; })); }))]);
        //dynamic barwidth
        if (this.barwidth > 0) {
            this.barwidth = this.barwidth;
        }
        else {
            this.barwidth = x0.bandwidth;
        }
        // add x axis to svg
        if (this.device.IsDesktop() == true) {
            if (this.svgwidth <= 400) {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x0)).
                    selectAll("text")
                    .attr("y", 0)
                    .attr("x", 9)
                    .attr("dy", ".35em")
                    .attr("transform", "rotate(60)")
                    .style("text-anchor", "start");
            }
            else {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x0));
            }
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x0)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        //add y axis to svg
        this.svg.append("g")
            .call(d3.axisLeft(y)
            .ticks(10).ticks(this.tickscount));
        this.plotLine(this.svg, y, height, width);
        // svg.select('.y').transition().duration(500).delay(1300).style('opacity', '1');
        //adding bars
        /** @type {?} */
        var slice = this.svg.selectAll(".slice")
            .data(this.groupbarchartArray)
            .enter().append("g")
            .attr("class", "g")
            .attr("transform", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            /** @type {?} */
            var flag = false;
            (d.values).forEach((/**
             * @param {?} element
             * @param {?} index
             * @return {?}
             */
            function (element, index) {
                //splice 0 
                if (element.value && (element.value < 1)) {
                    d.values.splice(0, index);
                }
            }));
            return "translate(" + x0(d.labels) + ",0)";
        }));
        slice.selectAll("rect")
            .data((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d.values; }))
            .enter().
            append("rect")
            .attr("width", x1.bandwidth)
            .attr("x", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return x1(d.label);
        }))
            .style("fill", (/**
         * @param {?} d
         * @param {?} index
         * @return {?}
         */
        function (d, index) {
            if (_this.colors.length > 0) {
                if (_this.colors[index]) {
                    return _this.colors[index];
                }
                else {
                    return _this.defualtColors[index];
                }
            }
            else {
                return _this.defualtColors[index];
            }
        }))
            .attr("y", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return y(0); }))
            .attr("height", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return height - y(0); }))
            .attr("cursor", "pointer")
            .on("mouseover", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "visible");
        }))
            .on("mousemove", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.html(_this.setKey(d))
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        })).on("mouseout", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "hidden");
        }))
            .on("click", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            _this.groupbarClick(d);
            _this.fordrillableClick(_this, d, event);
            return tooltip.style("visibility", "hidden");
        }));
        // -------------------------------------------------------
        if (this.labelflag) {
            slice.selectAll("text")
                .data((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.values; }))
                .enter().append("text")
                .attr("width", x1.bandwidth)
                .attr("x", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return x1(d.label) + x1.bandwidth() / 2;
            }))
                .attr("y", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return y(d.value); }))
                .attr("height", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return height - y(0); }))
                .style("font-weight", "bold")
                .style("font-size", "1vw")
                .attr("text-anchor", "middle")
                .attr("fill", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (_this.labelcolor && _this.labelcolor.length > 0) {
                    return _this.labelcolor;
                }
                else {
                    return "black";
                }
            }))
                .text((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                // if((d.value > 0) ) {
                // return d.value;
                // }
                if (_this.showzeroflag) {
                    return d.value;
                }
                else if (!_this.showzeroflag) {
                    if (d.value > 0) {
                        return d.value;
                    }
                }
            }))
                .attr("cursor", "pointer")
                .on("mouseover", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "visible");
            }))
                .on("mousemove", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.html(_this.setKey(d)
                //  this.toolTipContent(d)
                )
                    .style("top", (d3.event.pageY - 10) + "px")
                    .style("left", (d3.event.pageX + 10) + "px");
            })).on("mouseout", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "hidden");
            }))
                .on("click", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.groupbarClick(d);
                _this.fordrillableClick(_this, d, event);
                return tooltip.style("visibility", "hidden");
                // this.chartClick(d);
            }));
        }
        slice.selectAll("rect")
            .attr("y", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return y(d.value);
        }))
            .attr("height", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return height - y(d.value); }));
    };
    /**
     * @param {?} d
     * @return {?}
     */
    GroupbarComponent.prototype.groupbarClick = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var object = {};
        object[d.label] = d.value;
        object[this.xaxisData] = d.xaxis;
        this.chartClick(object);
    };
    //RESIZE STEP 4 STARTS
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.validateresize = 
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.wt) {
            }
            else {
                _this.resize();
            }
        }), 0);
    };
    //RESIZE STEP 4 ENDS
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.resize = 
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    function () {
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        if (this.wt) {
            this.svgwidth = this.wt;
        }
        else if (this.chartId) {
            this.svgwidth = this.chartId.nativeElement.offsetWidth;
        }
        this.cdf.detectChanges();
        this.plotGroupBarChart();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    GroupbarComponent.prototype.legendClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var obj = {};
        obj["label"] = event.label;
        /** @type {?} */
        var data = [];
        event.data.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            /** @type {?} */
            var object = {};
            object[element.label] = element.value;
            data.push(object);
        }));
        obj["data"] = data;
        this.onLegendClick.emit(obj);
    };
    //2d array to json conversion
    //2d array to json conversion
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.convertToJSON = 
    //2d array to json conversion
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var groupChartObj = { "labels": "", values: [] };
        /** @type {?} */
        var firstRowOfData = this.data[0];
        this.xaxisData = this.data[0][0];
        for (var i = 1; i < this.data.length; i++) {
            /** @type {?} */
            var multiSeriesArray = [];
            /** @type {?} */
            var valueOfJ = void 0;
            for (var j = 1; j < this.data[i].length; j++) {
                valueOfJ = this.data[i][0];
                /** @type {?} */
                var singleBarObj = {};
                singleBarObj["value"] = this.data[i][j];
                singleBarObj["label"] = firstRowOfData[j];
                singleBarObj["xaxis"] = this.data[i][0];
                multiSeriesArray.push(singleBarObj);
            }
            if (multiSeriesArray.length) {
                groupChartObj["values"] = multiSeriesArray;
                /** @type {?} */
                var newLabelsValues = valueOfJ;
                /** @type {?} */
                var newGroupDataObj = Object.assign({}, groupChartObj);
                newGroupDataObj['labels'] = newLabelsValues + '';
                this.groupbarchartArray.push(newGroupDataObj);
            }
        }
    };
    /**
     * @return {?}
     */
    GroupbarComponent.prototype.transformto2dArray = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var i = 0;
        /** @type {?} */
        var result = [];
        result.push("years");
        this.data.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        function (element, i) {
            if (i == 0) {
                element.values.forEach((/**
                 * @param {?} element2
                 * @return {?}
                 */
                function (element2) {
                    result.push(element2.label);
                }));
            }
        }));
        this.urllegendArray.push(result);
        /** @type {?} */
        var temparray = [];
        this.data.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            temparray = [];
            /** @type {?} */
            var values;
            /** @type {?} */
            var year = element.labels;
            temparray.push(year);
            element.values.forEach((/**
             * @param {?} element2
             * @return {?}
             */
            function (element2) {
                values = element2.value;
                temparray.push(values);
            }));
            _this.urllegendArray.push(temparray);
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    GroupbarComponent.prototype.transformData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.keyArray = [];
        this.legendArray = [];
        data.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        function (element, i) {
            if (i == 0) {
                element.forEach((/**
                 * @param {?} innerelement
                 * @param {?} index
                 * @return {?}
                 */
                function (innerelement, index) {
                    if (index > 0) {
                        _this.legendArray[innerelement] = { 'data': [] };
                        _this.keyArray.push(innerelement);
                    }
                }));
            }
        }));
        data.forEach((/**
         * @param {?} element
         * @param {?} index
         * @return {?}
         */
        function (element, index) {
            if (index > 0) {
                /** @type {?} */
                var obj_1 = {};
                element.forEach((/**
                 * @param {?} innerelement
                 * @param {?} innerindex
                 * @return {?}
                 */
                function (innerelement, innerindex) {
                    if (innerindex >= 0) {
                        /** @type {?} */
                        var key = _this.keyArray[innerindex - 1];
                        obj_1[key] = element[innerindex];
                        /** @type {?} */
                        var legenddata = _this.legendArray[key];
                        if (legenddata) {
                            legenddata.data.push({ 'value': element[innerindex], 'label': element[0] });
                        }
                    }
                }));
            }
        }));
        this.legends = [];
        this.keyArray.forEach((/**
         * @param {?} element
         * @param {?} index
         * @return {?}
         */
        function (element, index) {
            /** @type {?} */
            var legenddata = _this.legendArray[element];
            /** @type {?} */
            var object;
            if (_this.colors.length > 0) {
                object = { 'label': element, 'color': _this.colors[index], 'data': legenddata.data };
            }
            else {
                object = { 'label': element, 'color': _this.predefinedcolors[index], 'data': legenddata.data };
            }
            _this.legends.push(object);
        }));
    };
    /**
     * @param {?} d
     * @return {?}
     */
    GroupbarComponent.prototype.setKey = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var object = {};
        object[d.label] = d.value;
        object[this.xaxisData] = d.xaxis;
        return (this.toolTipForBar(object));
    };
    /**
     * @param {?} g
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    GroupbarComponent.prototype.plotLine = /**
     * @param {?} g
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    function (g, y, height, width) {
        if (this.hScale) {
            g.append('g')
                .attr("color", "lightgrey")
                .call(d3.axisLeft(y)
                .tickSize(-width).tickFormat('').ticks(this.tickscount));
        }
    };
    GroupbarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'amexio-d3-chart-multiseries',
                    template: "<div  #chartId *ngIf=\"drillableFlag\" (window:resize)=\"validateresize()\"> \n<table *ngIf=\"data.length > 0\"  style=\"width: 100%;\">\n    <tr *ngIf = \"title.length > 0\" >\n        <td colspan=\"2\" style=\"font-size: 18px; font-weight: bold; \"> {{title}} </td>\n    </tr>\n    <tr>\n        <td>\n            <svg [attr.height]=\"height\" [attr.width]=\"width\" [attr.id]=\"componentId\">\n            </svg>\n        </td>\n    </tr>\n    <tr *ngIf=\"legend\">\n        <td style=\"display: block; padding: 5px;\">\n            <amexio-d3-legend *ngIf=\"legend\" [horizontal]=\"true\" (onClick)=\"legendClick($event)\" [data]=\"legends\" style=\"height:100%;\"></amexio-d3-legend>\n        </td>\n    </tr>\n</table>\n<div *ngIf=\"data.length < 1\" class=\"lmask\" style=\"padding-top:50%\">\n    </div>\n</div>\n\n\n",
                    styles: [""]
                },] },
    ];
    GroupbarComponent.ctorParameters = function () { return [
        { type: CommanDataService },
        { type: ChangeDetectorRef },
        { type: DeviceQueryService }
    ]; };
    GroupbarComponent.propDecorators = {
        chartId: [{ type: ViewChild, args: ['chartId',] }],
        divid: [{ type: ViewChild, args: ['divid',] }],
        drillid: [{ type: ViewChild, args: ['drillid',] }],
        data: [{ type: Input, args: ['data',] }],
        legend: [{ type: Input }],
        barwidth: [{ type: Input }],
        onLegendClick: [{ type: Output }],
        svgwidth: [{ type: Input, args: ['width',] }],
        svgheight: [{ type: Input, args: ['height',] }],
        tickscount: [{ type: Input, args: ['yaxis-interval',] }],
        showzeroflag: [{ type: Input, args: ['show-zero-values',] }]
    };
    return GroupbarComponent;
}(AmexioD3BaseChartComponent));
export { GroupbarComponent };
if (false) {
    /** @type {?} */
    GroupbarComponent.prototype.chartId;
    /** @type {?} */
    GroupbarComponent.prototype.divid;
    /** @type {?} */
    GroupbarComponent.prototype.drillid;
    /** @type {?} */
    GroupbarComponent.prototype.data;
    /** @type {?} */
    GroupbarComponent.prototype.legend;
    /** @type {?} */
    GroupbarComponent.prototype.barwidth;
    /** @type {?} */
    GroupbarComponent.prototype.onLegendClick;
    /** @type {?} */
    GroupbarComponent.prototype.svgwidth;
    /** @type {?} */
    GroupbarComponent.prototype.svgheight;
    /** @type {?} */
    GroupbarComponent.prototype.tickscount;
    /** @type {?} */
    GroupbarComponent.prototype.showzeroflag;
    /** @type {?} */
    GroupbarComponent.prototype.groupbarchartArray;
    /** @type {?} */
    GroupbarComponent.prototype.legendArray;
    /** @type {?} */
    GroupbarComponent.prototype.xaxisData;
    /** @type {?} */
    GroupbarComponent.prototype.keyArray;
    /** @type {?} */
    GroupbarComponent.prototype.legends;
    /** @type {?} */
    GroupbarComponent.prototype.years;
    /** @type {?} */
    GroupbarComponent.prototype.urllegendArray;
    /** @type {?} */
    GroupbarComponent.prototype.svg;
    /** @type {?} */
    GroupbarComponent.prototype.wt;
    /** @type {?} */
    GroupbarComponent.prototype.defualtColors;
    /**
     * @type {?}
     * @private
     */
    GroupbarComponent.prototype.myservice;
    /**
     * @type {?}
     * @private
     */
    GroupbarComponent.prototype.cdf;
    /**
     * @type {?}
     * @private
     */
    GroupbarComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JvdXBiYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW1leGlvLWNoYXJ0LWQzLyIsInNvdXJjZXMiOlsibGliL2dyb3VwYmFyL2dyb3VwYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6SCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQTtBQUNuRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN0RSxPQUFPLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQztBQUN6QjtJQTJCdUMsNkNBQTBCO0lBdUIvRCwyQkFBb0IsU0FBNEIsRUFBVSxHQUFzQixFQUFVLE1BQTBCO1FBQXBILFlBQ0Usa0JBQU0sVUFBVSxDQUFDLFNBRWxCO1FBSG1CLGVBQVMsR0FBVCxTQUFTLENBQW1CO1FBQVUsU0FBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxZQUFNLEdBQU4sTUFBTSxDQUFvQjtRQWxCckcsVUFBSSxHQUFRLEVBQUUsQ0FBQztRQUNyQixZQUFNLEdBQVksSUFBSSxDQUFDO1FBQ3ZCLGNBQVEsR0FBVyxDQUFDLENBQUM7UUFDcEIsbUJBQWEsR0FBUSxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRXRDLGVBQVMsR0FBVyxHQUFHLENBQUM7UUFFZCxrQkFBWSxHQUFZLElBQUksQ0FBQztRQUN4RCx3QkFBa0IsR0FBVSxFQUFFLENBQUM7UUFNL0Isb0JBQWMsR0FBRyxFQUFFLENBQUM7UUFHcEIsbUJBQWEsR0FBUSxFQUFFLENBQUM7UUFHdEIsS0FBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsU0FBUyxFQUFFLFNB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Qjs7SUFrZTNCLHdCQUFDO0NBQUEsQUF6Z0JELENBMkJ1QywwQkFBMEIsR0E4ZWhFO1NBOWVZLGlCQUFpQjs7O0lBRTVCLG9DQUEwQzs7SUFDMUMsa0NBQXNDOztJQUN0QyxvQ0FBbUM7O0lBQ25DLGlDQUE4Qjs7SUFDOUIsbUNBQWdDOztJQUNoQyxxQ0FBOEI7O0lBQzlCLDBDQUF1RDs7SUFDdkQscUNBQWlDOztJQUNqQyxzQ0FBeUM7O0lBQ3pDLHVDQUE0Qzs7SUFDNUMseUNBQXdEOztJQUN4RCwrQ0FBK0I7O0lBQy9CLHdDQUFpQjs7SUFDakIsc0NBQWU7O0lBQ2YscUNBQWM7O0lBQ2Qsb0NBQWE7O0lBQ2Isa0NBQVc7O0lBQ1gsMkNBQW9COztJQUNwQixnQ0FBUzs7SUFDVCwrQkFBUTs7SUFDUiwwQ0FBd0I7Ozs7O0lBQ1osc0NBQW9DOzs7OztJQUFFLGdDQUE4Qjs7Ozs7SUFBRSxtQ0FBa0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS5jb21wb25lbnRcIjtcbmltcG9ydCB7IENvbW1hbkRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29tbWFuLmRhdGEuc2VydmljZSdcbmltcG9ydCB7IERldmljZVF1ZXJ5U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RldmljZS5xdWVyeS5zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FtZXhpby1kMy1jaGFydC1tdWx0aXNlcmllcycsXG4gIHRlbXBsYXRlOiBgPGRpdiAgI2NoYXJ0SWQgKm5nSWY9XCJkcmlsbGFibGVGbGFnXCIgKHdpbmRvdzpyZXNpemUpPVwidmFsaWRhdGVyZXNpemUoKVwiPiBcbjx0YWJsZSAqbmdJZj1cImRhdGEubGVuZ3RoID4gMFwiICBzdHlsZT1cIndpZHRoOiAxMDAlO1wiPlxuICAgIDx0ciAqbmdJZiA9IFwidGl0bGUubGVuZ3RoID4gMFwiID5cbiAgICAgICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBcIj4ge3t0aXRsZX19IDwvdGQ+XG4gICAgPC90cj5cbiAgICA8dHI+XG4gICAgICAgIDx0ZD5cbiAgICAgICAgICAgIDxzdmcgW2F0dHIuaGVpZ2h0XT1cImhlaWdodFwiIFthdHRyLndpZHRoXT1cIndpZHRoXCIgW2F0dHIuaWRdPVwiY29tcG9uZW50SWRcIj5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L3RkPlxuICAgIDwvdHI+XG4gICAgPHRyICpuZ0lmPVwibGVnZW5kXCI+XG4gICAgICAgIDx0ZCBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyBwYWRkaW5nOiA1cHg7XCI+XG4gICAgICAgICAgICA8YW1leGlvLWQzLWxlZ2VuZCAqbmdJZj1cImxlZ2VuZFwiIFtob3Jpem9udGFsXT1cInRydWVcIiAob25DbGljayk9XCJsZWdlbmRDbGljaygkZXZlbnQpXCIgW2RhdGFdPVwibGVnZW5kc1wiIHN0eWxlPVwiaGVpZ2h0OjEwMCU7XCI+PC9hbWV4aW8tZDMtbGVnZW5kPlxuICAgICAgICA8L3RkPlxuICAgIDwvdHI+XG48L3RhYmxlPlxuPGRpdiAqbmdJZj1cImRhdGEubGVuZ3RoIDwgMVwiIGNsYXNzPVwibG1hc2tcIiBzdHlsZT1cInBhZGRpbmctdG9wOjUwJVwiPlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cblxuYCxcbiAgc3R5bGVzOiBbYGBdXG59KVxuZXhwb3J0IGNsYXNzIEdyb3VwYmFyQ29tcG9uZW50IGV4dGVuZHMgQW1leGlvRDNCYXNlQ2hhcnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIEBWaWV3Q2hpbGQoJ2NoYXJ0SWQnKSBjaGFydElkOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdkaXZpZCcpIGRpdmlkOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdkcmlsbGlkJykgZHJpbGxpZDogYW55O1xuICBASW5wdXQoJ2RhdGEnKSBkYXRhOiBhbnkgPSBbXTtcbiAgQElucHV0KCkgbGVnZW5kOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgYmFyd2lkdGg6IG51bWJlciA9IDA7XG4gIEBPdXRwdXQoKSBvbkxlZ2VuZENsaWNrOiBhbnkgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQElucHV0KCd3aWR0aCcpIHN2Z3dpZHRoOiBudW1iZXI7XG4gIEBJbnB1dCgnaGVpZ2h0Jykgc3ZnaGVpZ2h0OiBudW1iZXIgPSAzMDA7XG4gIEBJbnB1dCgneWF4aXMtaW50ZXJ2YWwnKSB0aWNrc2NvdW50OiBudW1iZXI7XG4gIEBJbnB1dCgnc2hvdy16ZXJvLXZhbHVlcycpIHNob3d6ZXJvZmxhZzogYm9vbGVhbiA9IHRydWU7XG4gIGdyb3VwYmFyY2hhcnRBcnJheTogYW55W10gPSBbXTtcbiAgbGVnZW5kQXJyYXk6IGFueTtcbiAgeGF4aXNEYXRhOiBhbnk7XG4gIGtleUFycmF5OiBhbnk7XG4gIGxlZ2VuZHM6IGFueTtcbiAgeWVhcnM6IGFueTtcbiAgdXJsbGVnZW5kQXJyYXkgPSBbXTtcbiAgc3ZnOiBhbnk7XG4gIHd0OiBhbnk7XG4gIGRlZnVhbHRDb2xvcnM6IGFueSA9IFtdO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15c2VydmljZTogQ29tbWFuRGF0YVNlcnZpY2UsIHByaXZhdGUgY2RmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBkZXZpY2U6IERldmljZVF1ZXJ5U2VydmljZSkge1xuICAgIHN1cGVyKCdtdWx0aWJhcicpO1xuICAgIHRoaXMucHJlZGVmaW5lZGNvbG9ycyA9IFtcIiMzMzY2Y2NcIiwgXCIjZGMzOTEyXCIsIFwiI2ZmOTkwMFwiLCBcIiMxMDk2MThcIiwgXCIjOTkwMDk5XCIsIFwiIzAwOTljNlwiLCBcIiNkZDQ0NzdcIiwgXCIjNjZhYTAwXCIsIFwiI2I4MmUyZVwiLCBcIiMzMTYzOTVcIiwgXCIjOTk0NDk5XCIsIFwiIzIyYWE5OVwiLCBcIiNhYWFhMTFcIiwgXCIjNjYzM2NjXCIsIFwiI2U2NzMwMFwiLCBcIiM4YjA3MDdcIiwgXCIjNjUxMDY3XCIsIFwiIzMyOTI2MlwiLCBcIiM1NTc0YTZcIiwgXCIjM2IzZWFjXCJdO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy53dCA9IHRoaXMuc3Znd2lkdGg7XG4gICAgaWYgKHRoaXMubGV2ZWwgPD0gMSkge1xuICAgICAgbGV0IHJlczogYW55O1xuICAgICAgaWYgKHRoaXMuaHR0cG1ldGhvZCAmJiB0aGlzLmh0dHB1cmwpIHtcbiAgICAgICAgdGhpcy5teXNlcnZpY2UuZmV0Y2hVcmxEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kKS5zdWJzY3JpYmUoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgcmVzID0gcmVzcG9uc2U7XG5cbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZURhdGEoKTtcbiAgICAgICAgICAgIHRoaXMucGxvdEQzQ2hhcnQoKTtcbiAgICAgICAgICB9LCAwKTtcblxuICAgICAgICB9KTtcblxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEpIHtcblxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgICAgdGhpcy5pbml0aWFsaXplRGF0YSgpO1xuICAgICAgICAgIHRoaXMucGxvdEQzQ2hhcnQoKTtcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmZXRjaERhdGEoZGF0YTogYW55KSB7XG4gICAgbGV0IHJlcXVlc3RKc29uO1xuICAgIGxldCBrZXkgPSB0aGlzLmRyaWxsYWJsZWRhdGFrZXk7XG4gICAgbGV0IHJlc3A6IGFueTtcbiAgICBpZiAodGhpcy5kcmlsbGFibGVkYXRha2V5Lmxlbmd0aCkge1xuICAgICAgbGV0IGRyaWxsYWJsZWRhdGEgPSB0aGlzLmdldE11bHRpcGxlRHJpbGxibGVLZXlEYXRhKGRhdGEsIGtleSk7XG4gICAgICByZXF1ZXN0SnNvbiA9IGRyaWxsYWJsZWRhdGE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVxdWVzdEpzb24gPSBkYXRhO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICB0aGlzLm15c2VydmljZS5wb3N0ZmV0Y2hEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kLCByZXF1ZXN0SnNvbikuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwID0gcmVzcG9uc2U7XG4gICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzcCk7XG4gICAgICAgICAgdGhpcy5kcmF3Q2hhcnQoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfVxuXG4gIGRyYXdDaGFydCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcblxuICAgICAgdGhpcy5pbml0aWFsaXplRGF0YSgpO1xuICAgICAgdGhpcy5wbG90RDNDaGFydCgpO1xuXG4gICAgfSwgMCk7XG5cbiAgfVxuXG4gIGdldFJlc3BvbnNlRGF0YShodHRwUmVzcG9uc2U6IGFueSkge1xuICAgIGxldCByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgaWYgKHRoaXMuZGF0YXJlYWRlciAhPSBudWxsKSB7XG4gICAgICBjb25zdCBkciA9IHRoaXMuZGF0YXJlYWRlci5zcGxpdCgnLicpO1xuICAgICAgZm9yIChjb25zdCBpciBvZiBkcikge1xuICAgICAgICByZXNwb25zZWRhdGEgPSByZXNwb25zZWRhdGFbaXJdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZWRhdGE7XG4gIH1cblxuICBwbG90RDNDaGFydCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnZlcnRUb0pTT04oKTtcbiAgICB0aGlzLnBsb3RHcm91cEJhckNoYXJ0KCk7XG4gICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMuZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHBsb3RHcm91cEJhckNoYXJ0KCk6IHZvaWQge1xuICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnRvb2xUaXAoZDMpO1xuICAgIHRoaXMuZGVmdWFsdENvbG9ycyA9IHRoaXMucHJlZGVmaW5lZGNvbG9ycztcbiAgICAvLyB0aGlzLnN2Z3dpZHRoID0gdGhpcy5jaGFydElkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgaWYgKHRoaXMucmVzaXplZmxhZyA9PSBmYWxzZSkge1xuICAgICAgLy9SRVNJWkUgU1RFUCAxXG4gICAgICBpZiAodGhpcy53dCkge1xuICAgICAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy53dDtcblxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0SWQpIHtcbiAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuXG4gICAgICB9XG4gICAgICAvL1JFU0laRSBTVEVQIDEgRU5EUyBIRVJFIFxuICAgIH1cbiAgICBjb25zdCBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiA1MCwgbGVmdDogNDAgfTtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuc3Znd2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnN2Z2hlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgdGhpcy5zdmcgPSBkMy5zZWxlY3QoXCIjXCIgKyB0aGlzLmNvbXBvbmVudElkKVxuICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB0aGlzLnN2Z3dpZHRoICsgJyAnICsgdGhpcy5zdmdoZWlnaHQpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG5cbiAgICBjb25zdCB4MCA9IGQzLnNjYWxlQmFuZCgpXG4gICAgICAucmFuZ2VSb3VuZChbMCwgd2lkdGhdKVxuICAgICAgLnBhZGRpbmcoMC4yKTtcblxuICAgIGNvbnN0IHgxID0gZDMuc2NhbGVCYW5kKCkucGFkZGluZygwLjEpO1xuXG4gICAgY29uc3QgeSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgIC5yYW5nZVJvdW5kKFtoZWlnaHQsIDBdKTtcblxuICAgIC8vc2V0dGluZyB4IGFuZCB5IGRvbWFpbnNcbiAgICB0aGlzLnllYXJzID0gdGhpcy5ncm91cGJhcmNoYXJ0QXJyYXkubWFwKChkKSA9PiB7IHJldHVybiBkLmxhYmVsczsgfSk7XG4gICAgbGV0IGxhYmVsID0gdGhpcy5ncm91cGJhcmNoYXJ0QXJyYXlbMF0udmFsdWVzLm1hcCgoZCkgPT4geyByZXR1cm4gZC5sYWJlbDsgfSk7XG5cbiAgICB4MC5kb21haW4odGhpcy55ZWFycyk7XG4gICAgeDEuZG9tYWluKGxhYmVsKS5yYW5nZVJvdW5kKFswLCB4MC5iYW5kd2lkdGgoKV0pO1xuICAgIHkuZG9tYWluKFswLCBkMy5tYXgodGhpcy5ncm91cGJhcmNoYXJ0QXJyYXksIChsYWJlbHMpID0+IHsgcmV0dXJuIGQzLm1heChsYWJlbHMudmFsdWVzLCAoZCkgPT4geyByZXR1cm4gZC52YWx1ZTsgfSk7IH0pXSk7XG5cbiAgICAvL2R5bmFtaWMgYmFyd2lkdGhcbiAgICBpZiAodGhpcy5iYXJ3aWR0aCA+IDApIHtcbiAgICAgIHRoaXMuYmFyd2lkdGggPSB0aGlzLmJhcndpZHRoO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuYmFyd2lkdGggPSB4MC5iYW5kd2lkdGg7XG4gICAgfVxuXG4gICAgLy8gYWRkIHggYXhpcyB0byBzdmdcblxuXG5cbiAgICBpZiAodGhpcy5kZXZpY2UuSXNEZXNrdG9wKCkgPT0gdHJ1ZSkge1xuICAgICAgaWYgKHRoaXMuc3Znd2lkdGggPD0gNDAwKSB7XG4gICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4MCkpLlxuICAgICAgICAgIHNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAuYXR0cihcInlcIiwgMClcbiAgICAgICAgICAuYXR0cihcInhcIiwgOSlcbiAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSg2MClcIilcbiAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgwKSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4MCkpLlxuICAgICAgICBzZWxlY3RBbGwoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieVwiLCAwKVxuICAgICAgICAuYXR0cihcInhcIiwgOSlcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDYwKVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpO1xuXG4gICAgfVxuXG5cblxuICAgIC8vYWRkIHkgYXhpcyB0byBzdmdcbiAgICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAuY2FsbChkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoMTApLnRpY2tzKHRoaXMudGlja3Njb3VudCkpXG5cbiAgICB0aGlzLnBsb3RMaW5lKHRoaXMuc3ZnLCB5LCBoZWlnaHQsIHdpZHRoKTtcblxuICAgIC8vIHN2Zy5zZWxlY3QoJy55JykudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuZGVsYXkoMTMwMCkuc3R5bGUoJ29wYWNpdHknLCAnMScpO1xuICAgIC8vYWRkaW5nIGJhcnNcbiBcbiAgICBsZXQgc2xpY2UgPSB0aGlzLnN2Zy5zZWxlY3RBbGwoXCIuc2xpY2VcIilcbiAgICAgIC5kYXRhKHRoaXMuZ3JvdXBiYXJjaGFydEFycmF5KVxuICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIChkKSA9PiB7IFxuICAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTtcbiAgICAgICAgKGQudmFsdWVzKS5mb3JFYWNoKChlbGVtZW50LGluZGV4KSA9PiB7XG4gICAgICAgICAgLy9zcGxpY2UgMCBcbiAgICAgICAgICBpZihlbGVtZW50LnZhbHVlICYmIChlbGVtZW50LnZhbHVlIDwgMSkpIHtcbiAgICAgICAgICBkLnZhbHVlcy5zcGxpY2UoMCxpbmRleCk7XG4gICAgICAgICAgfSBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgwKGQubGFiZWxzKSArIFwiLDApXCI7IH0pO1xuXG4gICAgIHNsaWNlLnNlbGVjdEFsbChcInJlY3RcIilcbiAgICAgIC5kYXRhKChkKSA9PiB7IHJldHVybiBkLnZhbHVlczsgfSlcbiAgICAgIC5lbnRlcigpLlxuICAgICAgYXBwZW5kKFwicmVjdFwiKVxuICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB4MS5iYW5kd2lkdGhcbiAgICApXG4gICAgICAuYXR0cihcInhcIiwgKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIHgxKGQubGFiZWwpXG4gICAgICB9KVxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCAoZCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5jb2xvcnNbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xvcnNbaW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZnVhbHRDb2xvcnNbaW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kZWZ1YWx0Q29sb3JzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgIH0pXG4gICAgICAuYXR0cihcInlcIiwgKGQpID0+IHsgcmV0dXJuIHkoMCk7IH0pXG4gICAgICAuYXR0cihcImhlaWdodFwiLCAoZCkgPT4geyByZXR1cm4gaGVpZ2h0IC0geSgwKTsgfSlcbiAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIChkKSA9PiB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG4gICAgICB9KVxuICAgICAgLm9uKFwibW91c2Vtb3ZlXCIsIChkKSA9PiB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLmh0bWwoXG4gICAgICAgICAgdGhpcy5zZXRLZXkoZCkpXG4gICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArIFwicHhcIilcbiAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkMy5ldmVudC5wYWdlWCArIDEwKSArIFwicHhcIik7XG4gICAgICB9KS5vbihcIm1vdXNlb3V0XCIsIChkKSA9PiB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJjbGlja1wiLCAoZCkgPT4ge1xuICAgICAgICB0aGlzLmdyb3VwYmFyQ2xpY2soZCk7XG4gICAgICAgIHRoaXMuZm9yZHJpbGxhYmxlQ2xpY2sodGhpcywgZCwgZXZlbnQpO1xuICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgfSlcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBpZiAodGhpcy5sYWJlbGZsYWcpIHtcbiAgICAgIHNsaWNlLnNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgLmRhdGEoKGQpID0+IHsgcmV0dXJuIGQudmFsdWVzOyB9KVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgeDEuYmFuZHdpZHRoKVxuICAgICAgICAuYXR0cihcInhcIiwgKGQpID0+IHtcbiAgICAgICAgICByZXR1cm4geDEoZC5sYWJlbCkgKyB4MS5iYW5kd2lkdGgoKSAvIDJcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJ5XCIsIChkKSA9PiB7IHJldHVybiB5KGQudmFsdWUpOyB9KVxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCAoZCkgPT4geyByZXR1cm4gaGVpZ2h0IC0geSgwKTsgfSlcbiAgICAgICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIiwgXCJib2xkXCIpXG4gICAgICAgIC5zdHlsZShcImZvbnQtc2l6ZVwiLCBcIjF2d1wiKVxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCAoZCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmxhYmVsY29sb3IgJiYgdGhpcy5sYWJlbGNvbG9yLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsY29sb3I7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGV4dCgoZCkgPT4ge1xuICAgICAgICAgIC8vIGlmKChkLnZhbHVlID4gMCkgKSB7XG4gICAgICAgICAgLy8gcmV0dXJuIGQudmFsdWU7XG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGlmKHRoaXMuc2hvd3plcm9mbGFnKSB7XG4gICAgICAgICAgcmV0dXJuIGQudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYoIXRoaXMuc2hvd3plcm9mbGFnKSB7XG4gICAgICAgICAgICBpZihkLnZhbHVlID4gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgKGQpID0+IHtcbiAgICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xuICAgICAgICB9KVxuICAgICAgICAub24oXCJtb3VzZW1vdmVcIiwgKGQpID0+IHtcbiAgICAgICAgICByZXR1cm4gdG9vbHRpcC5odG1sKFxuICAgICAgICAgICAgdGhpcy5zZXRLZXkoZClcbiAgICAgICAgICAgIC8vICB0aGlzLnRvb2xUaXBDb250ZW50KGQpXG4gICAgICAgICAgKVxuICAgICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArIFwicHhcIilcbiAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgXCJweFwiKTtcbiAgICAgICAgfSkub24oXCJtb3VzZW91dFwiLCAoZCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwiY2xpY2tcIiwgKGQpID0+IHtcbiAgICAgICAgICB0aGlzLmdyb3VwYmFyQ2xpY2soZCk7XG4gICAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgIC8vIHRoaXMuY2hhcnRDbGljayhkKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgc2xpY2Uuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgICAgLmF0dHIoXCJ5XCIsIChkKSA9PiB7XG4gICAgICAgIHJldHVybiB5KGQudmFsdWUpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIChkKSA9PiB7IHJldHVybiBoZWlnaHQgLSB5KGQudmFsdWUpOyB9KTtcbiAgfVxuXG4gIGdyb3VwYmFyQ2xpY2soZDogYW55KSB7XG4gICAgbGV0IG9iamVjdCA9IHt9O1xuICAgIG9iamVjdFtkLmxhYmVsXSA9IGQudmFsdWU7XG4gICAgb2JqZWN0W3RoaXMueGF4aXNEYXRhXSA9IGQueGF4aXM7XG4gICAgdGhpcy5jaGFydENsaWNrKG9iamVjdCk7XG4gIH1cblxuICAvL1JFU0laRSBTVEVQIDQgU1RBUlRTXG4gIHZhbGlkYXRlcmVzaXplKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMud3QpIHtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgIH1cbiAgICB9LCAwKVxuICB9XG4gIC8vUkVTSVpFIFNURVAgNCBFTkRTXG5cbiAgcmVzaXplKCkge1xuICAgIHRoaXMuc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgdGhpcy5yZXNpemVmbGFnID0gdHJ1ZTtcbiAgICBpZiAodGhpcy53dCkge1xuICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMud3Q7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0SWQpIHtcbiAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG4gICAgdGhpcy5jZGYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHRoaXMucGxvdEdyb3VwQmFyQ2hhcnQoKTtcbiAgfVxuXG4gIGxlZ2VuZENsaWNrKGV2ZW50OiBhbnkpIHtcbiAgICBsZXQgb2JqID0ge307XG4gICAgb2JqW1wibGFiZWxcIl0gPSBldmVudC5sYWJlbDtcbiAgICBsZXQgZGF0YSA9IFtdO1xuICAgIGV2ZW50LmRhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgIG9iamVjdFtlbGVtZW50LmxhYmVsXSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICBkYXRhLnB1c2gob2JqZWN0KTtcbiAgICB9KTtcbiAgICBvYmpbXCJkYXRhXCJdID0gZGF0YTtcbiAgICB0aGlzLm9uTGVnZW5kQ2xpY2suZW1pdChvYmopOyBcbiAgfVxuXG4gIC8vMmQgYXJyYXkgdG8ganNvbiBjb252ZXJzaW9uXG4gIGNvbnZlcnRUb0pTT04oKSB7XG4gICAgbGV0IGdyb3VwQ2hhcnRPYmogPSB7IFwibGFiZWxzXCI6IFwiXCIsIHZhbHVlczogW10gfTtcbiAgICBsZXQgZmlyc3RSb3dPZkRhdGEgPSB0aGlzLmRhdGFbMF07XG4gICAgdGhpcy54YXhpc0RhdGEgPSB0aGlzLmRhdGFbMF1bMF07XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IG11bHRpU2VyaWVzQXJyYXkgPSBbXTtcbiAgICAgIGxldCB2YWx1ZU9mSjogYW55O1xuXG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8IHRoaXMuZGF0YVtpXS5sZW5ndGg7IGorKykge1xuXG4gICAgICAgIHZhbHVlT2ZKID0gdGhpcy5kYXRhW2ldWzBdO1xuICAgICAgICBsZXQgc2luZ2xlQmFyT2JqID0ge307XG4gICAgICAgIHNpbmdsZUJhck9ialtcInZhbHVlXCJdID0gdGhpcy5kYXRhW2ldW2pdO1xuICAgICAgICBzaW5nbGVCYXJPYmpbXCJsYWJlbFwiXSA9IGZpcnN0Um93T2ZEYXRhW2pdO1xuICAgICAgICBzaW5nbGVCYXJPYmpbXCJ4YXhpc1wiXSA9IHRoaXMuZGF0YVtpXVswXTtcbiAgICAgICAgbXVsdGlTZXJpZXNBcnJheS5wdXNoKHNpbmdsZUJhck9iaik7XG4gICAgICB9XG4gICAgICBpZiAobXVsdGlTZXJpZXNBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgZ3JvdXBDaGFydE9ialtcInZhbHVlc1wiXSA9IG11bHRpU2VyaWVzQXJyYXk7XG4gICAgICAgIGxldCBuZXdMYWJlbHNWYWx1ZXM6IGFueSA9IHZhbHVlT2ZKO1xuICAgICAgICBsZXQgbmV3R3JvdXBEYXRhT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgZ3JvdXBDaGFydE9iaik7XG4gICAgICAgIG5ld0dyb3VwRGF0YU9ialsnbGFiZWxzJ10gPSBuZXdMYWJlbHNWYWx1ZXMgKyAnJztcbiAgICAgICAgdGhpcy5ncm91cGJhcmNoYXJ0QXJyYXkucHVzaChuZXdHcm91cERhdGFPYmopO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cblxuICB0cmFuc2Zvcm10bzJkQXJyYXkoKSB7XG4gICAgbGV0IGkgPSAwXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIHJlc3VsdC5wdXNoKFwieWVhcnNcIik7XG4gICAgdGhpcy5kYXRhLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgZWxlbWVudC52YWx1ZXMuZm9yRWFjaChlbGVtZW50MiA9PiB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goZWxlbWVudDIubGFiZWwpO1xuXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgdGhpcy51cmxsZWdlbmRBcnJheS5wdXNoKHJlc3VsdCk7XG5cbiAgICBsZXQgdGVtcGFycmF5ID0gW107XG4gICAgdGhpcy5kYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICB0ZW1wYXJyYXkgPSBbXTtcbiAgICAgIGxldCB2YWx1ZXM6IGFueTtcbiAgICAgIGxldCB5ZWFyID0gZWxlbWVudC5sYWJlbHM7XG4gICAgICB0ZW1wYXJyYXkucHVzaCh5ZWFyKTtcbiAgICAgIGVsZW1lbnQudmFsdWVzLmZvckVhY2goZWxlbWVudDIgPT4ge1xuICAgICAgICB2YWx1ZXMgPSBlbGVtZW50Mi52YWx1ZTtcbiAgICAgICAgdGVtcGFycmF5LnB1c2godmFsdWVzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51cmxsZWdlbmRBcnJheS5wdXNoKHRlbXBhcnJheSk7XG4gICAgfSlcbiAgfVxuXG4gIHRyYW5zZm9ybURhdGEoZGF0YTogYW55KSB7XG4gICAgdGhpcy5rZXlBcnJheSA9IFtdO1xuICAgIHRoaXMubGVnZW5kQXJyYXkgPSBbXTtcbiAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgZWxlbWVudC5mb3JFYWNoKChpbm5lcmVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5sZWdlbmRBcnJheVtpbm5lcmVsZW1lbnRdID0geyAnZGF0YSc6IFtdIH07XG4gICAgICAgICAgICB0aGlzLmtleUFycmF5LnB1c2goaW5uZXJlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgbGV0IG9iajogYW55ID0ge307XG4gICAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaW5uZXJlbGVtZW50LCBpbm5lcmluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGlubmVyaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlBcnJheVtpbm5lcmluZGV4IC0gMV07XG4gICAgICAgICAgICBvYmpba2V5XSA9IGVsZW1lbnRbaW5uZXJpbmRleF07XG4gICAgICAgICAgICBjb25zdCBsZWdlbmRkYXRhID0gdGhpcy5sZWdlbmRBcnJheVtrZXldO1xuICAgICAgICAgICAgaWYgKGxlZ2VuZGRhdGEpIHtcbiAgICAgICAgICAgICAgbGVnZW5kZGF0YS5kYXRhLnB1c2goeyAndmFsdWUnOiBlbGVtZW50W2lubmVyaW5kZXhdLCAnbGFiZWwnOiBlbGVtZW50WzBdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMubGVnZW5kcyA9IFtdO1xuICAgIHRoaXMua2V5QXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGxlZ2VuZGRhdGEgPSB0aGlzLmxlZ2VuZEFycmF5W2VsZW1lbnRdO1xuICAgICAgbGV0IG9iamVjdDtcbiAgICAgIGlmICh0aGlzLmNvbG9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9iamVjdCA9IHsgJ2xhYmVsJzogZWxlbWVudCwgJ2NvbG9yJzogdGhpcy5jb2xvcnNbaW5kZXhdLCAnZGF0YSc6IGxlZ2VuZGRhdGEuZGF0YSB9O1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICBvYmplY3QgPSB7ICdsYWJlbCc6IGVsZW1lbnQsICdjb2xvcic6IHRoaXMucHJlZGVmaW5lZGNvbG9yc1tpbmRleF0sICdkYXRhJzogbGVnZW5kZGF0YS5kYXRhIH07XG4gICAgICAgfVxuICAgICAgdGhpcy5sZWdlbmRzLnB1c2gob2JqZWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEtleShkOiBhbnkpIHtcbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgb2JqZWN0W2QubGFiZWxdID0gZC52YWx1ZTtcbiAgICBvYmplY3RbdGhpcy54YXhpc0RhdGFdID0gZC54YXhpcztcbiAgICByZXR1cm4gKHRoaXMudG9vbFRpcEZvckJhcihvYmplY3QpKTtcbiAgfVxuXG4gIHBsb3RMaW5lKGcsIHksIGhlaWdodCwgd2lkdGgpIHtcbiAgICBpZiAodGhpcy5oU2NhbGUpIHtcbiAgICAgIGcuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoXCJjb2xvclwiLCBcImxpZ2h0Z3JleVwiKVxuICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5KVxuICAgICAgICAgIC50aWNrU2l6ZSgtd2lkdGgpLnRpY2tGb3JtYXQoJycpLnRpY2tzKHRoaXMudGlja3Njb3VudCkpO1xuICAgIH1cbiAgfVxuXG59XG4iXX0=