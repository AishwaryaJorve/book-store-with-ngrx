!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("d3"),require("@angular/forms")):"function"==typeof define&&define.amd?define("amexio-chart-d3",["exports","@angular/core","@angular/common/http","@angular/common","d3","@angular/forms"],e):e(t["amexio-chart-d3"]={},t.ng.core,t.ng.common.http,t.ng.common,null,t.ng.forms)}(this,function(t,n,i,a,w,e){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)};function o(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}function C(t){var e="function"==typeof Symbol&&t[Symbol.iterator],a=0;return e?e.call(t):{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}}}function D(t,e){var a="function"==typeof Symbol&&t[Symbol.iterator];if(!a)return t;var r,i,n=a.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=n.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(a=n["return"])&&a.call(n)}finally{if(i)throw i.error}}return o}var s=function(){function t(t){this.onLegendClick=new n.EventEmitter,this.onChartClick=new n.EventEmitter,this.onLineClick=new n.EventEmitter,this.drillableEvent=new n.EventEmitter,this.data=[],this.legend=!0,this.height="300",this.width="300",this.title="",this.labelcolor="black",this.labelflag=!1,this.level=0,this.drillabledatakey=[],this.hScale=!0,this.vScale=!1,this.resizeflag=!1,this.drillableFlag=!0,this.possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcddefghijklmonpqrstuvwxyz",this.colorIndex=0,this.colors=[],this.charttype=t,this.predefinedcolors=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],this.componentId=this.charttype+"-"+this.generateId()}return t.prototype.initializeData=function(){var e=this;this.data.forEach(function(t){t.color=e.getColor(t)})},t.prototype.getMultipleDrillbleKeyData=function(t,e){var a,r,i={};if(t){for(var n=0;n<e.length;n++){var o=e[n];try{for(var s=C(Object.entries(t)),l=s.next();!l.done;l=s.next()){var h=D(l.value,2),c=h[0],d=h[1];c==o&&(i[c]=d)}}catch(u){a={error:u}}finally{try{l&&!l.done&&(r=s["return"])&&r.call(s)}finally{if(a)throw a.error}}}return i}},t.prototype.generateId=function(){for(var t="",e=0;e<5;e++)t+=this.possible.charAt(Math.floor(Math.random()*this.possible.length));return t=t+"-"+(new Date).getTime()},t.prototype.getColor=function(t){if(t.color)return t.color;if(this.colors.length>this.colorIndex){var e=this.colors[this.colorIndex];return this.colorIndex++,e}if(0<this.colors.length&&this.colors.length<=this.colorIndex)return this.colorIndex=0,e=this.colors[this.colorIndex];e=this.predefinedcolors[this.colorIndex];return this.colorIndex++,e},t.prototype.legendClick=function(t){this.onLegendClick.emit(t)},t.prototype.chartClick=function(t){this.onChartClick.emit(t)},t.prototype.comboLineClick=function(t){this.onLineClick.emit(t)},t.prototype.fordrillableClick=function(t,e,a){this.drillableEvent.emit({ref:t,node:e,event:a})},t.prototype.toolTip=function(t){return t.select("body").append("div").attr("id","tooltipid").attr("class","amexiod3tooltip").style("position","absolute").style("z-index","10").style("fill","black").style("visibility","hidden")},t.prototype.toolTipContent=function(t){var e="<table>";for(var a in t){if(t.hasOwnProperty(a))e+="<tr>",e+="<td>",e+=t[a],e+="</td>",e+="</tr>"}return e+="</table>"},t.prototype.toolTipWithLegendandAxis=function(t,e,a){var r="<div>";return r=(r=(r=r+"<b>"+e+"</b>, ")+t+"</b> ")+"<b>"+a+"</b> ",r+="</div>"},t.prototype.toolTipForBar=function(t){var e,a,r="<div>";try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];r=(r+="<div>")+"<span style =float:left ><b>"+s+" </b>"+l+"</br></span>",r+="</div>"}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}return r},t.propDecorators={onLegendClick:[{type:n.Output}],onChartClick:[{type:n.Output}],onLineClick:[{type:n.Output}],drillableEvent:[{type:n.Output}],data:[{type:n.Input,args:["data"]}],httpurl:[{type:n.Input,args:["http-url"]}],httpmethod:[{type:n.Input,args:["http-method"]}],legend:[{type:n.Input,args:["legend"]}],colors:[{type:n.Input,args:["color"]}],height:[{type:n.Input,args:["height"]}],width:[{type:n.Input,args:["width"]}],title:[{type:n.Input,args:["title"]}],labelcolor:[{type:n.Input,args:["label-color"]}],labelflag:[{type:n.Input,args:["label"]}],datareader:[{type:n.Input,args:["data-reader"]}],level:[{type:n.Input,args:["level"]}],target:[{type:n.Input,args:["target"]}],drillabledatakey:[{type:n.Input,args:["drillable-data"]}],hScale:[{type:n.Input,args:["horizontal-scale"]}],vScale:[{type:n.Input,args:["vertical-scale"]}]},t}(),l=function(){function t(t){this.http=t}return t.prototype.fetchUrlData=function(t,e){var a=(new i.HttpHeaders).append("Content-Type","application/json;charset=UTF-8");return"post"===e?this.http.post(t,{},{headers:a}):"get"===e?this.http.get(t,{headers:a}):void 0},t.prototype.postfetchData=function(t,e,a){var r=(new i.HttpHeaders).append("Content-Type","application/json;charset=UTF-8");return"post"===e?this.http.post(t,a,{headers:r}):"get"===e?this.http.get(t,{headers:r}):void 0},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:i.HttpClient}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(i.HttpClient))},token:t,providedIn:"root"}),t}(),h=function(){function t(t){this.platformId=t,this.rules={print:"print",screen:"screen",phone:"(max-width: 767px)",tablet:"(min-width: 768px) and (max-width: 1024px)",desktop:"(min-width: 1025px)",portrait:"(orientation: portrait)",landscape:"(orientation: landscape)",retina:"(-webkit-min-device-pixel-ratio: 2) and (min-resolution: 192dpi)"},this.Check=function(t){if(a.isPlatformBrowser(this.platformId)){if(!t)return;return window.matchMedia(t).matches}},this.IsTablet=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.tablet).matches:null},this.IsDesktop=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.desktop).matches:null},this.IsPortrait=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.portrait).matches:null},this.IsLandscape=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.landscape).matches:null},this.IsRetina=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.retina).matches:null},this.browserWindow=function(){return window}}return t.prototype.IsPhone=function(){return a.isPlatformBrowser(this.platformId)?window.matchMedia(this.rules.phone).matches:null},t.prototype.OnPhone=function(t){if("function"==typeof t&&a.isPlatformBrowser(this.platformId)){var e=window.matchMedia(this.rules.phone);this.mqlMethod(t,e)}},t.prototype.OnTablet=function(t){if("function"==typeof t&&a.isPlatformBrowser(this.platformId)){var e=window.matchMedia(this.rules.tablet);this.mqlMethod(t,e)}},t.prototype.OnDesktop=function(t){if("function"==typeof t&&a.isPlatformBrowser(this.platformId)){var e=window.matchMedia(this.rules.desktop);this.mqlMethod(t,e)}},t.prototype.OnPortrait=function(t){if("function"==typeof t&&a.isPlatformBrowser(this.platformId)){var e=window.matchMedia(this.rules.portrait);this.mqlMethod(t,e)}},t.prototype.OnLandscape=function(t){if("function"==typeof t&&a.isPlatformBrowser(this.platformId)){var e=window.matchMedia(this.rules.landscape);this.mqlMethod(t,e)}},t.prototype.mqlMethod=function(e,a){a.addListener(function(t){t.matches&&e(a)})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]}]},t}(),c=function(i){function t(t,e,a){var r=i.call(this,"DONUTCHART")||this;return r.myservice=t,r.cdf=e,r.device=a,r.pie=!1,r.svgwidth=300,r.svgheight=300,r.desktoplegend=!1,r.mobilelegend=!1,r.keyArray=[],r.transformeddata=[],r.legendArray=[],r}return o(t,i),t.prototype.ngOnInit=function(){var e,t=this;this.level<=1?this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t},function(t){},function(){setTimeout(function(){t.data=t.getResponseData(e),t.drawChart(),t.transformData(t.data),t.initializeData(),t.plotD3Chart()},0)}):this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.transformData(t.data),t.initializeData(),t.plotD3Chart()},0):this.fetchData(this.drillData)},t.prototype.fetchData=function(t){var e,a,r=this,i=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,i):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a=t,r.response=a},function(t){},function(){setTimeout(function(){r.data=r.getResponseData(a),r.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.drillableFlag=!0,t.initializeData(),t.plotD3Chart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotD3Chart=function(){var e=this;this.formLegendData();var t,a=0;t=this.svgwidth/2,a=this.svgwidth/4,this.pie&&(a=0);var r=this.toolTip(w),i=w.arc().outerRadius(t).innerRadius(a),n=w.pie().value(function(t){return t[Object.keys(t)[1]]});this.svg=w.select("#"+this.componentId).append("g").attr("transform","translate("+this.svgwidth/2+","+this.svgheight/2+")").selectAll("path").data(n(this.data)).enter(),1==this.device.IsDesktop()&&(this.desktoplegend=!0,this.mobilelegend=!1);this.svg.append("path").attr("d",i).attr("fill",function(t,e){return t.data.color?t.data.color:"black"}).attr("cursor","pointer").on("mouseover",function(t){return r.style("visibility","visible")}).on("mousemove",function(t){return r.html(e.formTooltipData(t.data)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return r.style("visibility","hidden")}).on("click",function(t){return e.DonutChartClick(t.data),e.fordrillableClick(e,t.data,event),r.style("visibility","hidden")});if(this.labelflag)this.svg.append("text").transition().duration(200).attr("transform",function(t){return"translate("+i.centroid(t)+")"}).attr("text-anchor","middle").text(function(t){return t.data[Object.keys(t.data)[1]]}).style("fill",function(t){return e.labelcolor&&0<e.labelcolor.length?e.labelcolor:"black"}).style("font-size","12px")},t.prototype.formLegendData=function(){var a=this;this.legendArray=[],this.data.forEach(function(t){var e={};e.label=t[Object.keys(t)[0]],e.value=t[Object.keys(t)[1]],e.color=t.color,a.legendArray.push(e)})},t.prototype.onDonutLegendClick=function(t){var e={};e[this.keyArray[0]]=t.label,e[this.keyArray[1]]=t.value,this.legendClick(e)},t.prototype.transformData=function(t){var r=this;this.keyArray=t[0],t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}}),this.data=this.transformeddata},t.prototype.formTooltipData=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&"textcolor"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}return this.toolTipForBar(r)},t.prototype.DonutChartClick=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}this.chartClick(r)},t.prototype.resize=function(t){this.desktoplegend=!1,this.mobilelegend=!0,this.plotD3Chart()},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-donut",template:'<div *ngIf="drillableFlag" #chartId (window:resize)="resize($event)">\n    <div *ngIf="data.length > 0">\n\n  \n    <div colspan="2" style="font-size: 18px; font-weight: bold; ">\n        {{title}}\n    </div>\n    <div [ngClass]="\'donutcss\'">\n        <svg preserveAspectRatio="xMinYMin meet" viewBox="0 0 300 300" [attr.height]="height" [attr.width]="width" [attr.id]="componentId">\n        </svg>\n        <div>\n\n            <div style="display: block; padding: 1%;">\n                <div *ngIf="desktoplegend">\n                    <amexio-d3-legend *ngIf="legend" (onClick)="onDonutLegendClick($event)" [data]="legendArray" style="height:100%;"></amexio-d3-legend>\n                </div>\n                <div *ngIf="mobilelegend">\n                    <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onDonutLegendClick($event)" [data]="legendArray" style="height:100%;"></amexio-d3-legend>\n                </div>\n            </div>\n        </div>\n        \x3c!--  --\x3e\n        <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n            </div>\n\n        </div>',styles:[".donutcss{display:flex;flex-direction:row}@media screen and (max-width:1024px){.donutcss{display:flex;flex-direction:column}}"]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={pie:[{type:n.Input,args:["pie"]}],svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],drillid:[{type:n.ViewChild,args:["drillid"]}],drillData:[{type:n.Input}]},t}(s),d=function(){function t(){this.data=[],this.onLegendClick=new n.EventEmitter,this.onChartClick=new n.EventEmitter,this.drillableEvent=new n.EventEmitter,this.legend=!0,this.colors=[],this.width="300",this.height="300",this.title="",this.level=0,this.labelcolor="black",this.labelflag=!1,this.drillableFlag=!0}return t.prototype.ngOnInit=function(){},t.prototype.legendClick=function(t){this.onLegendClick.emit(t)},t.prototype.chartClick=function(t){this.onChartClick.emit(t)},t.prototype.fordrillableClick=function(t){this.drillableEvent.emit(t)},t.prototype.fetchData=function(t){this.drillData=t},t.prototype.drawChart=function(){this.donutref.drillableFlag=!0,this.donutref.drawChart()},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-pie",template:'<div   *ngIf="drillableFlag">\n<amexio-d3-chart-donut #id (onLegendClick)="legendClick($event)" \n                       (onChartClick)="chartClick($event)" \n                       (drillableEvent)=" fordrillableClick($event)"\n                        [height]="height"\n                        [width]="width"\n                        [title]="title"\n                        [data] = "data"\n                        [pie]  = "true"\n                        [color]="colors"\n                        [http-url]="httpurl"\n                        [http-method]="httpmethod"\n                        [data-reader]="datareader"\n                        [label]="labelflag"\n                        [label-color]="labelcolor"\n                        [level]="level"\n                        [target]="target"\n                        [drillable-data]="drillabledatakey"\n                        [drillData]="drillData">\n</amexio-d3-chart-donut>\n</div>\n'}]}],t.propDecorators={data:[{type:n.Input,args:["data"]}],onLegendClick:[{type:n.Output}],onChartClick:[{type:n.Output}],drillableEvent:[{type:n.Output}],donutref:[{type:n.ViewChild,args:["id"]}],legend:[{type:n.Input}],colors:[{type:n.Input,args:["color"]}],width:[{type:n.Input,args:["width"]}],height:[{type:n.Input,args:["height"]}],title:[{type:n.Input}],httpurl:[{type:n.Input,args:["http-url"]}],httpmethod:[{type:n.Input,args:["http-method"]}],datareader:[{type:n.Input,args:["data-reader"]}],level:[{type:n.Input,args:["level"]}],target:[{type:n.Input,args:["target"]}],drillabledatakey:[{type:n.Input,args:["drillable-data"]}],labelcolor:[{type:n.Input,args:["label-color"]}],labelflag:[{type:n.Input,args:["label"]}]},t}(),u=function(){function t(){this.horizontal=!1,this.temparr=[],this.onClick=new n.EventEmitter}return t.prototype.ngOnInit=function(){this.data=this.data,this.temparr=this.data},t.prototype.ngOnChanges=function(){this.data=this.data,this.temparr=this.data},t.prototype.onLegendClick=function(t){this.onClick.emit(t)},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-legend",template:'<div style =" width: 100% ; padding-left: 20px; padding-top: 8px; ">\n<table *ngIf="!horizontal" style="height: 100%;">\n    <tr *ngFor = "let node of data" style="cursor: pointer;" (click)="onLegendClick(node)">\n        <td style="height: 10px; width: 23px; padding-left: 2px;"\n            [ngStyle]="{\'background-color\': node.color}"></td>\n        <td>{{node.label}}</td>\n    </tr>\n</table>\n</div>\n\n<table *ngIf="horizontal" style="height: 100%;">\n    <tr>\n        <td *ngFor = "let node of data" \n                    (click)="onLegendClick(node)" \n                    style="cursor: pointer;">\n            \n            <div style=" display: inline-block; display: inline-block; padding: 2px;">\n                    <div style=" width: 10px; display: inline-block; padding: 2px; " \n                    [ngStyle]="{\'background-color\': node.color}"></div>\n                {{node.label}}\n            </div>\n        </td>\n        \n    </tr>\n</table>\n\n<br>\n '}]}],t.ctorParameters=function(){return[]},t.propDecorators={data:[{type:n.Input,args:["data"]}],horizontal:[{type:n.Input,args:["horizontal"]}],onClick:[{type:n.Output}]},t}(),p=function(i){function t(t,e,a){var r=i.call(this,"bar")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=300,r.horizontal=!1,r.labelcolor="black",r.labelflag=!1,r.level=0,r.drillabledatakey=[],r.hScale=!0,r.showzeroflag=!0,r._data=[],r.resizeflag=!1,r.drillableFlag=!0,r.colorflag=!1,r.keyArray=[],r.transformeddata=[],r.legendArray=[],r.firstloading=!1,r.inc=0,r.isChartInit=!1,r}return o(t,i),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){t&&0<t.length&&(this._data=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e,t=this;(this.wt=this.svgwidth,this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t},function(t){},function(){setTimeout(function(){t.data=t.getResponseData(e),t.transformData(t.data),t.initializeData(),t.plotD3Chart(),t.isChartInit=!0},0)}):this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.transformData(t.data),t.initializeData(),t.plotD3Chart(),t.isChartInit=!0},0))},t.prototype.fetchData=function(t){var e,a,r=this,i=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,i):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a=t},function(t){},function(){setTimeout(function(){r.data=r.getResponseData(a),r.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.initializeData(),t.plotD3Chart()},0)},t.prototype.ngOnChanges=function(){var t=this;1<this.inc&&(this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.transformData(t.data),t.initializeData(),t.plotD3Chart()},500),this.formLegendData()),this.inc++},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotD3Chart=function(){var e=this;this.formLegendData(),0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var a,r,i=this.toolTip(w),n=20,t=60,o=40,s=60,l=this.svgwidth-s-t,h=this.svgheight-n-o;this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight),this.svg.selectAll("*").remove();var c=this.svg.append("g").attr("transform","translate("+s+","+n+")");if(0==this.horizontal){if(this.data&&(a=w.scaleBand().rangeRound([0,l]).padding(.1)).domain(this.data.map(function(t){return t[Object.keys(t)[0]]})),this.data&&(r=w.scaleLinear().rangeRound([h,0])).domain([0,w.max(this.data,function(t){return t[Object.keys(t)[1]]})]),1==this.device.IsDesktop()?this.svgwidth<=400?c.append("g").attr("transform","translate(0,"+h+")").call(w.axisBottom(a)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):c.append("g").attr("transform","translate(0,"+h+")").call(w.axisBottom(a)):c.append("g").attr("transform","translate(0,"+h+")").call(w.axisBottom(a)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),c.append("g").call(w.axisLeft(r).ticks(this.tickscount)),this.plotLine(c,a,r,h,l),c.selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("x",function(t){return a(t[Object.keys(t)[0]])}).attr("y",function(t){return r(t[Object.keys(t)[1]])}).attr("cursor","pointer").attr("width",a.bandwidth()).attr("height",function(t){return h-r(t[Object.keys(t)[1]])}).style("fill",function(t){return t.color}).on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.barChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}),this.labelflag){this.svg.selectAll(".label").data(this.data).enter().append("text").style("font-weight","bold").style("font-size","1vw").attr("text-anchor","middle").attr("fill",function(t){return 0<e.labelcolor.length?0<e.labelcolor.length&&0<t[Object.keys(t)[1]]?e.labelcolor:void 0:"black"}).attr("x",function(t,e){return a(t[Object.keys(t)[0]])+s+a.bandwidth()/2}).attr("y",function(t,e){return r(t[Object.keys(t)[1]])+40}).text(function(t){return e.showzeroflag?t[Object.keys(t)[1]]:!e.showzeroflag&&0<t[Object.keys(t)[1]]?t[Object.keys(t)[1]]:void 0}).attr("cursor","pointer").on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.barChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")})}}else if(1==this.horizontal&&(this.data&&((a=w.scaleLinear().rangeRound([0,l])).domain([0,w.max(this.data,function(t){return parseInt(t[Object.keys(t)[1]])})]),(r=w.scaleBand().rangeRound([h,0]).padding(.1)).domain(this.data.map(function(t){return t[Object.keys(t)[0]]}))),c.append("g").attr("transform","translate(0,"+h+")").call(w.axisBottom(a).ticks(this.xtickscount)),c.append("g").call(w.axisLeft(r).ticks(this.tickscount)),this.plotLine(c,a,r,h,l),c.selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("x",0).attr("y",function(t){return r(t[Object.keys(t)[0]])}).attr("cursor","pointer").attr("width",function(t){return a(t[Object.keys(t)[1]])}).attr("height",r.bandwidth()).style("fill",function(t){return t.color}).on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.barChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}),this.labelflag)){this.svg.selectAll(".label").data(this.data).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("vertical-align","middle").attr("margin-top",n).attr("fill",function(t){return 0<e.labelcolor.length?e.labelcolor:"black"}).attr("x",function(t,e){return a(t[Object.keys(t)[1]])+40}).attr("y",function(t,e){return r(t[Object.keys(t)[0]])+n+r.bandwidth()/2}).text(function(t){return e.showzeroflag?t[Object.keys(t)[1]]:!e.showzeroflag&&0<t[Object.keys(t)[1]]?t[Object.keys(t)[1]]:void 0}).attr("cursor","pointer").on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.barChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")})}},t.prototype.plotLine=function(t,e,a,r,i){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).ticks(this.tickscount).tickSize(-i).tickFormat("")),this.vScale&&t.append("g").attr("color","lightgrey").attr("transform","translate(0,"+r+")").call(w.axisBottom(e).tickSize(-this.width).tickFormat("").ticks(this.xtickscount))},t.prototype.formTooltipData=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}return this.toolTipForBar(r)},t.prototype.transformData=function(t){var r=this;t&&0<t.length&&(this.transformeddata=[],this.keyArray=t[0],t&&0<t.length&&t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}}),this.data=this.transformeddata)},t.prototype.formLegendData=function(){var a=this;this.legendArray=[],this.data.forEach(function(t){var e={};e.label=t[Object.keys(t)[0]],e.value=t[Object.keys(t)[1]],e.color=t.color,a.legendArray.push(e)}),this.legendArray},t.prototype.onBarLegendClick=function(t){var e={};e[this.keyArray[0]]=t.label,e[this.keyArray[1]]=t.value,this.legendClick(e)},t.prototype.barChartClick=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}this.chartClick(r)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotD3Chart()},t.prototype.validateData=function(){if(!this.data)return"lmask"},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-bar",template:'<div #chartId *ngIf="drillableFlag " #divid (window:resize)="validateresize()">\n    <table [ngClass]="validateData()" style="width: 100%;" position=" relative">\n        <ng-container *ngIf="title.length > 0">\n            <tr>\n                <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n            </tr>\n        </ng-container>\n        <tr>\n            <td>\n                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf="legend">\n            <td style="display: block; padding: 5px;">\n                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onBarLegendClick($event)" [data]="legendArray" style="height:100%;">\n                </amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    \x3c!-- <table *ngIf="!(data && data.length >0)" class="lmask">\n        \n    </table > --\x3e\n    \x3c!-- <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div> --\x3e\n\n</div>'}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],horizontal:[{type:n.Input}],labelcolor:[{type:n.Input,args:["label-color"]}],labelflag:[{type:n.Input,args:["label"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],drillid:[{type:n.ViewChild,args:["drillid"]}],DOM:[{type:n.ViewChild,args:["domref"]}],datareader:[{type:n.Input,args:["data-reader"]}],level:[{type:n.Input,args:["level"]}],target:[{type:n.Input,args:["target"]}],drillabledatakey:[{type:n.Input,args:["drillable-data"]}],hScale:[{type:n.Input,args:["horizontal-scale"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],xtickscount:[{type:n.Input,args:["xaxis-interval"]}],showzeroflag:[{type:n.Input,args:["show-zero-values"]}],_data:[{type:n.Input,args:["data"]}]},t}(s),f=function(a){function t(t){var e=a.call(this,"line")||this;return e.deviceQueryService=t,e._data=[],e.xarr=[],e.displayindex=0,e.svgheight=300,e.linecolor=[],e.slant=!1,e}return o(t,a),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this._data&&0<this._data.length&&this.createXYAxisData()},enumerable:!0,configurable:!0}),t.prototype.createXYAxisData=function(){var r=this;this.labelcolor,this.xaxisdata=[],this.yaxisdata=[],this.multiseriesdata=[],this.legenddata=[],this.legends=[],this.xaxisname=this.data[0][0].label;var i=[],t=0;this.displayfield&&this._data[0].forEach(function(t,e){t.label==r.displayfield&&(r.displayindex=e)});for(var e=0;e<this._data[0].length;e++){var a=this._data[0][e];i[e]=[];var n={};if(n.label=a.label,0<this.linecolor.length&&this.linecolor[e]?n.color=this.linecolor[e]:n.color=this.predefinedcolors[e],this.legenddata.push(n),0<e){var o={};o.label=a.label,0<this.linecolor.length&&this.linecolor[t]?o.color=this.linecolor[t]:o.color=this.predefinedcolors[t],this.legends.push(o),t++}}var s=0;this._data.forEach(function(t){if(0<s){var e=0,a={};t.forEach(function(t){0<e&&e!==r.displayindex&&r.yaxisdata.push({label:t,value:t}),0==e&&(a.value=t),e==r.displayindex&&(a.label=t),i[e].push(t),e++}),r.xaxisdata.push(a)}s++});for(e=0;e<i.length;e++){var l=i[e];if(0<e&&e!==this.displayindex){for(var h=[],c=0;c<l.length;c++){var d=l[c];h.push({legend:this.legenddata[e].label,label:this.xaxisdata[c].label,value:d})}this.multiseriesdata.push(h),this.legends[e-1].data=h}}},t.prototype.recalculatescale=function(t){var a=this;this.xaxisdata;var r=0;this.displayfield||this.xaxisdata.forEach(function(t){if("string"==typeof t.label&&(r+=10*t.label.length),"number"==typeof t.label){var e=a.findDigitCount(t.label);r+=10*e}}),this.displayfield&&this.xaxisdata.forEach(function(t){r+=10*t.label.length}),this.displayfield&&this.slant&&(r=10*this.xaxisdata.length),t<r&&this.calculatexaxisarray(r,t)},t.prototype.calculatexaxisarray=function(t,e){var a=Math.round(t/e);this.generateNewAxis(a,e)},t.prototype.generateNewAxis=function(t,e){this.xaxisdata;var a,r=[],i=[];if(this.xaxisdata.forEach(function(t){r.push(t.label)}),0<r.length){a=Math.min.apply(null,r),Math.max.apply(null,r);var n=Math.round(e/10),o=(n-.2*n)/4,s=Math.round(o),l=void 0,h=!1;if(!this.displayfield){for(i[0]=a,l=1;s<this.xaxisdata.length;l++)s=Math.round(o*l+l),h=this.checkArrayRedundancy(i,Math.round(s)),i[l]=h?Math.round(s+1):Math.round(s);this.sortarr(i)}if(this.displayfield){for(l=0;s<this.xaxisdata.length;l++)s=Math.round(o*l+l),this.xaxisdata[s]?i[l]=this.xaxisdata[s].label:this.xaxisdata[s+1]&&(i[l]=this.xaxisdata[s+1].label);this.xarr=i}}},t.prototype.checkArrayRedundancy=function(t,e){var a=0;return t.forEach(function(t){e==t&&a++}),1<a},t.prototype.sortarr=function(t){var e,a,r;for(e=0;e<t.length;++e)for(a=e+1;a<t.length;++a)t[e]>t[a]&&(r=t[e],t[e]=t[a],t[a]=r);this.setXaxisData(t)},t.prototype.setXaxisData=function(t){var a=this;this.xarr=t;var r=!1;t.forEach(function(e){if(a.xaxisdata.forEach(function(t){e==t.label&&(r=!0)}),!r){var t={label:e,value:e};a.xaxisdata.push(t)}r=!1});var i=[];t.forEach(function(t){var e={label:t,value:t};i.push(e)}),this.xaxisdata,this.xaxisdata1=i},t.prototype.findDigitCount=function(t){var e=0;for(1<=t&&++e;1<=t/10;)t/=10,++e;return e},t.prototype.setXinterval=function(t){var a=this,e=Math.round(this.xaxisdata.length/this.xinterval),r=[],i=[];this.xaxisdata.forEach(function(t){"number"==typeof t.label&&r.push(t.label)});var n,o=Math.min.apply(null,r),s=Math.max.apply(null,r),l=e,h=!1;for(i[0]=o,n=1;l<s;n++)l=e*n,i[n]=l;i.forEach(function(e){if(a.xaxisdata.forEach(function(t){t.label==e&&(h=!0)}),!h){var t={label:e,value:e};a.xaxisdata.push(t)}h=!1}),this.xarr=i},t.prototype.setDisplayfieldXinterval=function(t){var e=Math.round(this.xaxisdata.length/this.xinterval),a=[],r=[];this.xaxisdata.forEach(function(t){a.push(t.label)});var i,n=this.xaxisdata.length-1,o=e;for(r[0]=this.xaxisdata[0].label,i=1;o<n;i++)r[i]=this.xaxisdata[o].label,o=e*i;r.push(this.xaxisdata[n].label),this.xarr=r},t.prototype.initChart=function(){var e=this,a=this.toolTip(w);this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight),this.svg.selectAll("*").remove();var t=40,r=20,i=30,n=40,o=+this.svgwidth-n-r;this.xinterval?(this.displayfield||this.setXinterval(o),this.displayfield&&this.setDisplayfieldXinterval(o)):this.recalculatescale(o);var s=+this.svgheight-t-i,l=this.svg.append("g").attr("transform","translate("+n+","+t+")"),h=w.scalePoint().rangeRound([0,o]).padding(.1),c=w.scaleLinear().rangeRound([s,0]);this.xaxisdata&&h.domain(this.xaxisdata.map(function(t){return"string"==typeof t.label?t.label:parseInt(t.value)})),this.yaxisdata&&c.domain([0,w.max(this.yaxisdata,function(t){return t.value})]);var d=w.axisBottom(h);if(0<this.xarr.length&&d.tickValues(this.xarr),1==this.deviceQueryService.IsDesktop())if(this.svgwidth<=400)l.append("g").attr("transform","translate(0,"+s+")").call(d).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start");else{var u=l.append("g").attr("transform","translate(0,"+s+")").call(d);this.slant&&u.selectAll("text").attr("cursor","pointer").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(e.callXaxisTooltip(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return a.style("visibility","hidden")}).attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").style("text-anchor","start").style("font-size",10)}else l.append("g").attr("transform","translate(0,"+s+")").call(d).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start").style("font-size",10);l.append("g").call(w.axisLeft(c).ticks(this.tickscount));var p=this._data;return this.alterLegend(),{g:l,x:h,y:c,height:s,width:o,rawdata:p}},t.prototype.plotScale=function(t,e,a,r,i){this.vScale&&t.append("g").attr("color","lightgrey").attr("transform","translate(0,"+r+")").call(w.axisBottom(e).tickSize(-this.width).tickFormat("")),this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).ticks(this.tickscount).tickSize(-i).tickFormat(""))},t.prototype.legendClick=function(t){var a=this,e={};e.label=t.label;var r=[];t.data.forEach(function(t){var e={};e[t.legend]=t.value,e[a.xaxisname]=t.label,r.push(e)}),e.data=r,this.onLegendClick.emit(e)},t.prototype.alterLegend=function(){var e=this;this.linelegends=[],this.displayfield?this.legends.forEach(function(t){t.label!==e.displayfield&&e.linelegends.push(t)}):this.linelegends=this.legends},t.prototype.callXaxisTooltip=function(t){var e={};return e["x-axis"]=t,this.toolTipForBar(e)},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],xinterval:[{type:n.Input,args:["data"]},{type:n.Input,args:["xaxis-interval"]}],httpurl:[{type:n.Input,args:["http-url"]}],httpmethod:[{type:n.Input,args:["http-method"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],linecolor:[{type:n.Input,args:["color"]}],displayfield:[{type:n.Input,args:["display-field"]}],slant:[{type:n.Input,args:["rotate"]}]},t}(s),g=function(i){function t(t,e,a){var r=i.call(this,t)||this;return r.deviceQueryService=t,r.cdf=e,r.myservice=a,r.labelcolor="",r}return o(t,i),t.prototype.ngOnInit=function(){var e,t=this;(this.wt=this.svgwidth,this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t},function(t){},function(){setTimeout(function(){t.data=t.getResponseData(e),t.plotD3Chart()},0)}):this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.plotD3Chart()},0))},t.prototype.ngOnChanges=function(){var t=this;this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.plotD3Chart()},0)},t.prototype.validateData=function(){if(!this.data)return"lmask"},t.prototype.fetchData=function(t){var e,a,r=this,i=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,i):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a=t},function(t){},function(){setTimeout(function(){r.data=r.getResponseData(a),r.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.plotD3Chart()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotD3Chart()},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotD3Chart=function(){0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var t=this.toolTip(w),e=this.initChart();if(this.rawdata=e.rawdata,this.plotScale(e.g,e.x,e.y,e.height,e.width),this.plotLine(e.g,e.x,e.y,e.height,e.width,[],t,1),this.multiseriesdata)for(var a=0;a<this.multiseriesdata.length;a++)this.plotLine(e.g,e.x,e.y,e.height,e.width,this.multiseriesdata[a],t,a+1)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.plotLine=function(t,a,r,e,i,n,o,s){var l=this,h=w.line().x(function(t){return a(t.label)}).y(function(t){return r(t.value)});t.append("path").datum(n).attr("fill","none").attr("stroke",function(t){return 0<l.linecolor.length?l.linecolor[s-1]?l.linecolor[s-1]:l.predefinedcolors[s-1]:l.linecolor.length<1?l.predefinedcolors[s-1]:void 0}).attr("stroke-width",1.5).attr("d",h),t.selectAll("dot").data(n).enter().append("circle").attr("cx",function(t){return a(t.label)}).attr("cy",function(t){return r(t.value)}).attr("r",2).attr("fill",function(t){return 0<l.linecolor.length?l.linecolor[s-1]?l.linecolor[s-1]:l.predefinedcolors[s-1]:l.linecolor.length<1?l.predefinedcolors[s-1]:void 0}).attr("cursor","pointer").on("mouseover",function(t){return o.style("visibility","visible")}).on("mousemove",function(t){return o.html(l.callTooltip(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return o.style("visibility","hidden")}).on("click",function(t){return l.lineChartClick(t),l.fordrillableClick(l,t,event),o.style("visibility","hidden")}),this.labelflag&&t.selectAll("label").data(n).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("fill",function(t){return 0<l.labelcolor.length?l.labelcolor:0<l.linecolor.length?l.linecolor[s-1]?l.linecolor[s-1]:l.predefinedcolors[s-1]:l.linecolor.length<1?l.predefinedcolors[s-1]:void 0}).attr("x",function(t,e){return a(t.label)}).attr("y",function(t,e){return r(t.value)-10}).text(function(t){return t.value}).attr("cursor","pointer").on("mouseover",function(t){return o.style("visibility","visible")}).on("mousemove",function(t){return o.html(l.callTooltip(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return o.style("visibility","hidden")}).on("click",function(t){return l.lineChartClick(t),l.fordrillableClick(l,t,event),o.style("visibility","hidden")})},t.prototype.lineChartClick=function(t){var e={};e[t.legend]=t.value,e[this.xaxisname]=t.label,this.chartClick(e)},t.prototype.callTooltip=function(t){var e={};return e[t.legend]=t.value,e[this.xaxisname]=t.label,this.toolTipForBar(e)},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-line",template:'<div  #chartId *ngIf="drillableFlag" #divid (window:resize)="validateresize()"> \n    <table [ngClass]="validateData()"  style="width: 100%;" > \n            <ng-container *ngIf = "title.length > 0">\n            <tr><td style="font-size: 18px; font-weight: bold; "> {{title}} </td></tr>\n            </ng-container>\n            <tr>\n                <td>\n                    <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                    </svg>            \n                </td>\n            </tr>\n            <tr  *ngIf="legend">\n                <td style="display: block; padding: 5px;">\n                        <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" \n                                            [data]="linelegends" style="height:100%;">\n                        </amexio-d3-legend>\n                </td>\n            \n            </tr>\n    </table>\n    \x3c!-- <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n        </div> --\x3e\n    </div>\n    \n    \x3c!-- {{legends | json}} --\x3e'}]}],t.ctorParameters=function(){return[{type:h},{type:n.ChangeDetectorRef},{type:l}]},t.propDecorators={labelcolor:[{type:n.Input,args:["label-color"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],drillid:[{type:n.ViewChild,args:["drillid"]}]},t}(f),y=function(i){function t(t,e,a){var r=i.call(this,"barstack")||this;return r.myservice=t,r.cdf=e,r.device=a,r.maxYValue=0,r.data=[],r.barwidth=0,r.title="",r.legend=!0,r.color=[],r.svgheight=300,r.onLegendClick=new n.EventEmitter,r}return o(t,i),t.prototype.ngOnInit=function(){var e=this;this.wt=this.svgwidth,this.level<=1&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e.httpresponse=t,e.data=e.getResponseData(t)},function(t){},function(){setTimeout(function(){e.transformData(e.data),e.plotChart()},0)}):this.data1&&setTimeout(function(){e.transformData(e.data1),e.plotChart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.transformData(t.data),t.plotChart()},0)},t.prototype.transformData=function(t){var e,l=this;this.keyArray=[],this.legendArray=[],t.forEach(function(t,e){0==e&&t.forEach(function(t,e){0<e?(l.legendArray[t]={data:[]},l.keyArray.push(t)):0==e&&(l.xaxis=t)})}),e=[],t.forEach(function(i,t){if(0<t){var n={};i.forEach(function(t,e){if(0<=e){var a=l.keyArray[e-1];n[a]=i[e];var r=l.legendArray[a];r&&r.data.push({value:i[e],label:i[0]})}}),e.push(n)}}),this.data=[],e.forEach(function(t){l.data.push(t)});var h=0,c=[];this.data.forEach(function(t){var e,a,r=function(e,a){l.keyArray.forEach(function(t){e==t&&(h+=a)})};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2);r(o[0],o[1])}}catch(s){e={error:s}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}c.push(h),h=0});var a;for(a=0;a<c.length;a++)0<c[a]&&(this.maxYValue=c[a]);this.legends=[],this.keyArray.forEach(function(t,e){var a=l.legendArray[t];if(0<l.color.length){var r={label:t,color:l.color[e],data:a.data};l.legends.push(r)}else{r={label:t,color:l.predefinedcolors[e],data:a.data};l.legends.push(r)}})},t.prototype.plotChart=function(){var t,a=this,e=this.toolTip(w),r=30,i=30,n=90,o=60,s=this.predefinedcolors;this.device.IsDesktop()&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth)),t=this.data;var l=[];if(this.httpmethod&&this.httpurl){try{for(var h=C(Object.entries(this.data[0])),c=h.next();!c.done;c=h.next()){var d=D(c.value,2),u=d[0];d[1];l.push(u)}}catch(k){m={error:k}}finally{try{c&&!c.done&&(b=h["return"])&&b.call(h)}finally{if(m)throw m.error}}this.keyArray=l,this.keyArray.splice(0,1)}var p,f=w.stack().keys(this.keyArray).offset(w.stackOffsetDiverging)(this.data),g=this.svgwidth-o-i;this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight),p=this.device.IsDesktop()?(this.offsetheight=this.chartId.nativeElement.offsetHeight,this.offsetheight):this.chartId.nativeElement.offsetHeight-10;var y=w.scaleBand().domain(t.map(function(t){return t[Object.keys(t)[0]]})).rangeRound([o,this.svgwidth-i]).padding(.35),v=w.scaleLinear().domain([w.min(this.stackMin(f)),this.maxYValue]).rangeRound([p-n,r]);1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+v(0)+")").call(w.axisBottom(y)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+v(0)+")").call(w.axisBottom(y)):this.svg.append("g").attr("transform","translate(0,"+v(0)+")").call(w.axisBottom(y)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").attr("transform","translate("+o+",0)").call(w.axisLeft(v).ticks(this.tickscount)),this.plotLine(this.svg,y,v,p,g,o);var m,b,x=this.svg.append("g").selectAll("g").data(f).enter().append("g").attr("fill",function(t,e){return 0<a.color.length&&a.color[e]?a.color[e]:s[e]}).selectAll("rect").data(function(t){return t});x.enter().append("rect").attr("width",y.bandwidth()).attr("id",function(t,e){return t.data[e]}).attr("x",function(t){return y(+t.data[Object.keys(t.data)[0]])}).attr("y",function(t,e){return v(t[1])}).attr("cursor","pointer").attr("height",function(t,e){return v(t[0])-v(t[1])}).on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.setBarClickText(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")}),this.labelflag&&x.enter().append("text").style("font-weight","bold").style("font-size","1vw").attr("text-anchor","middle").attr("fill",function(t){return a.labelcolor&&0<a.labelcolor.length?a.labelcolor:"black"}).attr("x",function(t){return y(+t.data[Object.keys(t.data)[0]])+y.bandwidth()/2}).attr("y",function(t,e){return v(t[1])+20}).text(function(t){if(0<t[Object.keys(t)[1]]-t[Object.keys(t)[0]])return t[Object.keys(t)[1]]-t[Object.keys(t)[0]]}).attr("cursor","pointer").on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.setBarClickText(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")})},t.prototype.stackMin=function(t){return w.min(t,function(t){return t[0]})},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotChart()},t.prototype.plotLine=function(t,e,a,r,i,n){this.hScale&&t.append("g").attr("transform","translate("+n+",0)").attr("color","lightgrey").call(w.axisLeft(a).ticks(this.tickscount).tickSize(-i).tickFormat(""))},t.prototype.legendClick=function(t){var e={};e.label=t.label;var a=[];t.data.forEach(function(t){var e={};e[t.label]=t.value,a.push(e)}),e.data=a,this.onLegendClick.emit(e)},t.prototype.setKey=function(t){var e,a,r=t[0]-t[1];r<0&&(r*=-1);try{for(var i=C(Object.entries(t.data)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];if(l==r){var h={};return h[s]=l,h[this.xaxis]=t.data[Object.keys(t.data)[0]],this.toolTipForBar(h)}}}catch(c){e={error:c}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}},t.prototype.setBarClickText=function(t){var e=t[0]-t[1];e<0&&(e*=-1);var a,r,i={};try{for(var n=C(Object.entries(t.data)),o=n.next();!o.done;o=n.next()){var s=D(o.value,2),l=s[0],h=s[1];h==e&&(i[l]=h,i[this.xaxis]=t.data[Object.keys(t.data)[0]])}}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(a)throw a.error}}this.chartClick(i)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-barstack",template:'<div #chartId *ngIf="drillableFlag" (window:resize)="validateresize()">\n    <table *ngIf="data1.length > 0" style="width: 100%;">\n            <ng-container *ngIf = "title.length > 0">\n        <tr>\n            <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n        </tr>\n            </ng-container>\n        <tr>\n            <td>\n                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf="legend">\n            <td style="display: block; padding: 5px;">\n                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" [data]="legends"\n                    style="height:100%;">\n                </amexio-d3-legend>\n            </td>\n\n        </tr>\n    </table>\n    <div *ngIf="data1.length < 1" class="lmask" style="padding-top:50%">\n    </div>\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={data1:[{type:n.Input,args:["data"]}],barwidth:[{type:n.Input}],title:[{type:n.Input}],legend:[{type:n.Input}],color:[{type:n.Input}],svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],drillid:[{type:n.ViewChild,args:["drillid"]}],onLegendClick:[{type:n.Output}]},t}(s),v=function(i){function t(t,e,a){var r=i.call(this,"multibar")||this;return r.myservice=t,r.cdf=e,r.device=a,r.data=[],r.legend=!0,r.barwidth=0,r.onLegendClick=new n.EventEmitter,r.svgheight=300,r.showzeroflag=!0,r.groupbarchartArray=[],r.urllegendArray=[],r.defualtColors=[],r.predefinedcolors=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],r}return o(t,i),t.prototype.ngOnInit=function(){var e,t=this;(this.wt=this.svgwidth,this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t},function(t){},function(){setTimeout(function(){t.data=t.getResponseData(e),t.initializeData(),t.plotD3Chart()},0)}):this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.initializeData(),t.plotD3Chart()},0))},t.prototype.fetchData=function(t){var e,a,r=this,i=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,i):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a=t},function(t){},function(){setTimeout(function(){r.data=r.getResponseData(a),r.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.initializeData(),t.plotD3Chart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotD3Chart=function(){this.convertToJSON(),this.plotGroupBarChart(),this.transformData(this.data)},t.prototype.plotGroupBarChart=function(){var a=this,e=this.toolTip(w);this.defualtColors=this.predefinedcolors,0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var t=20,r=20,i=50,n=40,o=this.svgwidth-n-r,s=this.svgheight-t-i;this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",o+n+r).attr("height",s+t+i).append("g").attr("transform","translate("+n+","+t+")");var l=w.scaleBand().rangeRound([0,o]).padding(.2),h=w.scaleBand().padding(.1),c=w.scaleLinear().rangeRound([s,0]);this.years=this.groupbarchartArray.map(function(t){return t.labels});var d=this.groupbarchartArray[0].values.map(function(t){return t.label});l.domain(this.years),h.domain(d).rangeRound([0,l.bandwidth()]),c.domain([0,w.max(this.groupbarchartArray,function(t){return w.max(t.values,function(t){return t.value})})]),0<this.barwidth?this.barwidth=this.barwidth:this.barwidth=l.bandwidth,1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(l)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(l)):this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(l)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").call(w.axisLeft(c).ticks(10).ticks(this.tickscount)),this.plotLine(this.svg,c,s,o);var u=this.svg.selectAll(".slice").data(this.groupbarchartArray).enter().append("g").attr("class","g").attr("transform",function(a){return a.values.forEach(function(t,e){t.value&&t.value<1&&a.values.splice(0,e)}),"translate("+l(a.labels)+",0)"});u.selectAll("rect").data(function(t){return t.values}).enter().append("rect").attr("width",h.bandwidth).attr("x",function(t){return h(t.label)}).style("fill",function(t,e){return 0<a.colors.length&&a.colors[e]?a.colors[e]:a.defualtColors[e]}).attr("y",function(t){return c(0)}).attr("height",function(t){return s-c(0)}).attr("cursor","pointer").on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.groupbarClick(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")}),this.labelflag&&u.selectAll("text").data(function(t){return t.values}).enter().append("text").attr("width",h.bandwidth).attr("x",function(t){return h(t.label)+h.bandwidth()/2}).attr("y",function(t){return c(t.value)}).attr("height",function(t){return s-c(0)}).style("font-weight","bold").style("font-size","1vw").attr("text-anchor","middle").attr("fill",function(t){return a.labelcolor&&0<a.labelcolor.length?a.labelcolor:"black"}).text(function(t){return a.showzeroflag?t.value:!a.showzeroflag&&0<t.value?t.value:void 0}).attr("cursor","pointer").on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.groupbarClick(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")}),u.selectAll("rect").attr("y",function(t){return c(t.value)}).attr("height",function(t){return s-c(t.value)})},t.prototype.groupbarClick=function(t){var e={};e[t.label]=t.value,e[this.xaxisData]=t.xaxis,this.chartClick(e)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotGroupBarChart()},t.prototype.legendClick=function(t){var e={};e.label=t.label;var a=[];t.data.forEach(function(t){var e={};e[t.label]=t.value,a.push(e)}),e.data=a,this.onLegendClick.emit(e)},t.prototype.convertToJSON=function(){var t={labels:"",values:[]},e=this.data[0];this.xaxisData=this.data[0][0];for(var a=1;a<this.data.length;a++){for(var r=[],i=void 0,n=1;n<this.data[a].length;n++){i=this.data[a][0];var o={};o.value=this.data[a][n],o.label=e[n],o.xaxis=this.data[a][0],r.push(o)}if(r.length){t.values=r;var s=i,l=Object.assign({},t);l.labels=s+"",this.groupbarchartArray.push(l)}}},t.prototype.transformto2dArray=function(){var r=this,a=[];a.push("years"),this.data.forEach(function(t,e){0==e&&t.values.forEach(function(t){a.push(t.label)})}),this.urllegendArray.push(a);var i=[];this.data.forEach(function(t){var e;i=[];var a=t.labels;i.push(a),t.values.forEach(function(t){e=t.value,i.push(e)}),r.urllegendArray.push(i)})},t.prototype.transformData=function(t){var o=this;this.keyArray=[],this.legendArray=[],t.forEach(function(t,e){0==e&&t.forEach(function(t,e){0<e&&(o.legendArray[t]={data:[]},o.keyArray.push(t))})}),t.forEach(function(i,t){if(0<t){var n={};i.forEach(function(t,e){if(0<=e){var a=o.keyArray[e-1];n[a]=i[e];var r=o.legendArray[a];r&&r.data.push({value:i[e],label:i[0]})}})}}),this.legends=[],this.keyArray.forEach(function(t,e){var a,r=o.legendArray[t];a=0<o.colors.length?{label:t,color:o.colors[e],data:r.data}:{label:t,color:o.predefinedcolors[e],data:r.data},o.legends.push(a)})},t.prototype.setKey=function(t){var e={};return e[t.label]=t.value,e[this.xaxisData]=t.xaxis,this.toolTipForBar(e)},t.prototype.plotLine=function(t,e,a,r){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(e).tickSize(-r).tickFormat("").ticks(this.tickscount))},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-multiseries",template:'<div  #chartId *ngIf="drillableFlag" (window:resize)="validateresize()"> \n<table *ngIf="data.length > 0"  style="width: 100%;">\n    <tr *ngIf = "title.length > 0" >\n        <td colspan="2" style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n    </tr>\n    <tr>\n        <td>\n            <svg [attr.height]="height" [attr.width]="width" [attr.id]="componentId">\n            </svg>\n        </td>\n    </tr>\n    <tr *ngIf="legend">\n        <td style="display: block; padding: 5px;">\n            <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" [data]="legends" style="height:100%;"></amexio-d3-legend>\n        </td>\n    </tr>\n</table>\n<div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div>\n</div>\n\n\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],drillid:[{type:n.ViewChild,args:["drillid"]}],data:[{type:n.Input,args:["data"]}],legend:[{type:n.Input}],barwidth:[{type:n.Input}],onLegendClick:[{type:n.Output}],svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],showzeroflag:[{type:n.Input,args:["show-zero-values"]}]},t}(s),m=function(i){function t(t,e,a){var r=i.call(this,"combochart")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=300,r.lineColor="black",r.label=!1,r.horizontal=!1,r.barwidth=0,r.lineInput=[],r.barInput=[],r.showzeroflag=!0,r.simpleComboFlag=!1,r.completeconverteddata=[],r.simpleCombodata=[],r.groupbarchartArray=[],r.highercolorindex=0,r.colorflag=!1,r.keyArray=[],r.transformeddata=[],r.legendArray=[],r.legends=[],r.LineArray=[],r.outputData=[],r.higherdot1colorindex=0,r}return o(t,i),t.prototype.ngOnInit=function(){var e,a=this;(this.wt=this.svgwidth,this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t,a.httpresponse=t},function(t){},function(){setTimeout(function(){a.data=a.getResponseData(e),a.transformData(),a.initializeData(),a.plotD3Chart()},0)}):this.data&&setTimeout(function(){a.data=a.getResponseData(a.data),a.transformData(),a.initializeData(),a.plotD3Chart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.transformData(),t.initializeData(),t.plotD3Chart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.transformData=function(){this.formDatastructure(),this.tranasforsimplejson()},t.prototype.formDatastructure=function(){var a=this;this.lineflag=!0,this.createjson(this.data),0<this.barInput.length&&0<this.lineInput.length&&2<this.data[0].length?(this.sc1=!0,this.createData1(this.barInput,this.data)):0<this.lineInput.length&&1<this.data[0].length?(this.sc2=!0,this.data[0].forEach(function(e){a.lineInput.forEach(function(t){e!==t&&(a.sc2barflag=!0)})}),this.createData1(null,this.data),this.sc2barflag):0<this.barInput.length&&1<this.data[0].length?(this.sc3=!0,this.createData1(this.barInput,this.data)):this.barInput.length<1&&this.lineInput.length<1&&1<this.data[0].length&&(this.sc4=!0,this.createData1(null,this.data))},t.prototype.createData1=function(t,e){var n=this,o=[];this.lineInput.forEach(function(t){o.push(t.column)}),this.firstrow=this.data[0];var s=[];s.push(0),e.forEach(function(a,t){if(0===t){if(a.forEach(function(e,a){1!=n.sc1&&1!=n.sc3||n.barInput.forEach(function(t){e===t.column&&s.push(a)}),1==n.sc2&&1==n.sc2barflag&&n.lineInput.forEach(function(t){e===t.column||0===a||0!=o.includes(e)||s.includes(a)||s.push(a)})}),1==n.sc4)1<n.data[0].length&&s.push(1);var r=[];s.forEach(function(t,e){r.push(a[t])}),n.outputData.push(r)}else{var i=[];a.forEach(function(a,r){s.forEach(function(t,e){r===t&&i.push(a)})}),n.outputData.push(i)}}),this.createjson(this.outputData)},t.prototype.createjson=function(t){var e={labels:"",values:[]};this.groupbarchartArray=[];var a=t[0];this.xaxisData=this.data[0][0];for(var r=1;r<t.length;r++){for(var i=[],n=void 0,o=1;o<t[r].length;o++){n=t[r][0],(h={}).value=t[r][o],h.label=a[o],h.xaxis=t[r][0],i.push(h)}if(i.length){e.values=i;var s=n;(c=Object.assign({},e)).labels=s+"",this.groupbarchartArray.push(c)}}if(this.lineflag)this.groupbarchartArray,this.LineArray=this.groupbarchartArray;else{this.groupbarchartArray=[];var l=t[0];for(r=1;r<t.length;r++){for(i=[],n=void 0,o=1;o<t[r].length;o++){var h;n=t[r][0],(h={}).value=t[r][o],h.label=l[o],h.xaxis=t[r][0],i.push(h)}if(i.length){e.values=i;var c;s=n;(c=Object.assign({},e)).labels=s+"",this.groupbarchartArray.push(c)}}this.groupbarchartArray}},t.prototype.plotD3Chart=function(){var r=this,a=this.toolTip(w),i=this.predefinedcolors;0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var t=20,e=20,n=50,o=40,s=this.svgwidth-o-e,l=this.svgheight-t-n;this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",s+o+e).attr("height",l+t+n).append("g").attr("transform","translate("+o+","+t+")");var h=w.scaleBand().rangeRound([0,s]).padding(.2),c=w.scaleBand().padding(.1),d=w.scaleLinear().rangeRound([l,0]);this.years=this.groupbarchartArray.map(function(t){return t.labels});var u=this.groupbarchartArray[0].values.map(function(t){return t.label});h.domain(this.years),c.domain(u).rangeRound([0,h.bandwidth()]),d.domain([0,w.max(this.groupbarchartArray,function(t){return w.max(t.values,function(t){return t.value})})]),0<this.barwidth?this.barwidth=this.barwidth:this.barwidth=h.bandwidth,1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+l+")").call(w.axisBottom(h)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+l+")").call(w.axisBottom(h)):this.svg.append("g").attr("transform","translate(0,"+l+")").call(w.axisBottom(h)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").call(w.axisLeft(d).ticks(this.tickscount)),this.plotLineForMultiSeries(this.svg,d,l,s);var p,f=this.svg.selectAll(".slice").data(this.groupbarchartArray).enter().append("g").attr("class","g").attr("transform",function(t){return"translate("+h(t.labels)+",0)"});f.selectAll("rect").data(function(t){return t.values}).enter().append("rect").attr("width",c.bandwidth).attr("x",function(t){return c(t.label)}).style("fill",function(t,e){return r.higherdot1colorindex=e,r.legendcolorindex=e,i[e]}).attr("y",function(t,e){return d(t.value)}).attr("height",function(t,e){return l-d(t.value)}).attr("cursor","pointer").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.groupbarClick(t),r.fordrillableClick(r,t,event),a.style("visibility","hidden")}),f.selectAll("text").data(function(t){return t.values}).enter().append("text").attr("opacity",function(e){var a=!1;return 0<r.barInput.length?(r.barInput.forEach(function(t){t.column!=e.label||1!=t.label||(a=!0)}),a?1:0):1==r.sc4&&1==r.label?1:0}).attr("width",c.bandwidth).attr("x",function(t){return c(t.label)+c.bandwidth()/2}).attr("y",function(t){return d(t.value)}).attr("height",function(t){return l-d(0)}).style("font-weight","bold").style("font-size","1vw").attr("text-anchor","middle").attr("fill",function(t){return 0<r.labelcolor.length?r.labelcolor:"black"}).text(function(t){return r.showzeroflag?t.value:!r.showzeroflag&&0<t.value?t.value:void 0}).attr("cursor","pointer").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.setKey(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.groupbarClick(t),r.fordrillableClick(r,t,event),a.style("visibility","hidden")}),f.selectAll("rect").attr("y",function(t){return d(t.value)}).attr("height",function(t){return l-d(t.value)});var g=this.svg.selectAll(".slice").data(this.transformeddata).enter().append("g").attr("class","g");if(this.higherdot1colorindex++,this.lineInput.forEach(function(t){t.color||(t.color=i[r.higherdot1colorindex],r.higherdot1colorindex++)}),0<this.lineInput.length){var y=function(){var e=v.lineInput[p],t=w.line().x(function(t){return h(t[Object.keys(t)[0]])}).y(function(t){return d(t[e.column])});c.bandwidth();g.append("path").data([v.transformeddata]).attr("fill","none").style("stroke",function(t){if(e.color)return e.color}).attr("stroke-width",1.5).attr("transform","translate( "+c.bandwidth()/2+", 0 )").attr("d",t);g.selectAll("dot").data(v.transformeddata).enter().append("circle").attr("class","point1").attr("cursor","pointer").style("fill",function(t){if(e.color)return e.color}).attr("cx",function(t){return h(t[Object.keys(t)[0]])}).attr("cy",function(t){return d(t[e.column])}).attr("r",function(t){return 5}).attr("transform","translate( "+c.bandwidth()/2+", 0 )").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.formTooltipLineData(t,e,!1)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.onComboLineClick(t,e,!1),r.fordrillableClick(r,t,event),a.style("visibility","hidden")})},v=this;for(p=0;p<this.lineInput.length;p++)y()}else if(1==this.sc4&&2<this.data[0].length){var m=w.line().x(function(t){return h(t[Object.keys(t)[0]])}).y(function(t){return d(t[Object.keys(t)[2]])});c.bandwidth();g.append("path").data([this.transformeddata]).attr("fill","none").style("stroke",function(t){return"black"!==r.lineColor?r.lineColor:i[2]}).attr("stroke-width",1.5).attr("transform","translate( "+c.bandwidth()/2+", 0 )").attr("d",m),g.selectAll("dot").data(this.transformeddata).enter().append("circle").attr("class","point1").attr("cursor","pointer").style("stroke",function(t){return"black"!==r.lineColor?r.lineColor:i[2]}).style("fill",function(t){return"black"!==r.lineColor?r.lineColor:i[2]}).attr("cx",function(t){return h(t[Object.keys(t)[0]])}).attr("cy",function(t){return d(t[Object.keys(t)[2]])}).attr("r",function(t){return 5}).attr("transform","translate( "+c.bandwidth()/2+", 0 )").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.formTooltipLineData(t,null,!0)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.onComboLineClick(t,null,!0),r.fordrillableClick(r,t,event),a.style("visibility","hidden")})}if(0<this.lineInput.length){var b=function(){var e=x.lineInput[p];e.label&&1==e.label&&g.selectAll("labels").data(x.transformeddata).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("fill",function(t){return e.labelcolor?e.labelcolor:"black"}).attr("x",function(t){return h(t[Object.keys(t)[0]])}).attr("y",function(t){return d(t[e.column])}).text(function(t){return t[e.column]}).attr("transform","translate( "+c.bandwidth()/2+", 19 )").attr("cursor","pointer").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.formTooltipLineData(t,e,!1)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.onComboLineClick(t,e,!1),r.fordrillableClick(r,t,event),a.style("visibility","hidden")})},x=this;for(p=0;p<this.lineInput.length;p++)b()}else 1==this.sc4&&2<this.data[0].length&&1==this.label&&g.selectAll("labels").data(this.transformeddata).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("fill",function(t){return 0<r.labelcolor.length?r.labelcolor:"black"}).attr("x",function(t){return h(t[Object.keys(t)[0]])}).attr("y",function(t){return d(t[Object.keys(t)[2]])}).text(function(t){return t[Object.keys(t)[2]]}).attr("transform","translate( "+c.bandwidth()/2+", 19 )").attr("cursor","pointer").on("mouseover",function(t){return a.style("visibility","visible")}).on("mousemove",function(t){return a.html(r.formTooltipLineData(t,null,!0)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.style("visibility","hidden")}).on("click",function(t){return r.onComboLineClick(t,null,!0),r.fordrillableClick(r,t,event),a.style("visibility","hidden")});this.formLegendData(this.outputData)},t.prototype.plotLine=function(t,e,a,r,i){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.prototype.setKey=function(t){var e={};return e[t.label]=t.value,e[this.xaxisData]=t.xaxis,this.toolTipForBar(e)},t.prototype.finMaxLineValue=function(){var l=this,h=[];this.data.forEach(function(t){var e,a,r=function(e,a){l.lineInput.forEach(function(t){t==e&&h.push(a)})};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2);r(o[0],o[1])}}catch(s){e={error:s}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}});var t,e=0;for(t=0;t<h.length;t++)h[t]>e&&(e=h[t]);this.lineRange=e},t.prototype.groupbarClick=function(t){var e={};e[t.label]=t.value,e[this.xaxisData]=t.xaxis,this.chartClick(e)},t.prototype.plotLineForMultiSeries=function(t,e,a,r){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(e).tickSize(-r).tickFormat("").ticks(this.tickscount))},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotD3Chart()},t.prototype.tranasforsimplejson=function(){var r=this;this.transformeddata=[],this.keyArray=this.data[0],this.data.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}})},t.prototype.formTooltipLineData=function(t,e,a){var r,i,n={};try{for(var o=C(Object.entries(t)),s=o.next();!s.done;s=o.next()){var l=D(s.value,2),h=l[0],c=l[1];1==a?h==this.data[0][2]&&(n[h]=c):h==e.column&&(n[h]=c)}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=o["return"])&&i.call(o)}finally{if(r)throw r.error}}return this.toolTipForBar(n)},t.prototype.onComboLineClick=function(t,e,a){var r,i,n={},o=0;try{for(var s=C(Object.entries(t)),l=s.next();!l.done;l=s.next()){var h=D(l.value,2),c=h[0],d=h[1];0!=o&&1!=o||"color"!=c&&(n[c]=d),1==a?c==this.data[0][2]&&(n[c]=d):c==e.column&&(n[c]=d),o++}}catch(u){r={error:u}}finally{try{l&&!l.done&&(i=s["return"])&&i.call(s)}finally{if(r)throw r.error}}this.comboLineClick(n)},t.prototype.formLegendData=function(t){var o=this;if(this.keyArray=[],this.legendArray=[],t.forEach(function(t,e){0==e&&t.forEach(function(t,e){0<e&&(o.legendArray[t]={data:[]},o.keyArray.push(t))})}),t.forEach(function(i,t){if(0<t){var n={};i.forEach(function(t,e){if(0<=e){var a=o.keyArray[e-1];n[a]=i[e];var r=o.legendArray[a];r&&r.data.push({label:i[0],value:i[e]})}})}}),this.legends=[],this.keyArray.forEach(function(t,e){var a=o.legendArray[t],r={label:t,color:o.predefinedcolors[e],data:a.data};o.legends.push(r)}),0<this.lineInput.length){var a=1;this.lineInput.forEach(function(t){var e={};e.label=t.column,t.color?e.color=t.color:(e.color=o.predefinedcolors[o.legendcolorindex+a],a++),e.data=[],o.legends.push(e)}),this.legends,this.transformeddata,this.legends.forEach(function(a){o.lineInput.forEach(function(t){t.column==a.label&&o.transformeddata.forEach(function(t){var e={};e.label=t[Object.keys(t)[0]],e.value=t[a.label],a.data.push(e)})})})}if(1==this.sc4&&2<this.data[0].length){var e=[];e.label=this.data[0][2],e.color=this.predefinedcolors[2],e.data=[],this.legends.push(e),this.data.forEach(function(t,e){if(0<e){var a=[];a.label=t[0],a.value=t[2],o.legends[1].data.push(a)}})}},t.prototype.legendClick=function(t){var e={};e.label=t.label;var a=[];t.data.forEach(function(t){var e={};e[t.label]=t.value,a.push(e)}),e.data=a,this.onLegendClick.emit(e)},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-combochart",template:' \n<div #chartId *ngIf="drillableFlag" (window:resize)="validateresize()">\n    <table *ngIf="data.length > 0" style="width: 100%;">\n      <tr *ngIf = "title.length > 0">\n          <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n      </tr>\n      <tr>\n          <td>\n              <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n              </svg>\n          </td>\n      </tr>\n      <tr *ngIf="legend">\n          <td style="display: block; padding: 5px;">\n              <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" [data]="legends" style="height:100%;">\n              </amexio-d3-legend> \n          </td>\n      </tr>\n    </table>\n    <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div>\n    </div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],lineColor:[{type:n.Input,args:["line-color"]}],label:[{type:n.Input}],horizontal:[{type:n.Input}],barwidth:[{type:n.Input}],lineInput:[{type:n.Input,args:["line-data-index"]}],barInput:[{type:n.Input,args:["bar-data-index"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],showzeroflag:[{type:n.Input,args:["show-zero-values"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}]},t}(s),b=function(i){function t(t,e,a){var r=i.call(this,"histogram")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=400,r.color="blue",r.datahisto=[],r.values=[],r.array=[],r.xaxisArray=[],r.yaxisArray=[],r.yaxisData=[],r.histogramarray=[],r.histogramdata=[],r.lengtharray=[],r.arrayofLength=[],r.chartData=[],r.finaldataarray=[],r.tooltipArray=[],r.index=0,r}return o(t,i),t.prototype.ngOnInit=function(){var e,a=this;this.wt=this.svgwidth,this.level<=1&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t,a.httpresponse=t},function(t){},function(){setTimeout(function(){a.datahisto=[],a.datahisto=a.getResponseData(e),a.transformData(),a.plotXaxis(),a.plotYaxis(),a.tooltipData(),a.dataforChart(),a.transformData1(a.finaldataarray),a.plotChart()},0)}):this.datahisto&&setTimeout(function(){a.datahisto=a.getResponseData(a.datahisto),a.transformData(),a.plotXaxis(),a.plotYaxis(),a.tooltipData(),a.dataforChart(),a.transformData1(a.finaldataarray),a.plotChart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.datahisto=t.getResponseData(t.httpresponse),t.transformData(),t.plotXaxis(),t.plotYaxis(),t.tooltipData(),t.dataforChart(),t.transformData1(t.finaldataarray),t.plotChart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.transformData1=function(t){var e,o=this;this.keyArray=[],this.legendArray=[],t.forEach(function(t,e){0==e&&t.forEach(function(t,e){0<e?(o.legendArray[t]={data:[]},o.keyArray.push(t)):0==e&&(o.xaxis=t)})}),e=[],t.forEach(function(i,t){if(0<t){var n={};i.forEach(function(t,e){if(0<=e){var a=o.keyArray[e-1];n[a]=i[e];var r=o.legendArray[a];r&&r.data.push({value:i[e],label:i[0]})}}),e.push(n)}}),this.data=[],e.forEach(function(t){o.data.push(t)}),this.legends=[];var a=this.datahisto[0],r={label:a[1]+" of "+a[0],color:this.color};this.legends.push(r)},t.prototype.plotChart=function(){var t,a=this,r=this.toolTip(w);this.data,t=w.stack().keys(this.keyArray).offset(w.stackOffsetDiverging)(this.data);var e,i=0;e=[],(e=t).forEach(function(t){t.forEach(function(t){var e=[];e.push(t.data.tooltipdata[i]),t.push(e)}),i++});var n=[];for(i=0;i<e.length-1;i++)n.push(e[i]);0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var o,s,l=20,h=20,c=50,d=60,u=this.svgwidth-d-h,p=this.svgheight-l-c;this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",u+d+h).attr("height",p+l+c).append("g").attr("transform","translate("+d+","+l+")");var f=u/this.chartData.length;o=w.scalePoint().domain(this.xaxisArray,function(t){return t}).rangeRound([0,u]),(s=w.scaleLinear().rangeRound([p,0])).domain([0,w.max(this.arrayofLength)]);w.scaleOrdinal(w.schemeCategory10);this.arrayofLength=[],1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+p+")").call(w.axisBottom(o)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+p+")").call(w.axisBottom(o)):this.svg.append("g").attr("transform","translate(0,"+p+")").call(w.axisBottom(o)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start");this.svg.append("g").call(w.axisLeft(s).ticks(this.tickscount)),this.plotLine(this.svg,o,s,p,u);var g=this.svg.append("g").selectAll("g").data(n).enter().append("g").attr("fill",this.color).selectAll("rect").data(function(t){return t}),y=this.svg.append("g").selectAll("g").data(n).enter().append("g").selectAll("labels").data(function(t){return t});g.enter().append("rect").attr("width",f-1).attr("y",function(t,e){return s(t[1])}).attr("cursor","pointer").attr("height",function(t,e){return Math.abs(s(t[0])-s(t[1]-.05))}).attr("transform",function(t,e){return"translate("+[f*e,0]+")"}).on("mouseover",function(t){return r.style("visibility","visible")}).on("mousemove",function(t){var e=t[2];return r.html(a.setKey(e[0])).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return r.style("visibility","hidden")}).on("click",function(t){var e=t[2];return a.histogramClick(e[0]),a.fordrillableClick(a,t,event),r.style("visibility","hidden")}),this.labelflag&&y.enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("fill",function(t){return a.labelcolor&&0<a.labelcolor.length?a.labelcolor:"black"}).attr("y",function(t,e){return s(t[1])}).text(function(t){var e;return(e=t[2][0])?e.value:null}).attr("transform",function(t,e){return"translate("+[f*e+f/2,Math.abs(s(t[0])-s(t[1]-.05))]+")"}).on("mouseover",function(t){return r.style("visibility","visible")}).on("mousemove",function(t){var e=t[2];return r.html(a.setKey(e[0])).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return r.style("visibility","hidden")}).on("click",function(t){var e=t[2];return a.histogramClick(e[0]),a.fordrillableClick(a,t,event),r.style("visibility","hidden")}).attr("cursor","pointer")},t.prototype.histogramClick=function(t){var e={},a=this.datahisto[0],r=a[1],i=a[0];t.label.length&&(e[i+":"]=t.label,e[r+":"]=t.value),this.chartClick(e)},t.prototype.legendClick=function(t){this.onLegendClick.emit(this.datahisto)},t.prototype.transformData=function(){var e=this;this.array=[],this.values=[],this.datahisto.forEach(function(t){e.values.push(t[1])});for(var t=1;t<this.values.length;t++)this.array.push(this.values[t])},t.prototype.plotXaxis=function(){this.xaxisArray=[],this.xaxisArray.push(0);for(var t=0,e=Math.ceil(w.max(this.array)),a=(e=e%10==0?e:10-e%10+e)/5;t<e;)t+=a,this.xaxisArray.push(t)},t.prototype.plotYaxis=function(){var a=this,r=0,i=0,t=0,e=0;this.yaxisArray=[],this.histogramarray=[],this.lengtharray=[],this.histogramdata=[],this.arrayofLength=[],this.chartData=[],this.xaxisArray.forEach(function(e){a.yaxisArray=[],a.array.forEach(function(t){r<t&&t<=e&&a.yaxisArray.push(t),i=a.yaxisArray.length}),t=i<t?t:i,r=e,a.lengtharray.push(i)});for(var n=Math.ceil(t),o=n/5;e<=n;)e+=o,this.yaxisData.push(e);for(var s=1;s<this.histogramarray.length;s++)this.histogramdata.push(this.histogramarray[s]);for(s=1;s<this.lengtharray.length;s++)this.arrayofLength.push(this.lengtharray[s]);for(s=0;s<this.arrayofLength.length;s++){var l={};l.value=this.arrayofLength[s],this.chartData.push(l)}this.array=[]},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.transformData(),this.plotXaxis(),this.plotYaxis(),this.tooltipData(),this.dataforChart(),this.transformData1(this.finaldataarray),this.plotChart()},t.prototype.dataforChart=function(){this.finaldataarray=[];var t=[],e=[];t.push("level");for(var a=Math.max.apply(null,this.arrayofLength),r=a,i=1;i<=a;)t.push(""+i),i++;t.push("tooltipdata");this.arrayofLength.length;var n=0;this.finaldataarray.push(t);for(var o=0;o<this.arrayofLength.length;o++){var s=this.arrayofLength[o],l=s;if((e=[]).push(""+o),a=r,0<s){for(;0!=s;)e.push(1),s--;for(a-=l;0!=a;)e.push(0),a--}else for(;0!=a;)e.push(0),a--;e.push(this.tooltipArray[n]),this.finaldataarray.push(e),n++}},t.prototype.tooltipData=function(){var e=[],a={label:"",value:""};this.datahisto.forEach(function(t){(a={label:"",value:""}).label=t[0],a.value=t[1],e.push(a)});for(var r=this.xaxisArray[0],i=[],t=function(t){i=[];var a=n.xaxisArray[t];e.forEach(function(t){if(r<=t.value&&t.value<=a){var e={label:"",value:""};e.label=t.label,e.value=t.value,i.push(e)}}),n.tooltipArray.push(i),r=a},n=this,o=1;o<this.xaxisArray.length;o++)t(o)},t.prototype.setKey=function(t){var e={},a=this.datahisto[0],r=a[1];return e[a[0]+":"]=t.label,e[r+":"]=t.value,this.toolTipForBar(e)},t.prototype.plotLine=function(t,e,a,r,i){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-histogram",template:'<div #chartId *ngIf="drillableFlag" (window:resize)="validateresize()">\n    <table *ngIf="datahisto.length > 0" style="width: 100%;">\n        <tr *ngIf="title.length > 0">\n            <td colspan="2" style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n        </tr>\n        <tr>\n            <td>\n                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf="legend">\n            <td style="display: block; padding: 5px;">\n                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" [data]="legends" style="height:100%;"></amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    <div *ngIf="datahisto.length < 1" class="lmask" style="padding-top:50%">\n        </div>\n</div>',styles:[".bar{background-color:#3943cf;padding:.02px}"]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],color:[{type:n.Input,args:["color"]}],datahisto:[{type:n.Input,args:["data"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}]},t}(s),x=function(i){function t(t,e,a){var r=i.call(this,"scatter")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=300,r.color="blue",r.zoomflag=!1,r.zoominitiated=!1,r.keyArray=[],r.transformeddata=[],r.legendarray=[],r.resizebtnflag=!1,r}return o(t,i),t.prototype.ngOnInit=function(){var e,a=this;(this.wt=this.svgwidth,this.dataFormatted=[],this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t,a.httpresponse=e},function(t){},function(){setTimeout(function(){a.data=a.getResponseData(e),a.dataFormatted=a.data,a.transformData(a.dataFormatted),a.colorGeneration(),a.legendCreation(),a.plotScatterChart()},0)}):this.data&&setTimeout(function(){a.dataFormatted=a.data,a.data=a.getResponseData(a.data),a.transformData(a.data),a.colorGeneration(),a.legendCreation(),a.plotScatterChart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.dataFormatted=t.data,t.transformData(t.data),t.colorGeneration(),t.legendCreation(),t.plotScatterChart()},0)},t.prototype.transformData=function(t){var r=this;this.keyArray=t[0],t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}}),this.data=this.transformeddata},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotScatterChart=function(){var e=this;0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var a,r,i=this.toolTip(w),t=20,n=20,o=30,s=60,l=this.svgwidth-s-n,h=this.svgheight-t-o;a=w.scaleLinear().rangeRound([0,l]),r=w.scaleLinear().rangeRound([h,0]);var c=w.axisBottom(a),d=w.axisLeft(r).ticks(this.tickscount);(this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",l+s+n).attr("height",h+t+o).append("g").attr("transform","translate("+s+","+t+")"),a.domain([0,w.max(this.data,function(t){return t[Object.keys(t)[0]]})]),r.domain([0,w.max(this.data,function(t){return t[Object.keys(t)[1]]})]),1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+h+")").call(c).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+h+")").call(c).append("text").attr("y",0).attr("x",9).attr("dy",".35em").style("text-anchor","start"):this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+h+")").call(c).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").attr("class","y axis").call(d).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end"),2==this.dataFormatted[0].length?(this.plotLine(this.svg,a,r,h,l),this.node=this.svg.selectAll(".dot").data(this.data).enter().append("circle").attr("class","dot").attr("fill",this.color).attr("r",4.5).attr("cursor","pointer").attr("cx",function(t){return a(t[Object.keys(t)[0]])}).attr("cy",function(t){return r(t[Object.keys(t)[1]])}).on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.scatterChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}),this.labelflag&&(this.nodelabel=this.svg.selectAll("labels").data(this.data).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("vertical-align","middle").attr("margin-top",t).attr("fill",function(t){return 0<e.labelcolor.length?e.labelcolor:"black"}).attr("x",function(t,e){return a(t[Object.keys(t)[0]])+11}).attr("y",function(t,e){return r(t[Object.keys(t)[1]])}).text(function(t){return t[Object.keys(t)[1]]}).attr("cursor","pointer").on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.scatterChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}))):(this.plotLine(this.svg,a,r,h,l),this.node=this.svg.selectAll(".dot").data(this.transformeddata).enter().append("circle").attr("class","dot").attr("r",4.5).attr("cursor","pointer").attr("cx",function(t){return a(t[Object.keys(t)[0]])}).attr("cy",function(t){return r(t[Object.keys(t)[1]])}).attr("fill",function(t){return t[Object.keys(t)[4]]}).on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.scatterChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}),this.labelflag&&(this.nodelabel=this.svg.selectAll("labels").data(this.data).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("vertical-align","middle").attr("margin-top",t).attr("fill",function(t){return 0<e.labelcolor.length?e.labelcolor:"black"}).attr("x",function(t,e){return a(t[Object.keys(t)[0]])+11}).attr("y",function(t,e){return r(t[Object.keys(t)[1]])}).text(function(t){return t[Object.keys(t)[1]]}).attr("cursor","pointer").on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.scatterChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}))),this.zoomflag)&&(this.zoominitiated=!0,w.zoom().on("zoom",this.zoom_actions.bind(this))(this.svg))},t.prototype.togglebtnflag=function(){this.resizebtnflag=!0},t.prototype.zoom_actions=function(){this.node.attr("transform",w.event.transform),this.labelflag&&this.nodelabel.attr("transform",w.event.transform),this.resizebtnflag=!0,this.zoominitiated=!1},t.prototype.resizesvg=function(){this.svg.selectAll("*").remove(),this.plotScatterChart(),this.resizebtnflag=!1},t.prototype.formTooltipData=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}return this.toolTipForBar(r)},t.prototype.scatterChartClick=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!==s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}this.chartClick(r)},t.prototype.legendCreation=function(){var a=this;if(2==this.dataFormatted[0].length){this.legends=[];var t=this.dataFormatted[0],e={label:t[0]+" vs "+t[1],color:this.color};this.legends.push(e)}else this.legends=[],this.legendarray.forEach(function(t){var e={};e.label=t.label,e.color=t.color,a.legends.push(e)})},t.prototype.onScatterLegendClick=function(a){var r=this;2==this.dataFormatted[0].length?this.onLegendClick.emit(this.data):this.legendarray.forEach(function(t){if(a.label==t.label){var e=t.value,c=[];e.forEach(function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!==s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}c.push(r)}),r.legendClick(c)}})},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotScatterChart()},t.prototype.plotLine=function(t,e,a,r,i){this.vScale&&t.append("g").attr("color","lightgrey").attr("transform","translate(0,"+r+")").call(w.axisBottom(e).tickSize(-this.width).tickFormat("")),this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.prototype.colorGeneration=function(){var r=this;this.legendarray=[];for(var i=0,n=this.dataFormatted.map(function(t){return t[2]}).filter(function(t,e,a){return a.indexOf(t)===e}),t=function(e){var a=[],t={label:"",color:"",value:[]};o.transformeddata.forEach(function(t){t[Object.keys(t)[2]]==n[e]&&(t.color=r.predefinedcolors[i],a.push(t))}),t.value=a,t.label=n[e],t.color=o.predefinedcolors[i],o.legendarray.push(t),i++},o=this,e=1;e<n.length;e++)t(e)},t.prototype.formLegendData=function(){var a=this;this.legendData=[],this.legendarray.forEach(function(t){var e={};e.label=t.label,e.color=t.color,a.legendData.push(e)})},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-scatter",template:'<div #chartId  *ngIf="drillableFlag" (window:resize)="validateresize()">\n        <table *ngIf="data.length > 0"  style="width: 100%;">\n            <tr >\n                <td colspan="2" style="font-size: 18px; font-weight: bold; "> {{title}}\n                 <span *ngIf="resizebtnflag">\n               <button  type="reset" class="fa fa-search-minus" style="cursor: pointer; float:right" (click)="resizesvg()">\n               </button>\n               </span>     \n                </td>\n            </tr>\n            <tr>\n                <td>\n                    <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                    </svg>\n                </td>\n            </tr>\n            <tr *ngIf="legend">\n                <td style="display: block; padding: 5px;">\n                    <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onScatterLegendClick($event)" [data]="legends" style="height:100%;"></amexio-d3-legend>\n                </td>\n            </tr>\n        </table>\n        <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n            </div>\n    </div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],color:[{type:n.Input,args:["color"]}],zoomflag:[{type:n.Input,args:["zoom-enable"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}]},t}(s),k=function(i){function t(t,e,a){var r=i.call(this,"areachart")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=350,r.colorarray=[],r.onLegendClick=new n.EventEmitter,r.onTooltipClick=new n.EventEmitter,r.togglelabel=!1,r.margin={},r.keyArray=[],r.transformeddata=[],r.data1=[],r.legendArray=[],r}return o(t,i),t.prototype.ngOnInit=function(){var e=this;this.wt=this.svgwidth,this.togglelabel=!1,this.level<=1&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e.httpresponse=t,e.data=e.getResponseData(t)},function(t){},function(){setTimeout(function(){e.transformData(e.data),e.initAreaChart(),e.plotD3Chart()},0)}):this.data1&&setTimeout(function(){e.transformData(e.data),e.initAreaChart(),e.plotD3Chart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.transformData(t.data),t.initAreaChart(),t.plotD3Chart()},0)},t.prototype.initAreaChart=function(){this.tooltip=this.toolTip(w),0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth)),this.margin={top:30,right:44,bottom:50,left:30},this.width=this.svgwidth-this.margin.left-this.margin.right,this.height=this.svgheight-this.margin.top-this.margin.bottom,this.maximumValue=this.findMaxData(this.data),this.x=w.scalePoint().range([0,this.width]),this.y=w.scaleLinear().rangeRound([this.height,0]),this.areaArray=[],this.areaArray=this.data.map(function(t){return t[Object.keys(t)[0]]}),this.x.domain(this.areaArray),this.y.domain([0,this.maximumValue]),this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.predefinedColors=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]},t.prototype.plotD3Chart=function(){var t;this.formLegendData();var e,a=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");for(1==this.device.IsDesktop()?this.svgwidth<=400?a.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):a.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)):a.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),a.append("g").call(w.axisLeft(this.y).ticks(this.tickscount)),this.plotLine(a,this.x,this.y,this.height,this.width),t=1;t<this.keyArray.length;t++){var r=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.plotAreaChart(r,t,this)}for(e=1;e<this.keyArray.length;e++){r=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");this.PlotLineDot(r,e,this)}},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.PlotLineDot=function(t,a,r){var e=this,i=this.togglelabel,n=w.line().x(function(t){return r.x(t[Object.keys(t)[0]])}).y(function(t){return r.y(t[Object.keys(t)[a]])});t.append("path").data([r.data]).attr("fill","none").attr("stroke",function(t){return 0<e.colorarray.length&&e.colorarray[a-1]?e.colorarray[a-1]:r.predefinedcolors[a]}).attr("stroke-width",1.5).attr("d",n).attr("opacity",.2).attr("transform","translate(0,0)"),t.selectAll("dot").data(r.data).enter().append("circle").attr("opacity",0).attr("fill",function(t){return 0<e.colorarray.length&&e.colorarray[a-1]?e.colorarray[a-1]:r.predefinedcolors[a]}).attr("cx",function(t){return r.x(t[Object.keys(t)[0]])}).attr("cy",function(t){return r.y(t[Object.keys(t)[a]])}).attr("r",4).attr("cursor","pointer").on("mouseover",function(t){return e.formTooltipData(t,a),e.tooltip.style("visibility","visible")}).on("mousemove",function(t){return e.tooltip.html(e.formTooltipData(t,a)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.tooltip.style("visibility","hidden")}).style("opacity",1).on("click",function(t){return e.onAreaTooltipClick(t,a),e.fordrillableClick(e,t,event),e.tooltip.style("visibility","hidden")}).attr("transform","translate(0,0)"),this.labelflag&&t.selectAll("labels").data(r.data).enter().append("text").style("font-weight","bold").attr("text-anchor","middle").attr("fill",function(t){return e.labelcolor&&0<e.labelcolor.length?e.labelcolor:"black"}).attr("x",function(t){return r.x(t[Object.keys(t)[0]])+20}).attr("y",function(t){var e=[Object.keys(t)[a]];return i?r.y(t[e])-5:r.y(t[e])+15}).text(function(t){return t[Object.keys(t)[a]]}).attr("transform","translate(0,0)").attr("cursor","pointer").on("mouseover",function(t){return e.formTooltipData(t,a),e.tooltip.style("visibility","visible")}).on("mousemove",function(t){return e.tooltip.html(e.formTooltipData(t,a)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.tooltip.style("visibility","hidden")}).on("click",function(t){return e.onAreaTooltipClick(t,a),e.fordrillableClick(e,t,event),e.tooltip.style("visibility","hidden")}),this.togglelabel?this.togglelabel=!1:this.togglelabel=!0},t.prototype.plotAreaChart=function(t,a,r){var e=this,i=w.line().x(function(t){var e=[Object.keys(t)[0]];return r.x(t[e])}).y(function(t){var e=[Object.keys(t)[a]];return r.y(t[e])});t.append("path").data([this.data]).style("stroke",function(t){return 0<e.colorarray.length?e.colorarray[a-1]?e.colorarray[a-1]:e.predefinedcolors[a]:e.predefinedColors[a]}).attr("fill","none").style("stroke-width","2px").attr("d",i).attr("transform","translate(0,0)");var n=w.area().x(function(t){var e=[Object.keys(t)[0]];return r.x(t[e])}).y0(this.height).y1(function(t){var e=[Object.keys(t)[a]];return r.y(t[e])});t.append("path").data([this.data]).attr("d",n).attr("transform","translate(0,0)").style("stroke","none").attr("fill",function(t){return 0<e.colorarray.length?e.colorarray[a-1]?e.colorarray[a-1]:e.predefinedcolors[a]:e.predefinedColors[a]}).style("opacity",.5)},t.prototype.onAreaTooltipClick=function(t,e){var a={};a[this.keyArray[0]]=t[Object.keys(t)[0]],a[this.keyArray[e]]=t[Object.keys(t)[e]],this.chartClick(a)},t.prototype.findMaxData=function(t){var c=this,d=[],u=[];return t.forEach(function(t){var e,a,r;try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];s!=c.keyArray[0]&&d.push(l)}}catch(h){a={error:h}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(a)throw a.error}}e=c.findLargestValue(d),u.push(e)}),this.findLargestValue(u)},t.prototype.findLargestValue=function(t){var e,a=0;for(e=0;e<t.length;e++)t[e]>a&&(a=t[e]);return a},t.prototype.transformData=function(t){var r=this;this.transformeddata=[],this.keyArray=t[0],t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}});var e=JSON.parse(JSON.stringify(this.transformeddata));this.data=e},t.prototype.formLegendData=function(){var r=this;this.legendArray=[];var i=0;this.keyArray.forEach(function(t,e){if(0<e){var a={};a.label=t,0<r.colorarray.length&&r.colorarray[i]?a.color=r.colorarray[i]:a.color=r.predefinedColors[i+1],r.legendArray.push(a),i++}})},t.prototype.onAreaLegendClick=function(c){var t={};t.label=c.label;var d=[];this.data.forEach(function(t){try{for(var e=C(Object.entries(t)),a=e.next();!a.done;a=e.next()){var r=D(a.value,2),i=r[0],n=r[1];if(i==c.label){var o={};o[i]=n,d.push(o)}}}catch(h){s={error:h}}finally{try{a&&!a.done&&(l=e["return"])&&l.call(e)}finally{if(s)throw s.error}}var s,l}),t.data=d,this.onLegendClick.emit(t)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.initAreaChart(),this.plotD3Chart()},t.prototype.formTooltipData=function(t,e){var a={};return a[this.keyArray[0]]=t[Object.keys(t)[0]],a[this.keyArray[e]]=t[Object.keys(t)[e]],this.toolTipForBar(a)},t.prototype.plotLine=function(t,e,a,r,i){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.prototype.validateData=function(){if(!this.data)return"lmask"},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-multiarea",template:'\n<div #chartId *ngIf="drillableFlag" #divid (window:resize)="validateresize()">\n<table [ngClass]="validateData()" style="width: 100%;">\n  <tr *ngIf = "title.length > 0">\n      <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n  </tr>\n  <tr>\n      <td>\n          <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n          </svg>\n      </td>\n  </tr>\n  <tr *ngIf="legend" >\n      <td style="display: block; padding: 5px;">\n          <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onAreaLegendClick($event)" [data]="legendArray" style="height:100%;">\n          </amexio-d3-legend>\n      </td>\n  </tr>\n</table>\n\x3c!-- <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div> --\x3e\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],colorarray:[{type:n.Input,args:["color"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],onLegendClick:[{type:n.Output}],onTooltipClick:[{type:n.Output}]},t}(s),I=function(i){function t(t,e,a){var r=i.call(this,"candlestickwaterfallchart")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=300,r.showzeroflag=!0,r.onLegendClick=new n.EventEmitter,r.predefinedColor=[],r.keyArray=[],r.margin={},r.legendArray=[],r}return o(t,i),t.prototype.ngOnInit=function(){var e=this;this.wt=this.svgwidth,this.predefinedColor=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],this.level<=1&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e.httpresponse=t,e.data=e.getResponseData(t)},function(t){},function(){setTimeout(function(){e.transformData(e.data),e.initializeData(),e.plotXYAxis(),e.plotD3Chart()},0)}):this.data&&setTimeout(function(){e.transformData(e.data),e.initializeData(),e.plotXYAxis(),e.plotD3Chart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.transformData(t.data),t.initializeData(),t.plotXYAxis(),t.plotD3Chart()},0)},t.prototype.initializeData=function(){this.tooltip=this.toolTip(w),0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth)),this.margin={top:20,right:30,bottom:50,left:60},this.width=this.svgwidth-this.margin.left-this.margin.right,this.height=this.svgheight-this.margin.top-this.margin.bottom},t.prototype.plotXYAxis=function(){this.x=w.scaleBand().range([0,this.width]),this.y=w.scaleLinear().rangeRound([this.height,0]);var t=this.data.map(function(t){return t[Object.keys(t)[0]]});this.x.domain(t);var e=w.max(this.data,function(t){return t.end});this.y.domain([0,e]),this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)):this.svg.append("g").attr("transform","translate(0,"+this.height+")").call(w.axisBottom(this.x)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").call(w.axisLeft(this.y).ticks(this.tickscount)),this.plotLine(this.svg,this.x,this.y,this.height,this.width)},t.prototype.plotD3Chart=function(){var a=this,t=this.svg.selectAll(".bar").data(this.data).enter().append("g").attr("class",function(t){return"bar "+t["class"]}).attr("transform",function(t){return"translate("+a.x(t[Object.keys(t)[0]])+",0)"});t.append("rect").attr("y",function(t){return a.y(Math.max(t.start,t.end))}).attr("height",function(t){return Math.abs(a.y(t.start)-a.y(t.end))}).attr("width",this.x.bandwidth()).attr("fill",function(t,e){return a.predefinedColor[e]}).attr("cursor","pointer").on("mouseover",function(t){return a.formTooltipData(t),a.tooltip.style("visibility","visible")}).on("mousemove",function(t){return a.tooltip.html(a.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.tooltip.style("visibility","hidden")}).on("click",function(t){return a.onCandlestickClick(t),a.fordrillableClick(a,t,event),a.tooltip.style("visibility","hidden")}),this.labelflag&&t.append("text").style("font-weight","bold").style("font-size","1vw").attr("text-anchor","middle").attr("fill",function(t){return a.labelcolor&&0<a.labelcolor.length?a.labelcolor:"black"}).attr("x",function(t){return a.x.bandwidth()/2}).attr("y",function(t,e){return a.y(Math.max(t.start,t.end))+20}).text(function(t){return a.showzeroflag?t[Object.keys(t)[1]]:!a.showzeroflag&&0<t[Object.keys(t)[1]]?t[Object.keys(t)[1]]:void 0}).attr("cursor","pointer").on("mouseover",function(t){return a.formTooltipData(t),a.tooltip.style("visibility","visible")}).on("mousemove",function(t){return a.tooltip.html(a.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return a.tooltip.style("visibility","hidden")}).on("click",function(t){return a.onCandlestickClick(t),a.fordrillableClick(a,t,event),a.tooltip.style("visibility","hidden")})},t.prototype.plotLine=function(t,e,a,r,i){this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.prototype.transformData=function(t){var r=this;this.transformeddata=[],this.keyArray=[],this.keyArray=t[0],t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}}),this.data=this.transformeddata,this.addDataKeys(),this.formLegendData()},t.prototype.addDataKeys=function(){for(var t=0,e=0;e<this.data.length;e++)this.data[e].start=t,t+=this.data[e][this.keyArray[1]],this.data[e].end=t,this.data[e]["class"]=0<=this.data[e][this.keyArray[1]]?"positive":"negative"},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.formTooltipData=function(t){var e={};return e[this.keyArray[0]]=t[Object.keys(t)[0]],e[this.keyArray[1]]=t[Object.keys(t)[1]],this.toolTipForBar(e)},t.prototype.onCandlestickClick=function(t){var e={};e[this.keyArray[0]]=t[Object.keys(t)[0]],e[this.keyArray[1]]=t[Object.keys(t)[1]],this.chartClick(e)},t.prototype.formLegendData=function(){var d=this;this.legendArray=[],this.data.forEach(function(t,e){try{for(var a=C(Object.entries(t)),r=a.next();!r.done;r=a.next()){var i=D(r.value,2),n=i[0],o=i[1];if(n==d.keyArray[0]){var s={};s.label=o,s.color=d.predefinedColor[e],d.legendArray.push(s)}}}catch(c){l={error:c}}finally{try{r&&!r.done&&(h=a["return"])&&h.call(a)}finally{if(l)throw l.error}}var l,h})},t.prototype.onCandlestickLegendClick=function(s){var l={};this.data.forEach(function(t){try{for(var e=C(Object.entries(t)),a=e.next();!a.done;a=e.next()){var r=D(a.value,2);r[0];r[1]==s.label&&(l[s.label]=t[Object.keys(t)[1]])}}catch(o){i={error:o}}finally{try{a&&!a.done&&(n=e["return"])&&n.call(e)}finally{if(i)throw i.error}}var i,n}),this.onLegendClick.emit(l)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.initializeData(),this.plotXYAxis(),this.plotD3Chart()},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-waterfall",template:'\n<div #chartId *ngIf="drillableFlag"  (window:resize)="validateresize()" >\n<table *ngIf="data.length > 0" style="width: 100%;" >\n  <tr *ngIf = "title.length > 0">\n      <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n  </tr>\n  <tr>\n      <td>\n          <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n          </svg>\n      </td>\n  </tr>\n  <tr *ngIf="legend">\n      <td style="display: block; padding: 5px;">\n          <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onCandlestickLegendClick($event)" [data]="legendArray" style="height:100%;">\n          </amexio-d3-legend>\n      </td>\n  </tr>\n</table>\n<div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div>\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],data:[{type:n.Input}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],showzeroflag:[{type:n.Input,args:["show-zero-values"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],onLegendClick:[{type:n.Output}]},t}(s),A=function(i){function t(t,e,a){var r=i.call(this,"bubble")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=300,r.color="blue",r.zoomflag=!1,r.zoominitiated=!1,r.keyArray=[],r.transformeddata=[],r.colors=[],r.xaxisArray=[],r.xarray=[],r.legends=[],r.legendarray=[],r.resizebtnflag=!1,r.legendData=[],r.minxvalue=0,r.maxxvalue=0,r.bubblechartdata=[],r.predefinedcolors=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],r}return o(t,i),t.prototype.ngOnInit=function(){var e,a=this;(this.wt=this.svgwidth,this.data1=[],this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t,a.httpresponse=e},function(t){},function(){setTimeout(function(){a.data=a.getResponseData(e),a.data1=a.data,a.xaxisData(),a.transformData(a.data1),a.transformdata(),a.colorGeneration(),a.formLegendData(),a.plotBubbleChart()},0)}):this.data&&setTimeout(function(){a.data1=a.data,a.data=a.getResponseData(a.data),a.xaxisData(),a.transformData(a.data),a.transformdata(),a.colorGeneration(),a.formLegendData(),a.plotBubbleChart()},0))},t.prototype.fetchData=function(t){var e,a=this,r=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,r):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a.httpresponse=t},function(t){},function(){setTimeout(function(){a.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.data=t.getResponseData(t.httpresponse),t.data1=t.data,t.xaxisData(),t.transformData(t.data1),t.transformdata(),t.colorGeneration(),t.formLegendData(),t.plotBubbleChart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.transformData=function(t){var r=this;this.colordata=[],this.keyArray=t[0],t.forEach(function(t,e){if(0<e){var a={};t.forEach(function(t,e){a[r.keyArray[e]]=t}),r.transformeddata.push(a)}}),this.data=this.transformeddata,this.colordata=this.transformeddata},t.prototype.plotBubbleChart=function(){var e=this;this.predefinedcolors;0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var a,r,i=this.toolTip(w),t=20,n=60,o=50,s=60,l=this.svgwidth-s-n,h=this.svgheight-t-o;a=w.scaleLinear().rangeRound([0,l]),r=w.scaleLinear().rangeRound([h,0]);var c=w.axisBottom(a).ticks(this.xtickscount),d=w.axisLeft(r).ticks(this.tickscount);this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",l+s+n).attr("height",h+t+o).append("g").attr("transform","translate("+s+","+t+")"),r.domain([0,w.max(this.data,function(t){return t[Object.keys(t)[2]]})]),a.domain([this.minxvalue,this.maxxvalue]);var u=w.scaleSqrt().rangeRound([6,30]);(u.domain([w.min(this.data,function(t){return t[Object.keys(t)[4]]}),w.max(this.data,function(t,e){return t[Object.keys(t)[4]]})]),1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+h+")").call(c).append("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+h+")").call(c).append("text").attr("y",0).attr("x",9).attr("dy",".35em").style("text-anchor","start"):this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+h+")").call(c).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"),this.svg.append("g").attr("class","y axis").call(d).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end"),this.plotLine(this.svg,a,r,h,l),this.node=this.svg.selectAll(".dot").data(this.bubblechartdata).enter().append("circle").attr("class","dot").attr("r",function(t){return u(t[Object.keys(t)[4]])}).attr("cursor","pointer").attr("cx",function(t){return a(t[Object.keys(t)[1]])}).attr("cy",function(t){return r(t[Object.keys(t)[2]])}).attr("fill",function(t){return t[Object.keys(t)[5]]}).attr("opacity",.7).on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.bubbleChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")}),this.labelflag&&(this.nodelabel=this.svg.selectAll("labels").data(this.bubblechartdata).enter().append("text").style("font-weight","bold").style("font-size",function(t){return u(t[Object.keys(t)[4]])-4}).attr("text-anchor","middle").attr("fill",function(t){return e.labelcolor&&0<e.labelcolor.length?e.labelcolor:"black"}).attr("x",function(t){return a(t[Object.keys(t)[1]])}).attr("y",function(t){return r(t[Object.keys(t)[2]])}).text(function(t){return t[Object.keys(t)[0]]}).attr("cursor","pointer").on("mouseover",function(t){return i.style("visibility","visible")}).on("mousemove",function(t){return i.html(e.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return i.style("visibility","hidden")}).on("click",function(t){return e.bubbleChartClick(t),e.fordrillableClick(e,t,event),i.style("visibility","hidden")})),this.zoomflag)&&(this.zoominitiated=!0,w.zoom().on("zoom",this.zoom_actions.bind(this))(this.svg))},t.prototype.togglebtnflag=function(){this.resizebtnflag=!0},t.prototype.zoom_actions=function(){this.node.attr("transform",w.event.transform),this.labelflag&&this.nodelabel.attr("transform",w.event.transform),this.resizebtnflag=!0,this.zoominitiated=!1},t.prototype.resizesvg=function(){this.svg.selectAll("*").remove(),this.plotBubbleChart(),this.resizebtnflag=!1},t.prototype.formTooltipData=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!=s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}return this.toolTipForBar(r)},t.prototype.bubbleChartClick=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!==s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}this.chartClick(r)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotBubbleChart()},t.prototype.xaxisData=function(){var e=[];this.minxvalue=0,this.maxxvalue=0,this.xaxisArray=[],this.xarray=[],this.data1.forEach(function(t){e.push(t[1])});for(var t=1;t<e.length;t++)this.xaxisArray.push(e[t]);var a=Math.floor(w.min(this.xaxisArray)),r=Math.ceil(w.max(this.xaxisArray));this.minxvalue=5*Math.floor(Math.abs(a/5)),this.maxxvalue=5*Math.ceil(Math.abs(r/5))},t.prototype.colorGeneration=function(){var r=this;this.legendarray=[];for(var i=0,n=this.data1.map(function(t){return t[3]}).filter(function(t,e,a){return a.indexOf(t)===e}),t=function(e){var a=[],t={label:"",color:"",value:[]};o.colordata.forEach(function(t){t[Object.keys(t)[3]]==n[e]&&(t.color=r.predefinedcolors[i],a.push(t))}),t.value=a,t.label=n[e],t.color=o.predefinedcolors[i],o.legendarray.push(t),i++},o=this,e=1;e<n.length;e++)t(e)},t.prototype.formLegendData=function(){var a=this;this.legendData=[],this.legendarray.forEach(function(t){var e={};e.label=t.label,e.color=t.color,a.legendData.push(e)})},t.prototype.onBubbleLegendClick=function(e){var a=this;this.legendarray.forEach(function(t){var h={},c=[];e.label==t.label&&(t.value.forEach(function(t){try{for(var e=C(Object.entries(t)),a=e.next();!a.done;a=e.next()){var r=D(a.value,2),i=r[0],n=r[1];"color"!==i&&(h[i]=n)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(s=e["return"])&&s.call(e)}finally{if(o)throw o.error}}var o,s;c.push(h)}),a.legendClick(c))})},t.prototype.plotLine=function(t,e,a,r,i){this.vScale&&t.append("g").attr("color","lightgrey").attr("transform","translate(0,"+r+")").call(w.axisBottom(e).tickSize(-this.width).tickFormat("").ticks(this.xtickscount)),this.hScale&&t.append("g").attr("color","lightgrey").call(w.axisLeft(a).tickSize(-i).tickFormat("").ticks(this.tickscount))},t.prototype.transformdata=function(){var a=this;this.bubblechartdata=[];var r=[];this.colordata.forEach(function(t,e){r.push(t[Object.keys(t)[4]])});for(var i=r.sort(function(t,e){return e-t}),t=function(e){n.colordata.forEach(function(t){i[e]==t[Object.keys(t)[4]]&&a.bubblechartdata.push(t)})},n=this,e=0;e<=i.length;e++)t(e)},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-bubble",template:'<div #chartId *ngIf="drillableFlag" (window:resize)="validateresize()">\n    <table *ngIf="data.length > 0" style="width: 100%;">\n        <tr>\n            <td colspan="2" style="font-size: 18px; font-weight: bold; "> {{title}}\n                <span *ngIf="resizebtnflag">\n                    <button type="reset" class="fa fa-search-minus" style="cursor: pointer; float:right" (click)="resizesvg()">\n                    </button>\n                </span>\n            </td>\n            <td></td>\n        </tr>\n        <tr>\n            <td>\n                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf="legend">\n            <td style="display: block; padding: 5px;">\n                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onBubbleLegendClick($event)" [data]="legendData"\n                    style="height:100%;"></amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    <div *ngIf="data.length < 1" class="lmask" style="padding-top:50%">\n    </div>\n</div>',styles:[""]}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],color:[{type:n.Input,args:["color"]}],zoomflag:[{type:n.Input,args:["zoom-enable"]}],tickscount:[{type:n.Input,args:["yaxis-interval"]}],xtickscount:[{type:n.Input,args:["xaxis-interval"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}]},t}(s),z=function(i){function t(t,e,a){var r=i.call(this,"timeline")||this;return r.myservice=t,r.cdf=e,r.device=a,r.svgheight=200,r.level=0,r.drillabledatakey=[],r.labelcolor="black",r.labelflag=!1,r.lanes=[],r.timelinechartData=[],r.drillableFlag=!0,r.resizeflag=!1,r.monthlist=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],r}return o(t,i),t.prototype.ngOnInit=function(){var e,t=this;(this.wt=this.svgwidth,this.level<=1)&&(this.httpmethod&&this.httpurl?this.myservice.fetchUrlData(this.httpurl,this.httpmethod).subscribe(function(t){e=t},function(t){},function(){setTimeout(function(){t.data=t.getResponseData(e),t.transformTODate(t.data),t.transformData(t.urldata),t.plotChart()},0)}):this.data&&setTimeout(function(){t.data=t.getResponseData(t.data),t.transformData(t.data),t.plotChart()},0))},t.prototype.fetchData=function(t){var e,a,r=this,i=this.drillabledatakey;this.drillabledatakey.length?e=this.getMultipleDrillbleKeyData(t,i):e=t;this.httpmethod&&this.httpurl&&this.myservice.postfetchData(this.httpurl,this.httpmethod,e).subscribe(function(t){a=t},function(t){},function(){setTimeout(function(){r.data=r.getResponseData(a),r.drawChart()},0)})},t.prototype.drawChart=function(){var t=this;setTimeout(function(){t.transformTODate(t.data),t.transformData(t.urldata),t.plotChart()},0)},t.prototype.getResponseData=function(t){var e,a,r=t;if(null!=this.datareader){var i=this.datareader.split(".");try{for(var n=C(i),o=n.next();!o.done;o=n.next()){r=r[o.value]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(e)throw e.error}}}else r=t;return r},t.prototype.plotChart=function(){var a=this,t=this.lanes.length,e=this.toolTip(w);0==this.resizeflag&&(this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth));var r,i,n=[20,25,15,120],o=this.svgwidth-n[1]-n[3],s=this.svgheight-n[0]-n[2],l=12*t+50,h=s-l-50;i=this.httpurl&&this.httpmethod?(r=this.urldata[0][1].getFullYear(),this.urldata[this.urldata.length-1][2].getFullYear()):(r=this.data[0][1].getFullYear(),this.data[this.data.length-1][2].getFullYear());var c=w.scaleTime().domain([this.mindate,this.maxdate]).range([0,o]),d=w.scaleLinear().domain([r,i]).range([n[3],o+n[3]]),u=w.scaleLinear().domain([0,t]).range([0,l]);this.svg=w.select("#"+this.componentId).attr("viewBox","0 0 "+this.svgwidth+" "+this.svgheight).attr("width",o+n[1]+n[3]).attr("height",s+n[0]+n[2]),1==this.device.IsDesktop()?this.svgwidth<=400?this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(d).ticks(this.xtickscount)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start"):this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(d).ticks(this.xtickscount)):this.svg.append("g").attr("transform","translate(0,"+s+")").call(w.axisBottom(d).ticks(this.xtickscount)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(60)").style("text-anchor","start");var p=this.svg.append("g").attr("transform","translate("+n[3]+","+(h+n[0])+")").attr("width",o).attr("height",h).attr("class","mini");p.append("g").selectAll(".laneLines").data(this.timelinechartData).enter().append("line").attr("y1",function(t){return u(t.lane)}).attr("x2",o).attr("y2",function(t){return u(t.lane)}).attr("stroke","lightgray"),p.append("g").selectAll(".laneText").data(this.lanes).enter().append("text").text(function(t){return t}).attr("x",-n[1]).attr("y",function(t,e){return u(e+.5)}).attr("dy",".5ex").attr("text-anchor","end").attr("class","laneText"),p.append("g").selectAll("miniItems").data(this.timelinechartData).enter().append("rect").attr("class",function(t){return"miniItem"+t.lane}).attr("fill",function(t,e){return a.predefinedcolors[e]}).attr("x",function(t){return c(t.start)}).attr("y",function(t){return u(t.lane+.5)-5}).attr("width",function(t){return Math.abs(c(t.end)-c(t.start))}).attr("height",20).attr("cursor","pointer").on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.timelineChartClick(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")});var f=this.monthlist;this.labelflag&&p.append("g").selectAll(".miniLabels").data(this.timelinechartData).enter().append("text").style("font-weight","bold").attr("fill",function(t){return 0<a.labelcolor.length?a.labelcolor:"black"}).style("font-size",function(t){return Math.min(Math.abs(c(t.end)-c(t.start)))/20+"px"}).text(function(t){if(t.id){var e=t.start.getFullYear(),a=f[t.start.getMonth()],r=t.end.getFullYear();return a+" "+e+"-"+f[t.end.getMonth()]+" "+r}}).attr("x",function(t){return c(t.start)}).attr("y",function(t){return u(t.lane+.5)}).attr("dy","1.2ex").attr("dx","9ex").attr("cursor","pointer").on("mouseover",function(t){return e.style("visibility","visible")}).on("mousemove",function(t){return e.html(a.formTooltipData(t)).style("top",w.event.pageY-10+"px").style("left",w.event.pageX+10+"px")}).on("mouseout",function(t){return e.style("visibility","hidden")}).on("click",function(t){return a.timelineChartClick(t),a.fordrillableClick(a,t,event),e.style("visibility","hidden")})},t.prototype.formTooltipData=function(t){var e={},a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],r=t.start.getFullYear(),i=a[t.start.getMonth()],n=t.end.getFullYear(),o=i+" "+r+"-"+a[t.end.getMonth()]+" "+n;return e["Name:"]=t.id,e["Duration:"]=o,this.toolTipForBar(e)},t.prototype.transformTODate=function(t){var i=this;this.urldata=[],t.forEach(function(t){var e=[],a=new Date(t[1]),r=new Date(t[2]);e.push(t[0]),e.push(a),e.push(r),i.urldata.push(e)})},t.prototype.transformData=function(t){var s=this;this.lanes=[],this.timelinechartData=[],this.legends=[];var e=t.length-1,a=t.length;this.mindate=t[0][1],this.maxdate=t[e][2];var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];t.forEach(function(t,e){var a={lane:"",id:"",start:"",end:""};s.lanes.push(t[0]),a.lane=e,a.id=t[0],a.start=t[1],a.end=t[2],s.timelinechartData.push(a)}),this.timelinechartData.forEach(function(t,e){var a=t.start.getFullYear(),r=l[t.start.getMonth()],i=t.end.getFullYear(),n=r+" "+a+"-"+l[t.end.getMonth()]+" "+i,o={label:s.lanes[e],color:s.predefinedcolors[e],Duration:n};s.legends.push(o)});var r={lane:"",id:"",start:"",end:""};r.lane=a,this.timelinechartData.push(r)},t.prototype.timelineChartClick=function(t){var e={},a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],r=t.start.getFullYear(),i=a[t.start.getMonth()],n=t.end.getFullYear(),o=i+" "+r+"-"+a[t.end.getMonth()]+" "+n;e.Name=t.id,e.Duration=o,this.chartClick(e)},t.prototype.validateresize=function(){var t=this;setTimeout(function(){t.wt||t.resize()},0)},t.prototype.resize=function(){this.svg.selectAll("*").remove(),this.resizeflag=!0,this.wt?this.svgwidth=this.wt:this.chartId&&(this.svgwidth=this.chartId.nativeElement.offsetWidth),this.cdf.detectChanges(),this.plotChart()},t.prototype.timelinelegendClick=function(t){var e,a,r={};try{for(var i=C(Object.entries(t)),n=i.next();!n.done;n=i.next()){var o=D(n.value,2),s=o[0],l=o[1];"color"!==s&&(r[s]=l)}}catch(h){e={error:h}}finally{try{n&&!n.done&&(a=i["return"])&&a.call(i)}finally{if(e)throw e.error}}this.onLegendClick.emit(r)},t.decorators=[{type:n.Component,args:[{selector:"amexio-d3-chart-timeline",template:'\n<div  #chartId *ngIf="drillableFlag"  (window:resize)="validateresize()" >\n    <table style="width: 100%;" position=" relative">\n        <tr *ngIf = "title.length > 0">\n            <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>\n        </tr>\n        <tr>\n            <td>\n                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId" \n              >\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf="legend">\n            <td style="display: block; padding: 5px;">\n                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="timelinelegendClick($event)" [data]="legends" style="height:100%;">\n                </amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    </div>'}]}],t.ctorParameters=function(){return[{type:l},{type:n.ChangeDetectorRef},{type:h}]},t.propDecorators={data:[{type:n.Input,args:["data"]}],chartId:[{type:n.ViewChild,args:["chartId"]}],divid:[{type:n.ViewChild,args:["divid"]}],svgwidth:[{type:n.Input,args:["width"]}],svgheight:[{type:n.Input,args:["height"]}],datareader:[{type:n.Input,args:["data-reader"]}],level:[{type:n.Input,args:["level"]}],target:[{type:n.Input,args:["target"]}],drillabledatakey:[{type:n.Input,args:["drillable-data"]}],labelcolor:[{type:n.Input,args:["label-color"]}],labelflag:[{type:n.Input,args:["label"]}],xtickscount:[{type:n.Input,args:["xaxis-interval"]}]},t}(s),O=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){return this.getComponentData()},t.prototype.getComponentData=function(){return this.chartInputArray=[],this.barchartinput=this.queryBarchartinput.toArray(),this.groupbarchartinput=this.QueryGroupbarchartinput.toArray(),this.linechartinput=this.QueryLinechartinput.toArray(),this.donutchartinput=this.QueryDonutchartinput.toArray(),this.piechartinput=this.QueryPiechartinput.toArray(),this.barstackchartinput=this.QueryBarStackchartinput.toArray(),this.combochartinput=this.QueryCombochartinput.toArray(),this.histogramchartinput=this.QueryHistogramchartinput.toArray(),this.scatterchartinput=this.QuerySatterchartinput.toArray(),this.multiareachartinput=this.QueryMultiareachartinput.toArray(),this.candlestickchartinput=this.QueryCandlestickchartinput.toArray(),this.bubblechartinput=this.QueryBubblechartinput.toArray(),this.timelinechartinput=this.QueryTimechartinput.toArray(),this.chartInputArray=this.chartInputArray.concat(this.barchartinput,this.groupbarchartinput,this.linechartinput,this.donutchartinput,this.piechartinput,this.barstackchartinput,this.combochartinput,this.histogramchartinput,this.scatterchartinput,this.multiareachartinput,this.candlestickchartinput,this.bubblechartinput,this.timelinechartinput),this.chartInputArray},t.propDecorators={queryBarchartinput:[{type:n.ContentChildren,args:[p,{descendants:!0}]}],QueryGroupbarchartinput:[{type:n.ContentChildren,args:[v,{descendants:!0}]}],QueryLinechartinput:[{type:n.ContentChildren,args:[g,{descendants:!0}]}],QueryPiechartinput:[{type:n.ContentChildren,args:[d,{descendants:!0}]}],QueryDonutchartinput:[{type:n.ContentChildren,args:[c,{descendants:!0}]}],QueryBarStackchartinput:[{type:n.ContentChildren,args:[y,{descendants:!0}]}],QueryCombochartinput:[{type:n.ContentChildren,args:[m,{descendants:!0}]}],QueryHistogramchartinput:[{type:n.ContentChildren,args:[b,{descendants:!0}]}],QuerySatterchartinput:[{type:n.ContentChildren,args:[x,{descendants:!0}]}],QueryMultiareachartinput:[{type:n.ContentChildren,args:[k,{descendants:!0}]}],QueryCandlestickchartinput:[{type:n.ContentChildren,args:[I,{descendants:!0}]}],QueryBubblechartinput:[{type:n.ContentChildren,args:[A,{descendants:!0}]}],QueryTimechartinput:[{type:n.ContentChildren,args:[z,{descendants:!0}]}]},t}(),L=function(e){function t(){var t=e.call(this)||this;return t.mouseLocation={left:0,top:0},t.componentcounter=1,t.disableFlag=!1,t}return o(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){this.ComponentDataArray=this.getComponentData(),this.getData(this.ComponentDataArray)},t.prototype.getData=function(t){var e=this;t.forEach(function(t){1!==t.level?(t.drillableFlag=!1,t.drillableEvent.subscribe(function(t){e.hideUI(t),e.sameLevelChart(t),e.ShowUI(t)})):(e.disableFlag=!1,t.drillableEvent.subscribe(function(t){e.hideUI(t),e.sameLevelChart(t),e.ShowUI(t)}))})},t.prototype.hideUI=function(e){this.ComponentDataArray.forEach(function(t){t.level==e.ref.level&&(e.ref.drillableFlag=!1)})},t.prototype.ShowUI=function(e){var a=this;this.eventData=[],this.eventData=e,this.ComponentDataArray.forEach(function(t){e.ref.target==t.level&&(1==a.arrayofsameLevel.length?(a.disableFlag=!0,t.drillableFlag=!0,t.fetchData(e.node),a.componentcounter=t.level):(a.contextmenuFlag=!0,a.mouseLocation.left=e.event.clientX,a.mouseLocation.top=e.event.clientY,a.contextStyle=a.getContextMenuStyle()))}),this.componentcounter==e.ref.level&&(e.ref.drillableFlag=!0)},t.prototype.previouschartClick=function(t){var e=this,a=this.componentcounter-1;this.ComponentDataArray.forEach(function(t){a==t.level?(t.drillableFlag=!0,t.drawChart()):e.componentcounter==t.level&&(t.drillableFlag=!1)}),2==this.componentcounter&&(this.disableFlag=!1),this.componentcounter=a},t.prototype.sameLevelChart=function(e){var a=this;this.arrayofsameLevel=[],this.ComponentDataArray.forEach(function(t){e.ref.target==t.level&&(a.arrayofsameLevel=a.arrayofsameLevel.concat(t))})},t.prototype.getContextMenuStyle=function(){return{cursor:"default",position:"fixed",display:this.contextmenuFlag?"block":"none",left:this.mouseLocation.left+"px",top:this.mouseLocation.top+"px","box-shadow":"1px 1px 2px #000000",width:"15%"}},t.prototype.getListPosition=function(t){return window.screen.height-t.getBoundingClientRect().bottom<240},t.prototype.onContextNodeClick=function(t){this.componentcounter=0,this.contextmenuFlag=!1,this.eventData.ref.drillableFlag=!1,this.disableFlag=!0,t.drillableFlag=!0,t.fetchData(this.eventData.node),this.componentcounter=t.level,this.componentcounter==this.eventData.ref.level&&(this.eventData.ref.drillableFlag=!0)},t.prototype.onCloseClick=function(){this.contextmenuFlag=!1},t.decorators=[{type:n.Component,args:[{selector:"amexio-drillable",template:'\n<div > \n    <ng-container *ngIf="disableFlag">\n            <button type="button" class="button"\n             (click)="previouschartClick($event)">\n             <i class="fa fa-arrow-left"></i> \n             \n            </button>\n</ng-container>\n\n<ng-content></ng-content>\n\n</div>\n\n<span [ngStyle]="contextStyle" >\n  <ul *ngIf="contextmenuFlag" class="close-thik" class="context-menu-list"  >\n    <span (click)="onCloseClick()" class="close"><i class="fa fa-close"></i></span>\n  <li (click)="onContextNodeClick(itemConfig)" class="context-menu-list-items" \n  *ngFor="let itemConfig of arrayofsameLevel">\n  <em [ngStyle]="{\'padding-left\': itemConfig.icon ? \'5px\':\'19px\'}"></em>\n  <span style="white-space: nowrap;display: inline ; padding-left:5px">{{itemConfig.title}}\n  </span>\n  </li>\n  </ul>\n  </span>\n  ',styles:['.button{position:relative;border:1px solid #555;font-weight:400;color:#000;padding:.5rem 1rem;text-align:center;transition-duration:.4s;text-decoration:none;overflow:hidden;cursor:pointer;border-radius:3px}.button:after{content:"";background:#000;display:block;position:absolute;padding-top:300%;padding-left:350%;margin-left:-20px!important;margin-top:-120%;opacity:0;transition:.8s}.button:active:after{padding:0;margin:0;opacity:1;transition:none}.context-menu-list{display:block;position:absolute;flex-direction:column;min-width:180px;cursor:pointer;max-height:150px;z-index:1;padding:10px 0;overflow-y:auto;background-color:#fff!important;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.context-menu-list .context-menu-list-items{text-decoration:none;font-size:14px!important;padding:5px;display:block}.close{float:right;padding-right:8px;cursor:pointer}']}]}],t.ctorParameters=function(){return[]},t}(O),E=[u,c,p,d,g,y,v,m,L,b,k,x,I,A,z],T=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.FormsModule,a.CommonModule],declarations:E,providers:[h],exports:E}]}],t}();t.AmexioChartD3Module=T,t.DeviceQueryService=h,t.AmexioD3DounutChartComponent=c,t.AmexioD3PieChartComponent=d,t.AmexioD3BarChartComponent=p,t.AmexioD3LineComponent=g,t.BarstackComponent=y,t.GroupbarComponent=v,t.a=E,t.c=s,t.h=O,t.m=A,t.l=I,t.f=m,t.g=L,t.i=b,t.b=u,t.e=f,t.k=k,t.j=x,t.d=l,t.n=z,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=amexio-chart-d3.umd.min.js.map