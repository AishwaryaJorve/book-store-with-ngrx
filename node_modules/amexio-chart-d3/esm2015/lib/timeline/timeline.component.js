/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, ChangeDetectorRef, } from "@angular/core";
import { AmexioD3BaseChartComponent } from "../base/base.component";
import * as d3 from 'd3';
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
export class AmexioD3TimelineChartComponent extends AmexioD3BaseChartComponent {
    /**
     * @param {?} myservice
     * @param {?} cdf
     * @param {?} device
     */
    constructor(myservice, cdf, device) {
        super('timeline');
        this.myservice = myservice;
        this.cdf = cdf;
        this.device = device;
        this.svgheight = 200;
        this.level = 0;
        this.drillabledatakey = [];
        this.labelcolor = "black";
        this.labelflag = false;
        this.lanes = [];
        this.timelinechartData = [];
        this.drillableFlag = true;
        this.resizeflag = false;
        this.monthlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.wt = this.svgwidth;
        if (this.level <= 1) {
            /** @type {?} */
            let resp;
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((/**
                 * @param {?} response
                 * @return {?}
                 */
                (response) => {
                    resp = response;
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                (error) => {
                }), (/**
                 * @return {?}
                 */
                () => {
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        this.data = this.getResponseData(resp);
                        this.transformTODate(this.data);
                        this.transformData(this.urldata);
                        this.plotChart();
                    }), 0);
                }));
            }
            else if (this.data) {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.data = this.getResponseData(this.data);
                    this.transformData(this.data);
                    this.plotChart();
                }), 0);
            }
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    fetchData(data) {
        /** @type {?} */
        let requestJson;
        /** @type {?} */
        let key = this.drillabledatakey;
        /** @type {?} */
        let resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            let drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            (response) => {
                resp = response;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
            }), (/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.data = this.getResponseData(resp);
                    this.drawChart();
                }), 0);
            }));
        }
    }
    /**
     * @return {?}
     */
    drawChart() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.transformTODate(this.data);
            this.transformData(this.urldata);
            this.plotChart();
        }), 0);
    }
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    getResponseData(httpResponse) {
        /** @type {?} */
        let responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            const dr = this.datareader.split('.');
            for (const ir of dr) {
                responsedata = responsedata[ir];
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
    }
    /**
     * @return {?}
     */
    plotChart() {
        /** @type {?} */
        let laneLength = this.lanes.length;
        /** @type {?} */
        const tooltip = this.toolTip(d3);
        if (this.resizeflag == false) {
            //RESIZE STEP 1
            if (this.wt) {
                this.svgwidth = this.wt;
            }
            else if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            //RESIZE STEP 1 ENDS HERE 
        }
        /** @type {?} */
        let m = [20, 25, 15, 120];
        /** @type {?} */
        let //top right bottom left
        width = this.svgwidth - m[1] - m[3];
        /** @type {?} */
        let height = this.svgheight - m[0] - m[2];
        /** @type {?} */
        let miniHeight = laneLength * 12 + 50;
        /** @type {?} */
        let mainHeight = height - miniHeight - 50;
        /** @type {?} */
        let mindate;
        /** @type {?} */
        let maxdate;
        /** @type {?} */
        let barheight = 20;
        if (this.httpurl && this.httpmethod) {
            mindate = this.urldata[0][1].getFullYear(),
                maxdate = this.urldata[this.urldata.length - 1][2].getFullYear();
        }
        else {
            mindate = this.data[0][1].getFullYear(),
                maxdate = this.data[this.data.length - 1][2].getFullYear();
        }
        /** @type {?} */
        let x = d3.scaleTime()
            .domain([this.mindate, this.maxdate])
            .range([0, width]);
        /** @type {?} */
        let x1 = d3.scaleLinear()
            .domain([mindate, maxdate])
            .range([m[3], width + m[3]]);
        /** @type {?} */
        let y1 = d3.scaleLinear()
            .domain([0, laneLength])
            .range([0, miniHeight]);
        this.svg = d3.select("#" + this.componentId)
            .attr('viewBox', '0 0 ' + this.svgwidth + ' ' + this.svgheight)
            .attr("width", width + m[1] + m[3])
            .attr("height", height + m[0] + m[2]);
        if (this.device.IsDesktop() == true) {
            if (this.svgwidth <= 400) {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x1).ticks(this.xtickscount)).
                    selectAll("text")
                    .attr("y", 0)
                    .attr("x", 9)
                    .attr("dy", ".35em")
                    .attr("transform", "rotate(60)")
                    .style("text-anchor", "start");
            }
            else {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x1).ticks(this.xtickscount));
            }
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x1).ticks(this.xtickscount)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        /** @type {?} */
        let mini = this.svg.append("g")
            .attr("transform", "translate(" + m[3] + "," + (mainHeight + m[0]) + ")")
            .attr("width", width)
            .attr("height", mainHeight)
            .attr("class", "mini");
        //mini lanes and texts
        mini.append("g").selectAll(".laneLines")
            .data(this.timelinechartData)
            .enter().append("line")
            .attr("y1", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return y1(d.lane); }))
            .attr("x2", width)
            .attr("y2", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return y1(d.lane); }))
            .attr("stroke", "lightgray");
        mini.append("g").selectAll(".laneText")
            .data(this.lanes)
            .enter().append("text")
            .text((/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return d; }))
            .attr("x", -m[1])
            .attr("y", (/**
         * @param {?} d
         * @param {?} i
         * @return {?}
         */
        (d, i) => { return y1(i + .5); }))
            .attr("dy", ".5ex")
            .attr("text-anchor", "end")
            .attr("class", "laneText");
        //mini item rects
        mini.append("g").selectAll("miniItems")
            .data(this.timelinechartData)
            .enter().append("rect")
            .attr("class", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return "miniItem" + d.lane; }))
            .attr("fill", (/**
         * @param {?} d
         * @param {?} index
         * @return {?}
         */
        (d, index) => { return this.predefinedcolors[index]; }))
            .attr("x", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return x(d.start); }))
            .attr("y", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => { return (y1(d.lane + .5) - 5); }))
            .attr("width", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            return Math.abs(x(d.end) - x(d.start));
        }))
            .attr("height", barheight)
            .attr("cursor", "pointer")
            .on("mouseover", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            return tooltip.style("visibility", "visible");
        }))
            .on("mousemove", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            return tooltip.html(this.formTooltipData(d)
            //  this.toolTipForBar(d)
            // this.toolTipContent(d)
            )
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        }))
            .on("mouseout", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            return tooltip.style("visibility", "hidden");
        }))
            .on("click", (/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            this.timelineChartClick(d);
            this.fordrillableClick(this, d, event);
            return tooltip.style("visibility", "hidden");
        }));
        /** @type {?} */
        let barwidth;
        //mini labels
        /** @type {?} */
        let monthlist1 = this.monthlist;
        if (this.labelflag) {
            mini.append("g").selectAll(".miniLabels")
                .data(this.timelinechartData)
                .enter().append("text")
                .style("font-weight", "bold")
                .attr("fill", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                if (this.labelcolor.length > 0) {
                    return this.labelcolor;
                }
                else {
                    return "black";
                }
            }))
                .style("font-size", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                barwidth = Math.min(Math.abs(x(d.end) - x(d.start)));
                return barwidth / 20 + "px";
            }))
                .text((/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                if (d.id) {
                    /** @type {?} */
                    let startfullyear = d.start.getFullYear();
                    /** @type {?} */
                    let startMonth = monthlist1[d.start.getMonth()];
                    /** @type {?} */
                    let endfullyear = d.end.getFullYear();
                    /** @type {?} */
                    let endMonth = monthlist1[d.end.getMonth()];
                    /** @type {?} */
                    let date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
                    return date;
                }
            }))
                .attr("x", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                return x(d.start);
            }))
                .attr("y", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => { return y1(d.lane + .5); }))
                .attr("dy", "1.2ex")
                .attr("dx", "9ex")
                .attr("cursor", "pointer")
                .on("mouseover", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                return tooltip.style("visibility", "visible");
            }))
                .on("mousemove", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                return tooltip.html(this.formTooltipData(d)
                //  this.toolTipForBar(d)
                // this.toolTipContent(d)
                )
                    .style("top", (d3.event.pageY - 10) + "px")
                    .style("left", (d3.event.pageX + 10) + "px");
            }))
                .on("mouseout", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                return tooltip.style("visibility", "hidden");
            }))
                .on("click", (/**
             * @param {?} d
             * @return {?}
             */
            (d) => {
                this.timelineChartClick(d);
                this.fordrillableClick(this, d, event);
                return tooltip.style("visibility", "hidden");
            }));
        }
    }
    /**
     * @param {?} tooltipData
     * @return {?}
     */
    formTooltipData(tooltipData) {
        /** @type {?} */
        let object = {};
        /** @type {?} */
        let mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        /** @type {?} */
        let label1 = "Duration";
        /** @type {?} */
        let label2 = "Name";
        /** @type {?} */
        let startfullyear = tooltipData.start.getFullYear();
        /** @type {?} */
        let startMonth = mlist[tooltipData.start.getMonth()];
        /** @type {?} */
        let endfullyear = tooltipData.end.getFullYear();
        /** @type {?} */
        let endMonth = mlist[tooltipData.end.getMonth()];
        /** @type {?} */
        let date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
        object[label2 + ":"] = tooltipData.id;
        object[label1 + ":"] = date;
        return this.toolTipForBar(object);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    transformTODate(data) {
        this.urldata = [];
        data.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            /** @type {?} */
            let dataobj = [];
            /** @type {?} */
            let startdate = new Date(element[1]);
            /** @type {?} */
            let enddate = new Date(element[2]);
            dataobj.push(element[0]);
            dataobj.push(startdate);
            dataobj.push(enddate);
            this.urldata.push(dataobj);
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    transformData(data) {
        this.lanes = [];
        this.timelinechartData = [];
        this.legends = [];
        /** @type {?} */
        let datalength = data.length - 1;
        /** @type {?} */
        let length = data.length;
        this.mindate = data[0][1];
        this.maxdate = data[datalength][2];
        /** @type {?} */
        let mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        data.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        (element, i) => {
            /** @type {?} */
            let dataObj = { "lane": "", "id": "", "start": "", "end": "" };
            this.lanes.push(element[0]);
            dataObj["lane"] = i;
            dataObj["id"] = element[0];
            dataObj["start"] = element[1];
            dataObj["end"] = element[2];
            this.timelinechartData.push(dataObj);
        }));
        this.timelinechartData.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        (element, i) => {
            /** @type {?} */
            let startfullyear = element.start.getFullYear();
            /** @type {?} */
            let startMonth = mlist[element.start.getMonth()];
            /** @type {?} */
            let endfullyear = element.end.getFullYear();
            /** @type {?} */
            let endMonth = mlist[element.end.getMonth()];
            /** @type {?} */
            let date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
            /** @type {?} */
            let object = { 'label': this.lanes[i], 'color': this.predefinedcolors[i], 'Duration': date };
            this.legends.push(object);
        }));
        /** @type {?} */
        let Obj = { "lane": "", "id": "", "start": "", "end": "" };
        Obj["lane"] = length;
        this.timelinechartData.push(Obj);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    timelineChartClick(event) {
        /** @type {?} */
        let object = {};
        /** @type {?} */
        let mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        /** @type {?} */
        let startfullyear = event.start.getFullYear();
        /** @type {?} */
        let startMonth = mlist[event.start.getMonth()];
        /** @type {?} */
        let endfullyear = event.end.getFullYear();
        /** @type {?} */
        let endMonth = mlist[event.end.getMonth()];
        /** @type {?} */
        let date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
        object["Name"] = event.id;
        object["Duration"] = date;
        this.chartClick(object);
    }
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    validateresize() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            if (this.wt) {
            }
            else {
                this.resize();
            }
        }), 0);
    }
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    resize() {
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        if (this.wt) {
            this.svgwidth = this.wt;
        }
        else if (this.chartId) {
            // this.resizewt = this.chartId.nativeElement.offsetWidth;
            // console.log("", new Date().getTime(), " ", this.resizewt);
            this.svgwidth = this.chartId.nativeElement.offsetWidth;
        }
        this.cdf.detectChanges();
        this.plotChart();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    timelinelegendClick(event) {
        /** @type {?} */
        let obj = {};
        for (let [key, value] of Object.entries(event)) {
            if (key !== 'color') {
                obj[key] = value;
            }
        }
        this.onLegendClick.emit(obj);
    }
}
AmexioD3TimelineChartComponent.decorators = [
    { type: Component, args: [{
                selector: 'amexio-d3-chart-timeline',
                template: `
<div  #chartId *ngIf="drillableFlag"  (window:resize)="validateresize()" >
    <table style="width: 100%;" position=" relative">
        <tr *ngIf = "title.length > 0">
            <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>
        </tr>
        <tr>
            <td>
                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId" 
              >
                </svg>
            </td>
        </tr>
        <tr *ngIf="legend">
            <td style="display: block; padding: 5px;">
                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="timelinelegendClick($event)" [data]="legends" style="height:100%;">
                </amexio-d3-legend>
            </td>
        </tr>
    </table>
    </div>`
            },] },
];
AmexioD3TimelineChartComponent.ctorParameters = () => [
    { type: CommanDataService },
    { type: ChangeDetectorRef },
    { type: DeviceQueryService }
];
AmexioD3TimelineChartComponent.propDecorators = {
    data: [{ type: Input, args: ['data',] }],
    chartId: [{ type: ViewChild, args: ['chartId',] }],
    divid: [{ type: ViewChild, args: ['divid',] }],
    svgwidth: [{ type: Input, args: ['width',] }],
    svgheight: [{ type: Input, args: ['height',] }],
    datareader: [{ type: Input, args: ['data-reader',] }],
    level: [{ type: Input, args: ['level',] }],
    target: [{ type: Input, args: ['target',] }],
    drillabledatakey: [{ type: Input, args: ['drillable-data',] }],
    labelcolor: [{ type: Input, args: ['label-color',] }],
    labelflag: [{ type: Input, args: ['label',] }],
    xtickscount: [{ type: Input, args: ['xaxis-interval',] }]
};
if (false) {
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.data;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.chartId;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.divid;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svgwidth;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svgheight;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.datareader;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.level;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.target;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.drillabledatakey;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.labelcolor;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.labelflag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.xtickscount;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.lanes;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.timelinechartData;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.mindate;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.maxdate;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.legends;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.drillableFlag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.resizeflag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svg;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.urldata;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.monthlist;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.wt;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.myservice;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.cdf;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZWxpbmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW1leGlvLWNoYXJ0LWQzLyIsInNvdXJjZXMiOlsibGliL3RpbWVsaW5lL3RpbWVsaW5lLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsR0FBRyxNQUFNLGVBQWUsQ0FBQztBQUM1RixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNwRSxPQUFPLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQztBQUN6QixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNwRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQTJCdEUsTUFBTSxxQ0FBc0MsU0FBUSwwQkFBMEI7Ozs7OztJQTBCMUUsWUFBb0IsU0FBNEIsRUFBVSxHQUFzQixFQUFVLE1BQTBCO1FBQ2hILEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQURGLGNBQVMsR0FBVCxTQUFTLENBQW1CO1FBQVUsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFvQjtRQXBCbkcsY0FBUyxHQUFXLEdBQUcsQ0FBQztRQUV6QixVQUFLLEdBQVcsQ0FBQyxDQUFDO1FBRVQscUJBQWdCLEdBQVUsRUFBRSxDQUFDO1FBQ2hDLGVBQVUsR0FBVyxPQUFPLENBQUM7UUFDbkMsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUczQyxVQUFLLEdBQVUsRUFBRSxDQUFDO1FBQ2xCLHNCQUFpQixHQUFVLEVBQUUsQ0FBQztRQUk5QixrQkFBYSxHQUFZLElBQUksQ0FBQztRQUM5QixlQUFVLEdBQVksS0FBSyxDQUFDO1FBRzVCLGNBQVMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFL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Qzs7SUFDakMsbURBQXlDOztJQUN6QyxvREFBeUM7O0lBQ3pDLCtDQUFrQzs7SUFDbEMsZ0RBQWdDOztJQUNoQywwREFBc0Q7O0lBQ3RELG9EQUFtRDs7SUFDbkQsbURBQTJDOztJQUMzQyxxREFBNkM7O0lBRTdDLCtDQUFrQjs7SUFDbEIsMkRBQThCOztJQUM5QixpREFBYTs7SUFDYixpREFBYTs7SUFDYixpREFBYTs7SUFDYix1REFBOEI7O0lBQzlCLG9EQUE0Qjs7SUFDNUIsNkNBQVM7O0lBQ1QsaURBQWE7O0lBQ2IsbURBQWtHOztJQUNsRyw0Q0FBVzs7Ozs7SUFDQyxtREFBb0M7Ozs7O0lBQUUsNkNBQThCOzs7OztJQUFFLGdEQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS5jb21wb25lbnRcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IENvbW1hbkRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29tbWFuLmRhdGEuc2VydmljZSc7XG5pbXBvcnQgeyBEZXZpY2VRdWVyeVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9kZXZpY2UucXVlcnkuc2VydmljZSc7XG5cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhbWV4aW8tZDMtY2hhcnQtdGltZWxpbmUnLFxuICAgIHRlbXBsYXRlOiBgXG48ZGl2ICAjY2hhcnRJZCAqbmdJZj1cImRyaWxsYWJsZUZsYWdcIiAgKHdpbmRvdzpyZXNpemUpPVwidmFsaWRhdGVyZXNpemUoKVwiID5cbiAgICA8dGFibGUgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIiBwb3NpdGlvbj1cIiByZWxhdGl2ZVwiPlxuICAgICAgICA8dHIgKm5nSWYgPSBcInRpdGxlLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cImZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IFwiPiB7e3RpdGxlfX0gPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgIDxzdmcgW2F0dHIuaGVpZ2h0XT1cInN2Z2hlaWdodFwiIFthdHRyLndpZHRoXT1cInN2Z3dpZHRoXCIgW2F0dHIuaWRdPVwiY29tcG9uZW50SWRcIiBcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgPHRyICpuZ0lmPVwibGVnZW5kXCI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgcGFkZGluZzogNXB4O1wiPlxuICAgICAgICAgICAgICAgIDxhbWV4aW8tZDMtbGVnZW5kICpuZ0lmPVwibGVnZW5kXCIgW2hvcml6b250YWxdPVwidHJ1ZVwiIChvbkNsaWNrKT1cInRpbWVsaW5lbGVnZW5kQ2xpY2soJGV2ZW50KVwiIFtkYXRhXT1cImxlZ2VuZHNcIiBzdHlsZT1cImhlaWdodDoxMDAlO1wiPlxuICAgICAgICAgICAgICAgIDwvYW1leGlvLWQzLWxlZ2VuZD5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgPC90YWJsZT5cbiAgICA8L2Rpdj5gXG59KVxuZXhwb3J0IGNsYXNzIEFtZXhpb0QzVGltZWxpbmVDaGFydENvbXBvbmVudCBleHRlbmRzIEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IHtcblxuICAgIEBJbnB1dCgnZGF0YScpIGRhdGE6IGFueTtcbiAgICBAVmlld0NoaWxkKCdjaGFydElkJykgY2hhcnRJZDogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKCdkaXZpZCcpIGRpdmlkOiBFbGVtZW50UmVmO1xuICAgIEBJbnB1dCgnd2lkdGgnKSBzdmd3aWR0aDogbnVtYmVyO1xuICAgIEBJbnB1dCgnaGVpZ2h0Jykgc3ZnaGVpZ2h0OiBudW1iZXIgPSAyMDA7XG4gICAgQElucHV0KCdkYXRhLXJlYWRlcicpIGRhdGFyZWFkZXI6IHN0cmluZztcbiAgICBASW5wdXQoJ2xldmVsJykgbGV2ZWw6IG51bWJlciA9IDA7XG4gICAgQElucHV0KCd0YXJnZXQnKSB0YXJnZXQ6IG51bWJlcjtcbiAgICBASW5wdXQoJ2RyaWxsYWJsZS1kYXRhJykgZHJpbGxhYmxlZGF0YWtleTogYW55W10gPSBbXTtcbiAgICBASW5wdXQoJ2xhYmVsLWNvbG9yJykgbGFiZWxjb2xvcjogc3RyaW5nID0gXCJibGFja1wiO1xuICAgIEBJbnB1dCgnbGFiZWwnKSBsYWJlbGZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBASW5wdXQoJ3hheGlzLWludGVydmFsJykgeHRpY2tzY291bnQ6IG51bWJlcjtcblxuICAgIGxhbmVzOiBhbnlbXSA9IFtdO1xuICAgIHRpbWVsaW5lY2hhcnREYXRhOiBhbnlbXSA9IFtdO1xuICAgIG1pbmRhdGU6IGFueTtcbiAgICBtYXhkYXRlOiBhbnk7XG4gICAgbGVnZW5kczogYW55O1xuICAgIGRyaWxsYWJsZUZsYWc6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHJlc2l6ZWZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzdmc6IGFueTtcbiAgICB1cmxkYXRhOiBhbnk7XG4gICAgbW9udGhsaXN0ID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwdFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXTtcbiAgICB3dDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbXlzZXJ2aWNlOiBDb21tYW5EYXRhU2VydmljZSwgcHJpdmF0ZSBjZGY6IENoYW5nZURldGVjdG9yUmVmLCBwcml2YXRlIGRldmljZTogRGV2aWNlUXVlcnlTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCd0aW1lbGluZScpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnd0ID0gdGhpcy5zdmd3aWR0aDtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWwgPD0gMSkge1xuICAgICAgICAgICAgbGV0IHJlc3A6IGFueTtcbiAgICAgICAgICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5teXNlcnZpY2UuZmV0Y2hVcmxEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kKS5zdWJzY3JpYmUoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3AgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybVRPRGF0ZSh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMudXJsZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsb3RDaGFydCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEpIHtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGEodGhpcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmV0Y2hEYXRhKGRhdGE6IGFueSkge1xuICAgICAgICBsZXQgcmVxdWVzdEpzb247XG4gICAgICAgIGxldCBrZXkgPSB0aGlzLmRyaWxsYWJsZWRhdGFrZXk7XG4gICAgICAgIGxldCByZXNwOiBhbnk7XG4gICAgICAgIGlmICh0aGlzLmRyaWxsYWJsZWRhdGFrZXkubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZHJpbGxhYmxlZGF0YSA9IHRoaXMuZ2V0TXVsdGlwbGVEcmlsbGJsZUtleURhdGEoZGF0YSwga2V5KTtcbiAgICAgICAgICAgIHJlcXVlc3RKc29uID0gZHJpbGxhYmxlZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3RKc29uID0gZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICAgICAgICB0aGlzLm15c2VydmljZS5wb3N0ZmV0Y2hEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kLCByZXF1ZXN0SnNvbikuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3AgPSByZXNwb25zZTtcbiAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnQoKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhd0NoYXJ0KCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtVE9EYXRlKHRoaXMuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGEodGhpcy51cmxkYXRhKTtcbiAgICAgICAgICAgIHRoaXMucGxvdENoYXJ0KCk7XG5cbiAgICAgICAgfSwgMCk7XG5cbiAgICB9XG5cbiAgICBnZXRSZXNwb25zZURhdGEoaHR0cFJlc3BvbnNlOiBhbnkpIHtcbiAgICAgICAgbGV0IHJlc3BvbnNlZGF0YSA9IGh0dHBSZXNwb25zZTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YXJlYWRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBkciA9IHRoaXMuZGF0YXJlYWRlci5zcGxpdCgnLicpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpciBvZiBkcikge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlZGF0YSA9IHJlc3BvbnNlZGF0YVtpcl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlZGF0YTtcbiAgICB9XG5cbiAgICBwbG90Q2hhcnQoKSB7XG4gICAgICAgIGxldCBsYW5lTGVuZ3RoID0gdGhpcy5sYW5lcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnRvb2xUaXAoZDMpO1xuXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZWZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgLy9SRVNJWkUgU1RFUCAxXG4gICAgICBpZiAodGhpcy53dCkge1xuICAgICAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy53dDtcblxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0SWQpIHtcbiAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuXG4gICAgICB9XG4gICAgICAvL1JFU0laRSBTVEVQIDEgRU5EUyBIRVJFIFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG0gPSBbMjAsIDI1LCAxNSwgMTIwXSwgLy90b3AgcmlnaHQgYm90dG9tIGxlZnRcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5zdmd3aWR0aCAtIG1bMV0gLSBtWzNdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5zdmdoZWlnaHQgLSBtWzBdIC0gbVsyXSxcbiAgICAgICAgICAgIG1pbmlIZWlnaHQgPSBsYW5lTGVuZ3RoICogMTIgKyA1MCxcbiAgICAgICAgICAgIG1haW5IZWlnaHQgPSBoZWlnaHQgLSBtaW5pSGVpZ2h0IC0gNTA7XG5cbiAgICAgICAgbGV0IG1pbmRhdGU7XG4gICAgICAgIGxldCBtYXhkYXRlO1xuICAgICAgICBsZXQgYmFyaGVpZ2h0ID0gMjA7XG4gICAgICAgIGlmICh0aGlzLmh0dHB1cmwgJiYgdGhpcy5odHRwbWV0aG9kKSB7XG5cbiAgICAgICAgICAgIG1pbmRhdGUgPSB0aGlzLnVybGRhdGFbMF1bMV0uZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgICAgICBtYXhkYXRlID0gdGhpcy51cmxkYXRhW3RoaXMudXJsZGF0YS5sZW5ndGggLSAxXVsyXS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWluZGF0ZSA9IHRoaXMuZGF0YVswXVsxXS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgIG1heGRhdGUgPSB0aGlzLmRhdGFbdGhpcy5kYXRhLmxlbmd0aCAtIDFdWzJdLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCB4ID0gZDMuc2NhbGVUaW1lKClcbiAgICAgICAgICAgIC5kb21haW4oW3RoaXMubWluZGF0ZSwgdGhpcy5tYXhkYXRlXSlcbiAgICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGhdKTtcblxuXG4gICAgICAgIGxldCB4MSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgICAgIC5kb21haW4oW21pbmRhdGUsIG1heGRhdGVdKVxuICAgICAgICAgICAgLnJhbmdlKFttWzNdLCB3aWR0aCArIG1bM11dKTtcblxuICAgICAgICBsZXQgeTEgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAgICAgICAuZG9tYWluKFswLCBsYW5lTGVuZ3RoXSlcbiAgICAgICAgICAgIC5yYW5nZShbMCwgbWluaUhlaWdodF0pO1xuXG5cbiAgICAgICAgdGhpcy5zdmcgPSBkMy5zZWxlY3QoXCIjXCIgKyB0aGlzLmNvbXBvbmVudElkKVxuICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMuc3Znd2lkdGggKyAnICcgKyB0aGlzLnN2Z2hlaWdodClcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtWzFdICsgbVszXSlcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1bMF0gKyBtWzJdKVxuXG5cbiAgICAgICAgaWYgKHRoaXMuZGV2aWNlLklzRGVza3RvcCgpID09IHRydWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN2Z3dpZHRoIDw9IDQwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeDEpLnRpY2tzKHRoaXMueHRpY2tzY291bnQpKS5cbiAgICAgICAgICAgICAgICAgIHNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAwKVxuICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIDkpXG4gICAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDYwKVwiKVxuICAgICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeDEpLnRpY2tzKHRoaXMueHRpY2tzY291bnQpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgxKS50aWNrcyh0aGlzLnh0aWNrc2NvdW50KSkuXG4gICAgICAgICAgICAgICAgc2VsZWN0QWxsKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAwKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCA5KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDYwKVwiKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWluaSA9IHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbVszXSArIFwiLFwiICsgKG1haW5IZWlnaHQgKyBtWzBdKSArIFwiKVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIG1haW5IZWlnaHQpXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibWluaVwiKTtcblxuICAgICAgICAvL21pbmkgbGFuZXMgYW5kIHRleHRzXG4gICAgICAgIG1pbmkuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCIubGFuZUxpbmVzXCIpXG4gICAgICAgICAgICAuZGF0YSh0aGlzLnRpbWVsaW5lY2hhcnREYXRhKVxuICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAgICAgLy8gLmF0dHIoXCJ4MVwiLCBtWzFdKVxuICAgICAgICAgICAgLmF0dHIoXCJ5MVwiLCAoZCkgPT4geyByZXR1cm4geTEoZC5sYW5lKTsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwieDJcIiwgd2lkdGgpXG4gICAgICAgICAgICAuYXR0cihcInkyXCIsIChkKSA9PiB7IHJldHVybiB5MShkLmxhbmUpOyB9KVxuICAgICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJsaWdodGdyYXlcIik7XG5cblxuICAgICAgICBtaW5pLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiLmxhbmVUZXh0XCIpXG4gICAgICAgICAgICAuZGF0YSh0aGlzLmxhbmVzKVxuICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLnRleHQoKGQpID0+IHsgcmV0dXJuIGQ7IH0pXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLW1bMV0pXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgKGQsIGkpID0+IHsgcmV0dXJuIHkxKGkgKyAuNSk7IH0pXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjVleFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcImVuZFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxhbmVUZXh0XCIpO1xuXG4gICAgICAgIC8vbWluaSBpdGVtIHJlY3RzXG4gICAgICAgIG1pbmkuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJtaW5pSXRlbXNcIilcbiAgICAgICAgICAgIC5kYXRhKHRoaXMudGltZWxpbmVjaGFydERhdGEpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIChkKSA9PiB7IHJldHVybiBcIm1pbmlJdGVtXCIgKyBkLmxhbmU7IH0pXG4gICAgICAgICAgICAuYXR0cihcImZpbGxcIiwgKGQsIGluZGV4KSA9PiB7IHJldHVybiB0aGlzLnByZWRlZmluZWRjb2xvcnNbaW5kZXhdIH0pXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgKGQpID0+IHsgcmV0dXJuIHgoZC5zdGFydCk7IH0pXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgKGQpID0+IHsgcmV0dXJuICh5MShkLmxhbmUgKyAuNSkgLSA1KTsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeChkLmVuZCkgLSB4KGQuc3RhcnQpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBiYXJoZWlnaHQpXG4gICAgICAgICAgICAuYXR0cihcImN1cnNvclwiLCBcInBvaW50ZXJcIilcbiAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKFwibW91c2Vtb3ZlXCIsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuaHRtbChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtVG9vbHRpcERhdGEoZClcbiAgICAgICAgICAgICAgICAgICAgLy8gIHRoaXMudG9vbFRpcEZvckJhcihkKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnRvb2xUaXBDb250ZW50KGQpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZIC0gMTApICsgXCJweFwiKVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkMy5ldmVudC5wYWdlWCArIDEwKSArIFwicHhcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVsaW5lQ2hhcnRDbGljayhkKVxuICAgICAgICAgICAgICAgIHRoaXMuZm9yZHJpbGxhYmxlQ2xpY2sodGhpcywgZCwgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBsZXQgYmFyd2lkdGg7XG5cbiAgICAgICAgLy9taW5pIGxhYmVsc1xuICAgICAgICBsZXQgbW9udGhsaXN0MSA9IHRoaXMubW9udGhsaXN0O1xuICAgICAgICBpZiAodGhpcy5sYWJlbGZsYWcpIHtcbiAgICAgICAgICAgIG1pbmkuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCIubWluaUxhYmVsc1wiKVxuICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMudGltZWxpbmVjaGFydERhdGEpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcImZvbnQtd2VpZ2h0XCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYWJlbGNvbG9yLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJibGFja1wiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJmb250LXNpemVcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYmFyd2lkdGggPSBNYXRoLm1pbihNYXRoLmFicyh4KGQuZW5kKSAtIHgoZC5zdGFydCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFyd2lkdGggLyAyMCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50ZXh0KChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRmdWxseWVhciA9IGQuc3RhcnQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydE1vbnRoID0gbW9udGhsaXN0MVtkLnN0YXJ0LmdldE1vbnRoKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZGZ1bGx5ZWFyID0gZC5lbmQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmRNb250aCA9IG1vbnRobGlzdDFbZC5lbmQuZ2V0TW9udGgoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IHN0YXJ0TW9udGggKyBcIiBcIiArIHN0YXJ0ZnVsbHllYXIgKyBcIi1cIiArIGVuZE1vbnRoICsgXCIgXCIgKyBlbmRmdWxseWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoZC5zdGFydCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgKGQpID0+IHsgcmV0dXJuIHkxKGQubGFuZSArIC41KTsgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiMS4yZXhcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImR4XCIsIFwiOWV4XCIpXG4gICAgICAgICAgICAgICAgLy93cml0ZSBwb2ludGVyIGFuZCBjbGljayBmblxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwibW91c2Vtb3ZlXCIsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLmh0bWwoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1Ub29sdGlwRGF0YShkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHRoaXMudG9vbFRpcEZvckJhcihkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy50b29sVGlwQ29udGVudChkKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZIC0gMTApICsgXCJweFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVggKyAxMCkgKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lbGluZUNoYXJ0Q2xpY2soZClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtVG9vbHRpcERhdGEodG9vbHRpcERhdGE6IGFueSkge1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG5cbiAgICAgICAgbGV0IG1saXN0ID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwdFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXTtcbiAgICAgICAgbGV0IGxhYmVsMSA9IFwiRHVyYXRpb25cIjtcbiAgICAgICAgbGV0IGxhYmVsMiA9IFwiTmFtZVwiO1xuICAgICAgICBsZXQgc3RhcnRmdWxseWVhciA9IHRvb2x0aXBEYXRhLnN0YXJ0LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGxldCBzdGFydE1vbnRoID0gbWxpc3RbdG9vbHRpcERhdGEuc3RhcnQuZ2V0TW9udGgoKV1cbiAgICAgICAgbGV0IGVuZGZ1bGx5ZWFyID0gdG9vbHRpcERhdGEuZW5kLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGxldCBlbmRNb250aCA9IG1saXN0W3Rvb2x0aXBEYXRhLmVuZC5nZXRNb250aCgpXVxuICAgICAgICBsZXQgZGF0ZSA9IHN0YXJ0TW9udGggKyBcIiBcIiArIHN0YXJ0ZnVsbHllYXIgKyBcIi1cIiArIGVuZE1vbnRoICsgXCIgXCIgKyBlbmRmdWxseWVhcjtcblxuICAgICAgICBvYmplY3RbbGFiZWwyICsgXCI6XCJdID0gdG9vbHRpcERhdGEuaWQ7XG4gICAgICAgIG9iamVjdFtsYWJlbDEgKyBcIjpcIl0gPSBkYXRlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnRvb2xUaXBGb3JCYXIob2JqZWN0KTtcblxuICAgIH1cblxuICAgIHRyYW5zZm9ybVRPRGF0ZShkYXRhOiBhbnkpIHtcbiAgICAgICAgdGhpcy51cmxkYXRhID0gW107XG5cbiAgICAgICAgZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgbGV0IGRhdGFvYmogPSBbXTtcbiAgICAgICAgICAgIGxldCBzdGFydGRhdGUgPSBuZXcgRGF0ZShlbGVtZW50WzFdKTtcbiAgICAgICAgICAgIGxldCBlbmRkYXRlID0gbmV3IERhdGUoZWxlbWVudFsyXSlcbiAgICAgICAgICAgIGRhdGFvYmoucHVzaChlbGVtZW50WzBdKTtcbiAgICAgICAgICAgIGRhdGFvYmoucHVzaChzdGFydGRhdGUpO1xuICAgICAgICAgICAgZGF0YW9iai5wdXNoKGVuZGRhdGUpO1xuICAgICAgICAgICAgdGhpcy51cmxkYXRhLnB1c2goZGF0YW9iaik7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJhbnNmb3JtRGF0YShkYXRhOiBhbnkpIHtcbiAgICAgICAgdGhpcy5sYW5lcyA9IFtdO1xuICAgICAgICB0aGlzLnRpbWVsaW5lY2hhcnREYXRhID0gW107XG4gICAgICAgIHRoaXMubGVnZW5kcyA9IFtdO1xuICAgICAgICBsZXQgZGF0YWxlbmd0aCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICB0aGlzLm1pbmRhdGUgPSBkYXRhWzBdWzFdO1xuICAgICAgICB0aGlzLm1heGRhdGUgPSBkYXRhW2RhdGFsZW5ndGhdWzJdO1xuICAgICAgICBsZXQgbWxpc3QgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXB0XCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuXG4gICAgICAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudCwgaSkgPT4ge1xuICAgICAgICAgICAgbGV0IGRhdGFPYmogPSB7IFwibGFuZVwiOiBcIlwiLCBcImlkXCI6IFwiXCIsIFwic3RhcnRcIjogXCJcIiwgXCJlbmRcIjogXCJcIiB9O1xuICAgICAgICAgICAgdGhpcy5sYW5lcy5wdXNoKGVsZW1lbnRbMF0pO1xuICAgICAgICAgICAgZGF0YU9ialtcImxhbmVcIl0gPSBpO1xuICAgICAgICAgICAgZGF0YU9ialtcImlkXCJdID0gZWxlbWVudFswXTtcbiAgICAgICAgICAgIGRhdGFPYmpbXCJzdGFydFwiXSA9IGVsZW1lbnRbMV07XG4gICAgICAgICAgICBkYXRhT2JqW1wiZW5kXCJdID0gZWxlbWVudFsyXTtcbiAgICAgICAgICAgIHRoaXMudGltZWxpbmVjaGFydERhdGEucHVzaChkYXRhT2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50aW1lbGluZWNoYXJ0RGF0YS5mb3JFYWNoKChlbGVtZW50LCBpKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBzdGFydGZ1bGx5ZWFyID0gZWxlbWVudC5zdGFydC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgbGV0IHN0YXJ0TW9udGggPSBtbGlzdFtlbGVtZW50LnN0YXJ0LmdldE1vbnRoKCldXG4gICAgICAgICAgICBsZXQgZW5kZnVsbHllYXIgPSBlbGVtZW50LmVuZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgbGV0IGVuZE1vbnRoID0gbWxpc3RbZWxlbWVudC5lbmQuZ2V0TW9udGgoKV1cbiAgICAgICAgICAgIGxldCBkYXRlID0gc3RhcnRNb250aCArIFwiIFwiICsgc3RhcnRmdWxseWVhciArIFwiLVwiICsgZW5kTW9udGggKyBcIiBcIiArIGVuZGZ1bGx5ZWFyO1xuICAgICAgICAgICAgbGV0IG9iamVjdCA9IHsgJ2xhYmVsJzogdGhpcy5sYW5lc1tpXSwgJ2NvbG9yJzogdGhpcy5wcmVkZWZpbmVkY29sb3JzW2ldLCAnRHVyYXRpb24nOiBkYXRlIH07XG4gICAgICAgICAgICB0aGlzLmxlZ2VuZHMucHVzaChvYmplY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgT2JqID0geyBcImxhbmVcIjogXCJcIiwgXCJpZFwiOiBcIlwiLCBcInN0YXJ0XCI6IFwiXCIsIFwiZW5kXCI6IFwiXCIgfTtcbiAgICAgICAgT2JqW1wibGFuZVwiXSA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy50aW1lbGluZWNoYXJ0RGF0YS5wdXNoKE9iaik7XG4gICAgfVxuXG5cbiAgICB0aW1lbGluZUNoYXJ0Q2xpY2soZXZlbnQ6IGFueSkge1xuICAgICAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgICAgIGxldCBtbGlzdCA9IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcHRcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XG4gICAgICAgIGxldCBzdGFydGZ1bGx5ZWFyID0gZXZlbnQuc3RhcnQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbGV0IHN0YXJ0TW9udGggPSBtbGlzdFtldmVudC5zdGFydC5nZXRNb250aCgpXVxuICAgICAgICBsZXQgZW5kZnVsbHllYXIgPSBldmVudC5lbmQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbGV0IGVuZE1vbnRoID0gbWxpc3RbZXZlbnQuZW5kLmdldE1vbnRoKCldO1xuICAgICAgICBsZXQgZGF0ZSA9IHN0YXJ0TW9udGggKyBcIiBcIiArIHN0YXJ0ZnVsbHllYXIgKyBcIi1cIiArIGVuZE1vbnRoICsgXCIgXCIgKyBlbmRmdWxseWVhcjtcbiAgICAgICAgb2JqZWN0W1wiTmFtZVwiXSA9IGV2ZW50LmlkO1xuICAgICAgICBvYmplY3RbXCJEdXJhdGlvblwiXSA9IGRhdGU7XG4gICAgICAgIHRoaXMuY2hhcnRDbGljayhvYmplY3QpO1xuICAgIH1cblxuICAgIC8vUkVTSVpFIFNURVAgNCBTVEFSVFNcbiAgdmFsaWRhdGVyZXNpemUoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgaWYgKHRoaXMud3QpIHtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgIH1cbiAgICB9LCAwKVxuICB9XG4gIC8vUkVTSVpFIFNURVAgNCBFTkRTXG5cbiAgICByZXNpemUoKSB7XG4gICAgICAgIHRoaXMuc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMucmVzaXplZmxhZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnd0KSB7XG4gICAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMud3Q7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGFydElkKSB7XG4gICAgICAgICAgLy8gdGhpcy5yZXNpemV3dCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiXCIsIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBcIiBcIiwgdGhpcy5yZXNpemV3dCk7XG4gICAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2RmLmRldGVjdENoYW5nZXMoKTsgXG4gICAgICAgIHRoaXMucGxvdENoYXJ0KCk7XG5cbiAgICB9XG4gICAgdGltZWxpbmVsZWdlbmRDbGljayhldmVudDogYW55KSB7XG4gICAgICAgIGxldCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGV2ZW50KSkge1xuICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2NvbG9yJykge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkxlZ2VuZENsaWNrLmVtaXQob2JqKTtcbiAgICB9XG5cbn1cblxuXG5cbiJdfQ==