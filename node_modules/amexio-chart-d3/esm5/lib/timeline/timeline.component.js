/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, ChangeDetectorRef, } from "@angular/core";
import { AmexioD3BaseChartComponent } from "../base/base.component";
import * as d3 from 'd3';
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
var AmexioD3TimelineChartComponent = /** @class */ (function (_super) {
    tslib_1.__extends(AmexioD3TimelineChartComponent, _super);
    function AmexioD3TimelineChartComponent(myservice, cdf, device) {
        var _this = _super.call(this, 'timeline') || this;
        _this.myservice = myservice;
        _this.cdf = cdf;
        _this.device = device;
        _this.svgheight = 200;
        _this.level = 0;
        _this.drillabledatakey = [];
        _this.labelcolor = "black";
        _this.labelflag = false;
        _this.lanes = [];
        _this.timelinechartData = [];
        _this.drillableFlag = true;
        _this.resizeflag = false;
        _this.monthlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        return _this;
    }
    /**
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.wt = this.svgwidth;
        if (this.level <= 1) {
            /** @type {?} */
            var resp_1;
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((/**
                 * @param {?} response
                 * @return {?}
                 */
                function (response) {
                    resp_1 = response;
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                }), (/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.data = _this.getResponseData(resp_1);
                        _this.transformTODate(_this.data);
                        _this.transformData(_this.urldata);
                        _this.plotChart();
                    }), 0);
                }));
            }
            else if (this.data) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.data = _this.getResponseData(_this.data);
                    _this.transformData(_this.data);
                    _this.plotChart();
                }), 0);
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.fetchData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var requestJson;
        /** @type {?} */
        var key = this.drillabledatakey;
        /** @type {?} */
        var resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            var drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                resp = response;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
            }), (/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.data = _this.getResponseData(resp);
                    _this.drawChart();
                }), 0);
            }));
        }
    };
    /**
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.drawChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.transformTODate(_this.data);
            _this.transformData(_this.urldata);
            _this.plotChart();
        }), 0);
    };
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.getResponseData = /**
     * @param {?} httpResponse
     * @return {?}
     */
    function (httpResponse) {
        /** @type {?} */
        var responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            var dr = this.datareader.split('.');
            try {
                for (var dr_1 = tslib_1.__values(dr), dr_1_1 = dr_1.next(); !dr_1_1.done; dr_1_1 = dr_1.next()) {
                    var ir = dr_1_1.value;
                    responsedata = responsedata[ir];
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (dr_1_1 && !dr_1_1.done && (_a = dr_1.return)) _a.call(dr_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
        var e_1, _a;
    };
    /**
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.plotChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var laneLength = this.lanes.length;
        /** @type {?} */
        var tooltip = this.toolTip(d3);
        if (this.resizeflag == false) {
            //RESIZE STEP 1
            if (this.wt) {
                this.svgwidth = this.wt;
            }
            else if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            //RESIZE STEP 1 ENDS HERE 
        }
        /** @type {?} */
        var m = [20, 25, 15, 120];
        /** @type {?} */
        var //top right bottom left
        width = this.svgwidth - m[1] - m[3];
        /** @type {?} */
        var height = this.svgheight - m[0] - m[2];
        /** @type {?} */
        var miniHeight = laneLength * 12 + 50;
        /** @type {?} */
        var mainHeight = height - miniHeight - 50;
        /** @type {?} */
        var mindate;
        /** @type {?} */
        var maxdate;
        /** @type {?} */
        var barheight = 20;
        if (this.httpurl && this.httpmethod) {
            mindate = this.urldata[0][1].getFullYear(),
                maxdate = this.urldata[this.urldata.length - 1][2].getFullYear();
        }
        else {
            mindate = this.data[0][1].getFullYear(),
                maxdate = this.data[this.data.length - 1][2].getFullYear();
        }
        /** @type {?} */
        var x = d3.scaleTime()
            .domain([this.mindate, this.maxdate])
            .range([0, width]);
        /** @type {?} */
        var x1 = d3.scaleLinear()
            .domain([mindate, maxdate])
            .range([m[3], width + m[3]]);
        /** @type {?} */
        var y1 = d3.scaleLinear()
            .domain([0, laneLength])
            .range([0, miniHeight]);
        this.svg = d3.select("#" + this.componentId)
            .attr('viewBox', '0 0 ' + this.svgwidth + ' ' + this.svgheight)
            .attr("width", width + m[1] + m[3])
            .attr("height", height + m[0] + m[2]);
        if (this.device.IsDesktop() == true) {
            if (this.svgwidth <= 400) {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x1).ticks(this.xtickscount)).
                    selectAll("text")
                    .attr("y", 0)
                    .attr("x", 9)
                    .attr("dy", ".35em")
                    .attr("transform", "rotate(60)")
                    .style("text-anchor", "start");
            }
            else {
                this.svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x1).ticks(this.xtickscount));
            }
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x1).ticks(this.xtickscount)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        /** @type {?} */
        var mini = this.svg.append("g")
            .attr("transform", "translate(" + m[3] + "," + (mainHeight + m[0]) + ")")
            .attr("width", width)
            .attr("height", mainHeight)
            .attr("class", "mini");
        //mini lanes and texts
        mini.append("g").selectAll(".laneLines")
            .data(this.timelinechartData)
            .enter().append("line")
            .attr("y1", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return y1(d.lane); }))
            .attr("x2", width)
            .attr("y2", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return y1(d.lane); }))
            .attr("stroke", "lightgray");
        mini.append("g").selectAll(".laneText")
            .data(this.lanes)
            .enter().append("text")
            .text((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return d; }))
            .attr("x", -m[1])
            .attr("y", (/**
         * @param {?} d
         * @param {?} i
         * @return {?}
         */
        function (d, i) { return y1(i + .5); }))
            .attr("dy", ".5ex")
            .attr("text-anchor", "end")
            .attr("class", "laneText");
        //mini item rects
        mini.append("g").selectAll("miniItems")
            .data(this.timelinechartData)
            .enter().append("rect")
            .attr("class", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return "miniItem" + d.lane; }))
            .attr("fill", (/**
         * @param {?} d
         * @param {?} index
         * @return {?}
         */
        function (d, index) { return _this.predefinedcolors[index]; }))
            .attr("x", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return x(d.start); }))
            .attr("y", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return (y1(d.lane + .5) - 5); }))
            .attr("width", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return Math.abs(x(d.end) - x(d.start));
        }))
            .attr("height", barheight)
            .attr("cursor", "pointer")
            .on("mouseover", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "visible");
        }))
            .on("mousemove", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.html(_this.formTooltipData(d)
            //  this.toolTipForBar(d)
            // this.toolTipContent(d)
            )
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        }))
            .on("mouseout", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            return tooltip.style("visibility", "hidden");
        }))
            .on("click", (/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            _this.timelineChartClick(d);
            _this.fordrillableClick(_this, d, event);
            return tooltip.style("visibility", "hidden");
        }));
        /** @type {?} */
        var barwidth;
        //mini labels
        /** @type {?} */
        var monthlist1 = this.monthlist;
        if (this.labelflag) {
            mini.append("g").selectAll(".miniLabels")
                .data(this.timelinechartData)
                .enter().append("text")
                .style("font-weight", "bold")
                .attr("fill", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (_this.labelcolor.length > 0) {
                    return _this.labelcolor;
                }
                else {
                    return "black";
                }
            }))
                .style("font-size", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                barwidth = Math.min(Math.abs(x(d.end) - x(d.start)));
                return barwidth / 20 + "px";
            }))
                .text((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.id) {
                    /** @type {?} */
                    var startfullyear = d.start.getFullYear();
                    /** @type {?} */
                    var startMonth = monthlist1[d.start.getMonth()];
                    /** @type {?} */
                    var endfullyear = d.end.getFullYear();
                    /** @type {?} */
                    var endMonth = monthlist1[d.end.getMonth()];
                    /** @type {?} */
                    var date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
                    return date;
                }
            }))
                .attr("x", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return x(d.start);
            }))
                .attr("y", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return y1(d.lane + .5); }))
                .attr("dy", "1.2ex")
                .attr("dx", "9ex")
                .attr("cursor", "pointer")
                .on("mouseover", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "visible");
            }))
                .on("mousemove", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.html(_this.formTooltipData(d)
                //  this.toolTipForBar(d)
                // this.toolTipContent(d)
                )
                    .style("top", (d3.event.pageY - 10) + "px")
                    .style("left", (d3.event.pageX + 10) + "px");
            }))
                .on("mouseout", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                return tooltip.style("visibility", "hidden");
            }))
                .on("click", (/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.timelineChartClick(d);
                _this.fordrillableClick(_this, d, event);
                return tooltip.style("visibility", "hidden");
            }));
        }
    };
    /**
     * @param {?} tooltipData
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.formTooltipData = /**
     * @param {?} tooltipData
     * @return {?}
     */
    function (tooltipData) {
        /** @type {?} */
        var object = {};
        /** @type {?} */
        var mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        /** @type {?} */
        var label1 = "Duration";
        /** @type {?} */
        var label2 = "Name";
        /** @type {?} */
        var startfullyear = tooltipData.start.getFullYear();
        /** @type {?} */
        var startMonth = mlist[tooltipData.start.getMonth()];
        /** @type {?} */
        var endfullyear = tooltipData.end.getFullYear();
        /** @type {?} */
        var endMonth = mlist[tooltipData.end.getMonth()];
        /** @type {?} */
        var date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
        object[label2 + ":"] = tooltipData.id;
        object[label1 + ":"] = date;
        return this.toolTipForBar(object);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.transformTODate = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.urldata = [];
        data.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            /** @type {?} */
            var dataobj = [];
            /** @type {?} */
            var startdate = new Date(element[1]);
            /** @type {?} */
            var enddate = new Date(element[2]);
            dataobj.push(element[0]);
            dataobj.push(startdate);
            dataobj.push(enddate);
            _this.urldata.push(dataobj);
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.transformData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.lanes = [];
        this.timelinechartData = [];
        this.legends = [];
        /** @type {?} */
        var datalength = data.length - 1;
        /** @type {?} */
        var length = data.length;
        this.mindate = data[0][1];
        this.maxdate = data[datalength][2];
        /** @type {?} */
        var mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        data.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        function (element, i) {
            /** @type {?} */
            var dataObj = { "lane": "", "id": "", "start": "", "end": "" };
            _this.lanes.push(element[0]);
            dataObj["lane"] = i;
            dataObj["id"] = element[0];
            dataObj["start"] = element[1];
            dataObj["end"] = element[2];
            _this.timelinechartData.push(dataObj);
        }));
        this.timelinechartData.forEach((/**
         * @param {?} element
         * @param {?} i
         * @return {?}
         */
        function (element, i) {
            /** @type {?} */
            var startfullyear = element.start.getFullYear();
            /** @type {?} */
            var startMonth = mlist[element.start.getMonth()];
            /** @type {?} */
            var endfullyear = element.end.getFullYear();
            /** @type {?} */
            var endMonth = mlist[element.end.getMonth()];
            /** @type {?} */
            var date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
            /** @type {?} */
            var object = { 'label': _this.lanes[i], 'color': _this.predefinedcolors[i], 'Duration': date };
            _this.legends.push(object);
        }));
        /** @type {?} */
        var Obj = { "lane": "", "id": "", "start": "", "end": "" };
        Obj["lane"] = length;
        this.timelinechartData.push(Obj);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.timelineChartClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var object = {};
        /** @type {?} */
        var mlist = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
        /** @type {?} */
        var startfullyear = event.start.getFullYear();
        /** @type {?} */
        var startMonth = mlist[event.start.getMonth()];
        /** @type {?} */
        var endfullyear = event.end.getFullYear();
        /** @type {?} */
        var endMonth = mlist[event.end.getMonth()];
        /** @type {?} */
        var date = startMonth + " " + startfullyear + "-" + endMonth + " " + endfullyear;
        object["Name"] = event.id;
        object["Duration"] = date;
        this.chartClick(object);
    };
    //RESIZE STEP 4 STARTS
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.validateresize = 
    //RESIZE STEP 4 STARTS
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.wt) {
            }
            else {
                _this.resize();
            }
        }), 0);
    };
    //RESIZE STEP 4 ENDS
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.resize = 
    //RESIZE STEP 4 ENDS
    /**
     * @return {?}
     */
    function () {
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        if (this.wt) {
            this.svgwidth = this.wt;
        }
        else if (this.chartId) {
            // this.resizewt = this.chartId.nativeElement.offsetWidth;
            // console.log("", new Date().getTime(), " ", this.resizewt);
            this.svgwidth = this.chartId.nativeElement.offsetWidth;
        }
        this.cdf.detectChanges();
        this.plotChart();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    AmexioD3TimelineChartComponent.prototype.timelinelegendClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var obj = {};
        try {
            for (var _a = tslib_1.__values(Object.entries(event)), _b = _a.next(); !_b.done; _b = _a.next()) {
                var _c = tslib_1.__read(_b.value, 2), key = _c[0], value = _c[1];
                if (key !== 'color') {
                    obj[key] = value;
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.onLegendClick.emit(obj);
        var e_2, _d;
    };
    AmexioD3TimelineChartComponent.decorators = [
        { type: Component, args: [{
                    selector: 'amexio-d3-chart-timeline',
                    template: "\n<div  #chartId *ngIf=\"drillableFlag\"  (window:resize)=\"validateresize()\" >\n    <table style=\"width: 100%;\" position=\" relative\">\n        <tr *ngIf = \"title.length > 0\">\n            <td style=\"font-size: 18px; font-weight: bold; \"> {{title}} </td>\n        </tr>\n        <tr>\n            <td>\n                <svg [attr.height]=\"svgheight\" [attr.width]=\"svgwidth\" [attr.id]=\"componentId\" \n              >\n                </svg>\n            </td>\n        </tr>\n        <tr *ngIf=\"legend\">\n            <td style=\"display: block; padding: 5px;\">\n                <amexio-d3-legend *ngIf=\"legend\" [horizontal]=\"true\" (onClick)=\"timelinelegendClick($event)\" [data]=\"legends\" style=\"height:100%;\">\n                </amexio-d3-legend>\n            </td>\n        </tr>\n    </table>\n    </div>"
                },] },
    ];
    AmexioD3TimelineChartComponent.ctorParameters = function () { return [
        { type: CommanDataService },
        { type: ChangeDetectorRef },
        { type: DeviceQueryService }
    ]; };
    AmexioD3TimelineChartComponent.propDecorators = {
        data: [{ type: Input, args: ['data',] }],
        chartId: [{ type: ViewChild, args: ['chartId',] }],
        divid: [{ type: ViewChild, args: ['divid',] }],
        svgwidth: [{ type: Input, args: ['width',] }],
        svgheight: [{ type: Input, args: ['height',] }],
        datareader: [{ type: Input, args: ['data-reader',] }],
        level: [{ type: Input, args: ['level',] }],
        target: [{ type: Input, args: ['target',] }],
        drillabledatakey: [{ type: Input, args: ['drillable-data',] }],
        labelcolor: [{ type: Input, args: ['label-color',] }],
        labelflag: [{ type: Input, args: ['label',] }],
        xtickscount: [{ type: Input, args: ['xaxis-interval',] }]
    };
    return AmexioD3TimelineChartComponent;
}(AmexioD3BaseChartComponent));
export { AmexioD3TimelineChartComponent };
if (false) {
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.data;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.chartId;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.divid;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svgwidth;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svgheight;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.datareader;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.level;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.target;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.drillabledatakey;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.labelcolor;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.labelflag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.xtickscount;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.lanes;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.timelinechartData;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.mindate;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.maxdate;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.legends;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.drillableFlag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.resizeflag;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.svg;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.urldata;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.monthlist;
    /** @type {?} */
    AmexioD3TimelineChartComponent.prototype.wt;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.myservice;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.cdf;
    /**
     * @type {?}
     * @private
     */
    AmexioD3TimelineChartComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZWxpbmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW1leGlvLWNoYXJ0LWQzLyIsInNvdXJjZXMiOlsibGliL3RpbWVsaW5lL3RpbWVsaW5lLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsaUJBQWlCLEdBQUcsTUFBTSxlQUFlLENBQUM7QUFDNUYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDcEUsT0FBTyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFDekIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDcEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFHdEU7SUF3Qm9ELDBEQUEwQjtJQTBCMUUsd0NBQW9CLFNBQTRCLEVBQVUsR0FBc0IsRUFBVSxNQUEwQjtRQUFwSCxZQUNJLGtCQUFNLFVBQVUsQ0FBQyxTQUNwQjtRQUZtQixlQUFTLEdBQVQsU0FBUyxDQUFtQjtRQUFVLFNBQUcsR0FBSCxHQUFHLENBQW1CO1FBQVUsWUFBTSxHQUFOLE1BQU0sQ0FBb0I7UUFwQm5HLGVBQVMsR0FBVyxHQUFHLENBQUM7UUFFekIsV0FBSyxHQUFXLENBQUMsQ0FBQztRQUVULHNCQUFnQixHQUFVLEVBQUUsQ0FBQztRQUNoQyxnQkFBVSxHQUFXLE9BQU8sQ0FBQztRQUNuQyxlQUFTLEdBQVksS0FBSyxDQUFDO1FBRzNDLFdBQUssR0FBVSxFQUFFLENBQUM7UUFDbEIsdUJBQWlCLEdBQVUsRUFBRSxDQUFDO1FBSTlCLG1CQUFhLEdBQVksSUFBSSxDQUFDO1FBQzlCLGdCQUFVLEdBQVksS0FBSyxDQUFDO1FBRzVCLGVBQVMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7O0lBSWxHLENBQUM7Ozs7SUFFRCxpREFBUTs7O0lBQVI7UUFBQSxpQkEyQkM7UUExQkcsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3hCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzs7Z0JBQ2QsTUFBUztZQUNiLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ2xDLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQyxRQUFRO29CQUMxRSxNQUFJLEdBQUcsUUFBUSxDQUFDO2dCQUNwQixDQUFDOzs7O2dCQUFFLFVBQUMsS0FBSztnQkFDVCxDQUFDOzs7Z0JBQUU7b0JBQ0MsVUFBVTs7O29CQUFDO3dCQUNQLEtBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSSxDQUFDLGVBQWUsQ0FBQyxNQUFJLENBQUMsQ0FBQzt3QkFDdkMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ2hDLEtBQUksQ0FBQyxhQUFhLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUNqQyxLQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7b0JBQ3JCLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztnQkFDVixDQUFDLEVBQUMsQ0FBQztZQUVQLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBRW5CLFVBQVU7OztnQkFBQztvQkFDUCxLQUFJLENBQUMsSUFBSSxHQUFHLEtBQUksQ0FBQyxlQUFlLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUM1QyxLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDOUIsS0FBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNyQixDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUM7WUFFVixDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUM7Ozs7O0lBRUQsa0RBQVM7Ozs7SUFBVCxVQUFVLElBQVM7UUFBbkIsaUJBd0JDOztZQXZCTyxXQUFXOztZQUNYLEdBQUcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCOztZQUMzQixJQUFTO1FBQ2IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7O2dCQUMzQixhQUFhLEdBQUcsSUFBSSxDQUFDLDBCQUEwQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUM7WUFDOUQsV0FBVyxHQUFHLGFBQWEsQ0FBQztRQUNoQyxDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUM7WUFDRixXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQyxRQUFRO2dCQUN4RixJQUFJLEdBQUcsUUFBUSxDQUFDO1lBQ3BCLENBQUM7Ozs7WUFBRSxVQUFDLEtBQUs7WUFDVCxDQUFDOzs7WUFBRTtnQkFDQyxVQUFVOzs7Z0JBQUM7b0JBQ1AsS0FBSSxDQUFDLElBQUksR0FBRyxLQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN2QyxLQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ3JCLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBQyxDQUFDO1FBRVAsQ0FBQztJQUNMLENBQUM7Ozs7SUFDRCxrREFBUzs7O0lBQVQ7UUFBQSxpQkFRQztRQVBHLFVBQVU7OztRQUFDO1lBQ1AsS0FBSSxDQUFDLGVBQWUsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEMsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDakMsS0FBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRXJCLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztJQUVWLENBQUM7Ozs7O0lBRUQsd0RBQWU7Ozs7SUFBZixVQUFnQixZQUFpQjs7WUFDekIsWUFBWSxHQUFHLFlBQVk7UUFDL0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDOztnQkFDcEIsRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7Z0JBQ3JDLEdBQUcsQ0FBQyxDQUFhLElBQUEsT0FBQSxpQkFBQSxFQUFFLENBQUEsc0JBQUE7b0JBQWQsSUFBTSxFQUFFLGVBQUE7b0JBQ1QsWUFBWSxHQUFHLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztpQkFDbkM7Ozs7Ozs7OztRQUNMLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDaEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxZQUFZLENBQUM7O0lBQ3hCLENBQUM7Ozs7SUFFRCxrREFBUzs7O0lBQVQ7UUFBQSxpQkE2TUM7O1lBNU1PLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07O1lBQzVCLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUVoQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDekIsZUFBZTtZQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDWixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7WUFFMUIsQ0FBQztZQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7WUFFekQsQ0FBQztZQUNELDBCQUEwQjtRQUN4QixDQUFDOztZQUVHLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQzs7WUFBRSx1QkFBdUI7UUFDOUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7O1lBQ25DLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUNyQyxVQUFVLEdBQUcsVUFBVSxHQUFHLEVBQUUsR0FBRyxFQUFFOztZQUNqQyxVQUFVLEdBQUcsTUFBTSxHQUFHLFVBQVUsR0FBRyxFQUFFOztZQUVyQyxPQUFPOztZQUNQLE9BQU87O1lBQ1AsU0FBUyxHQUFHLEVBQUU7UUFDbEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUVsQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUU7Z0JBQ3RDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3pFLENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQztZQUNGLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRTtnQkFDbkMsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkUsQ0FBQzs7WUFHRyxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsRUFBRTthQUNqQixNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUNwQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7O1lBR2xCLEVBQUUsR0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFO2FBQ3BCLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUMxQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUU1QixFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDdkIsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBRzNCLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzthQUMzQyxJQUFJLENBQUMsU0FBUyxFQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO2FBQzFELElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBR3pDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNsQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztxQkFDakIsSUFBSSxDQUFDLFdBQVcsRUFBRSxjQUFjLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQztxQkFDaEQsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztvQkFDaEQsU0FBUyxDQUFDLE1BQU0sQ0FBQztxQkFDaEIsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7cUJBQ1osSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7cUJBQ1osSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUM7cUJBQ25CLElBQUksQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDO3FCQUMvQixLQUFLLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLENBQUM7WUFDRCxJQUFJLENBQUMsQ0FBQztnQkFDSixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7cUJBQ25CLElBQUksQ0FBQyxXQUFXLEVBQUUsY0FBYyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7cUJBQ2hELElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUNuRCxDQUFDO1FBQ1AsQ0FBQztRQUNELElBQUksQ0FBQyxDQUFDO1lBQ0YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO2lCQUNmLElBQUksQ0FBQyxXQUFXLEVBQUUsY0FBYyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7aUJBQ2hELElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ2hELFNBQVMsQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2lCQUNaLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2lCQUNaLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDO2lCQUNuQixJQUFJLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQztpQkFDL0IsS0FBSyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN2QyxDQUFDOztZQUVHLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7YUFDMUIsSUFBSSxDQUFDLFdBQVcsRUFBRSxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7YUFDeEUsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUM7YUFDcEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUM7YUFDMUIsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUM7UUFFMUIsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQzthQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO2FBQzVCLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFFdEIsSUFBSSxDQUFDLElBQUk7Ozs7UUFBRSxVQUFDLENBQUMsSUFBTyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBQzthQUN6QyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQzthQUNqQixJQUFJLENBQUMsSUFBSTs7OztRQUFFLFVBQUMsQ0FBQyxJQUFPLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDO2FBQ3pDLElBQUksQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFHakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO2FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ2hCLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDdEIsSUFBSTs7OztRQUFDLFVBQUMsQ0FBQyxJQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUM7YUFDMUIsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNoQixJQUFJLENBQUMsR0FBRzs7Ozs7UUFBRSxVQUFDLENBQUMsRUFBRSxDQUFDLElBQU8sTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUM7YUFDM0MsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUM7YUFDbEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUM7YUFDMUIsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztRQUUvQixpQkFBaUI7UUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO2FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUM7YUFDNUIsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQzthQUN0QixJQUFJLENBQUMsT0FBTzs7OztRQUFFLFVBQUMsQ0FBQyxJQUFPLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBQzthQUNyRCxJQUFJLENBQUMsTUFBTTs7Ozs7UUFBRSxVQUFDLENBQUMsRUFBRSxLQUFLLElBQU8sTUFBTSxDQUFDLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFDLENBQUMsRUFBQzthQUNuRSxJQUFJLENBQUMsR0FBRzs7OztRQUFFLFVBQUMsQ0FBQyxJQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDO2FBQ3hDLElBQUksQ0FBQyxHQUFHOzs7O1FBQUUsVUFBQyxDQUFDLElBQU8sTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUM7YUFDbkQsSUFBSSxDQUFDLE9BQU87Ozs7UUFBRSxVQUFDLENBQUM7WUFDYixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzQyxDQUFDLEVBQUM7YUFDRCxJQUFJLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQzthQUN6QixJQUFJLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQzthQUN6QixFQUFFLENBQUMsV0FBVzs7OztRQUFFLFVBQUMsQ0FBQztZQUNmLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNsRCxDQUFDLEVBQUM7YUFDRCxFQUFFLENBQUMsV0FBVzs7OztRQUFFLFVBQUMsQ0FBQztZQUNmLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUNmLEtBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLHlCQUF5QjtZQUN6Qix5QkFBeUI7YUFDNUI7aUJBQ0ksS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztpQkFDMUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3JELENBQUMsRUFBQzthQUNELEVBQUUsQ0FBQyxVQUFVOzs7O1FBQUUsVUFBQyxDQUFDO1lBQ2QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2pELENBQUMsRUFBQzthQUNELEVBQUUsQ0FBQyxPQUFPOzs7O1FBQUUsVUFBQyxDQUFDO1lBQ1gsS0FBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQzFCLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNqRCxDQUFDLEVBQUMsQ0FBQzs7WUFDSCxRQUFROzs7WUFHUixVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVM7UUFDL0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDO2lCQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO2lCQUM1QixLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2lCQUN0QixLQUFLLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQztpQkFDNUIsSUFBSSxDQUFDLE1BQU07Ozs7WUFBRSxVQUFDLENBQUM7Z0JBQ1osRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDN0IsTUFBTSxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQzNCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ0osTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFDbkIsQ0FBQztZQUNMLENBQUMsRUFBQztpQkFDRCxLQUFLLENBQUMsV0FBVzs7OztZQUFFLFVBQUMsQ0FBQztnQkFDbEIsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUNwRCxNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7WUFDaEMsQ0FBQyxFQUFDO2lCQUNELElBQUk7Ozs7WUFBQyxVQUFDLENBQUM7Z0JBQ0osRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O3dCQUNILGFBQWEsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTs7d0JBQ3JDLFVBQVUsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7d0JBQzNDLFdBQVcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRTs7d0JBQ2pDLFFBQVEsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7d0JBQ3ZDLElBQUksR0FBRyxVQUFVLEdBQUcsR0FBRyxHQUFHLGFBQWEsR0FBRyxHQUFHLEdBQUcsUUFBUSxHQUFHLEdBQUcsR0FBRyxXQUFXO29CQUNoRixNQUFNLENBQUMsSUFBSSxDQUFDO2dCQUNoQixDQUFDO1lBQ0wsQ0FBQyxFQUFDO2lCQUNELElBQUksQ0FBQyxHQUFHOzs7O1lBQUUsVUFBQyxDQUFDO2dCQUNULE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RCLENBQUMsRUFBQztpQkFDRCxJQUFJLENBQUMsR0FBRzs7OztZQUFFLFVBQUMsQ0FBQyxJQUFPLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBQztpQkFDN0MsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUM7aUJBQ25CLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO2lCQUVqQixJQUFJLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQztpQkFDekIsRUFBRSxDQUFDLFdBQVc7Ozs7WUFBRSxVQUFDLENBQUM7Z0JBQ2YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ2xELENBQUMsRUFBQztpQkFDRCxFQUFFLENBQUMsV0FBVzs7OztZQUFFLFVBQUMsQ0FBQztnQkFDZixNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FDZixLQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztnQkFDdkIseUJBQXlCO2dCQUN6Qix5QkFBeUI7aUJBQzVCO3FCQUNJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7cUJBQzFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUNyRCxDQUFDLEVBQUM7aUJBQ0QsRUFBRSxDQUFDLFVBQVU7Ozs7WUFBRSxVQUFDLENBQUM7Z0JBQ2QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2pELENBQUMsRUFBQztpQkFDRCxFQUFFLENBQUMsT0FBTzs7OztZQUFFLFVBQUMsQ0FBQztnQkFDWCxLQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQzFCLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUN2QyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDakQsQ0FBQyxFQUFDLENBQUM7UUFDWCxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUFDRCx3REFBZTs7OztJQUFmLFVBQWdCLFdBQWdCOztZQUN4QixNQUFNLEdBQUcsRUFBRTs7WUFFWCxLQUFLLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQzs7WUFDN0YsTUFBTSxHQUFHLFVBQVU7O1lBQ25CLE1BQU0sR0FBRyxNQUFNOztZQUNmLGFBQWEsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTs7WUFDL0MsVUFBVSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDOztZQUNoRCxXQUFXLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUU7O1lBQzNDLFFBQVEsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7WUFDNUMsSUFBSSxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRyxHQUFHLFdBQVc7UUFFaEYsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUMsRUFBRSxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRTVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXRDLENBQUM7Ozs7O0lBRUQsd0RBQWU7Ozs7SUFBZixVQUFnQixJQUFTO1FBQXpCLGlCQWFDO1FBWkcsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFFbEIsSUFBSSxDQUFDLE9BQU87Ozs7UUFBQyxVQUFBLE9BQU87O2dCQUNaLE9BQU8sR0FBRyxFQUFFOztnQkFDWixTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDOztnQkFDaEMsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDeEIsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0QixLQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUUvQixDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7Ozs7O0lBRUQsc0RBQWE7Ozs7SUFBYixVQUFjLElBQVM7UUFBdkIsaUJBa0NDO1FBakNHLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7O1lBQ2QsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQzs7WUFDNUIsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNO1FBQ3hCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUMvQixLQUFLLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztRQUVqRyxJQUFJLENBQUMsT0FBTzs7Ozs7UUFBQyxVQUFDLE9BQU8sRUFBRSxDQUFDOztnQkFDaEIsT0FBTyxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRTtZQUM5RCxLQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0IsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDekMsQ0FBQyxFQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTzs7Ozs7UUFBQyxVQUFDLE9BQU8sRUFBRSxDQUFDOztnQkFFbEMsYUFBYSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFOztnQkFDM0MsVUFBVSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDOztnQkFDNUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFOztnQkFDdkMsUUFBUSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDOztnQkFDeEMsSUFBSSxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRyxHQUFHLFdBQVc7O2dCQUM1RSxNQUFNLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUU7WUFDNUYsS0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxFQUFDLENBQUM7O1lBRUMsR0FBRyxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRTtRQUMxRCxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckMsQ0FBQzs7Ozs7SUFHRCwyREFBa0I7Ozs7SUFBbEIsVUFBbUIsS0FBVTs7WUFDckIsTUFBTSxHQUFHLEVBQUU7O1lBQ1gsS0FBSyxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUM7O1lBQzdGLGFBQWEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTs7WUFDekMsVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDOztZQUMxQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUU7O1lBQ3JDLFFBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7WUFDdEMsSUFBSSxHQUFHLFVBQVUsR0FBRyxHQUFHLEdBQUcsYUFBYSxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRyxHQUFHLFdBQVc7UUFDaEYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDMUIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxzQkFBc0I7Ozs7O0lBQ3hCLHVEQUFjOzs7OztJQUFkO1FBQUEsaUJBUUM7UUFQQyxVQUFVOzs7UUFBQztZQUNSLEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRWYsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLEtBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixDQUFDO1FBQ0gsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFBO0lBQ1AsQ0FBQztJQUNELG9CQUFvQjs7Ozs7SUFFbEIsK0NBQU07Ozs7O0lBQU47UUFDSSxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNaLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUMxQixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLDBEQUEwRDtZQUMxRCw2REFBNkQ7WUFDN0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7UUFDekQsQ0FBQztRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBRXJCLENBQUM7Ozs7O0lBQ0QsNERBQW1COzs7O0lBQW5CLFVBQW9CLEtBQVU7O1lBQ3RCLEdBQUcsR0FBRyxFQUFFOztZQUNaLEdBQUcsQ0FBQyxDQUFxQixJQUFBLEtBQUEsaUJBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQSxnQkFBQTtnQkFBckMsSUFBQSxnQ0FBWSxFQUFYLFdBQUcsRUFBRSxhQUFLO2dCQUNoQixFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQztvQkFDbEIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztnQkFDckIsQ0FBQzthQUNKOzs7Ozs7Ozs7UUFDRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7SUFDakMsQ0FBQzs7Z0JBdmNKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyxRQUFRLEVBQUUsbTBCQW9CSDtpQkFDVjs7O2dCQTNCUSxpQkFBaUI7Z0JBSHdCLGlCQUFpQjtnQkFJMUQsa0JBQWtCOzs7dUJBNkJ0QixLQUFLLFNBQUMsTUFBTTswQkFDWixTQUFTLFNBQUMsU0FBUzt3QkFDbkIsU0FBUyxTQUFDLE9BQU87MkJBQ2pCLEtBQUssU0FBQyxPQUFPOzRCQUNiLEtBQUssU0FBQyxRQUFROzZCQUNkLEtBQUssU0FBQyxhQUFhO3dCQUNuQixLQUFLLFNBQUMsT0FBTzt5QkFDYixLQUFLLFNBQUMsUUFBUTttQ0FDZCxLQUFLLFNBQUMsZ0JBQWdCOzZCQUN0QixLQUFLLFNBQUMsYUFBYTs0QkFDbkIsS0FBSyxTQUFDLE9BQU87OEJBQ2IsS0FBSyxTQUFDLGdCQUFnQjs7SUFvYTNCLHFDQUFDO0NBQUEsQUF6Y0QsQ0F3Qm9ELDBCQUEwQixHQWliN0U7U0FqYlksOEJBQThCOzs7SUFFdkMsOENBQXlCOztJQUN6QixpREFBMEM7O0lBQzFDLCtDQUFzQzs7SUFDdEMsa0RBQWlDOztJQUNqQyxtREFBeUM7O0lBQ3pDLG9EQUF5Qzs7SUFDekMsK0NBQWtDOztJQUNsQyxnREFBZ0M7O0lBQ2hDLDBEQUFzRDs7SUFDdEQsb0RBQW1EOztJQUNuRCxtREFBMkM7O0lBQzNDLHFEQUE2Qzs7SUFFN0MsK0NBQWtCOztJQUNsQiwyREFBOEI7O0lBQzlCLGlEQUFhOztJQUNiLGlEQUFhOztJQUNiLGlEQUFhOztJQUNiLHVEQUE4Qjs7SUFDOUIsb0RBQTRCOztJQUM1Qiw2Q0FBUzs7SUFDVCxpREFBYTs7SUFDYixtREFBa0c7O0lBQ2xHLDRDQUFXOzs7OztJQUNDLG1EQUFvQzs7Ozs7SUFBRSw2Q0FBOEI7Ozs7O0lBQUUsZ0RBQWtDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3RvclJlZiwgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQW1leGlvRDNCYXNlQ2hhcnRDb21wb25lbnQgfSBmcm9tIFwiLi4vYmFzZS9iYXNlLmNvbXBvbmVudFwiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgQ29tbWFuRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb21tYW4uZGF0YS5zZXJ2aWNlJztcbmltcG9ydCB7IERldmljZVF1ZXJ5U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RldmljZS5xdWVyeS5zZXJ2aWNlJztcblxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FtZXhpby1kMy1jaGFydC10aW1lbGluZScsXG4gICAgdGVtcGxhdGU6IGBcbjxkaXYgICNjaGFydElkICpuZ0lmPVwiZHJpbGxhYmxlRmxhZ1wiICAod2luZG93OnJlc2l6ZSk9XCJ2YWxpZGF0ZXJlc2l6ZSgpXCIgPlxuICAgIDx0YWJsZSBzdHlsZT1cIndpZHRoOiAxMDAlO1wiIHBvc2l0aW9uPVwiIHJlbGF0aXZlXCI+XG4gICAgICAgIDx0ciAqbmdJZiA9IFwidGl0bGUubGVuZ3RoID4gMFwiPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsgXCI+IHt7dGl0bGV9fSA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgICAgPHN2ZyBbYXR0ci5oZWlnaHRdPVwic3ZnaGVpZ2h0XCIgW2F0dHIud2lkdGhdPVwic3Znd2lkdGhcIiBbYXR0ci5pZF09XCJjb21wb25lbnRJZFwiIFxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHIgKm5nSWY9XCJsZWdlbmRcIj5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyBwYWRkaW5nOiA1cHg7XCI+XG4gICAgICAgICAgICAgICAgPGFtZXhpby1kMy1sZWdlbmQgKm5nSWY9XCJsZWdlbmRcIiBbaG9yaXpvbnRhbF09XCJ0cnVlXCIgKG9uQ2xpY2spPVwidGltZWxpbmVsZWdlbmRDbGljaygkZXZlbnQpXCIgW2RhdGFdPVwibGVnZW5kc1wiIHN0eWxlPVwiaGVpZ2h0OjEwMCU7XCI+XG4gICAgICAgICAgICAgICAgPC9hbWV4aW8tZDMtbGVnZW5kPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICA8L3RhYmxlPlxuICAgIDwvZGl2PmBcbn0pXG5leHBvcnQgY2xhc3MgQW1leGlvRDNUaW1lbGluZUNoYXJ0Q29tcG9uZW50IGV4dGVuZHMgQW1leGlvRDNCYXNlQ2hhcnRDb21wb25lbnQge1xuXG4gICAgQElucHV0KCdkYXRhJykgZGF0YTogYW55O1xuICAgIEBWaWV3Q2hpbGQoJ2NoYXJ0SWQnKSBjaGFydElkOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoJ2RpdmlkJykgZGl2aWQ6IEVsZW1lbnRSZWY7XG4gICAgQElucHV0KCd3aWR0aCcpIHN2Z3dpZHRoOiBudW1iZXI7XG4gICAgQElucHV0KCdoZWlnaHQnKSBzdmdoZWlnaHQ6IG51bWJlciA9IDIwMDtcbiAgICBASW5wdXQoJ2RhdGEtcmVhZGVyJykgZGF0YXJlYWRlcjogc3RyaW5nO1xuICAgIEBJbnB1dCgnbGV2ZWwnKSBsZXZlbDogbnVtYmVyID0gMDtcbiAgICBASW5wdXQoJ3RhcmdldCcpIHRhcmdldDogbnVtYmVyO1xuICAgIEBJbnB1dCgnZHJpbGxhYmxlLWRhdGEnKSBkcmlsbGFibGVkYXRha2V5OiBhbnlbXSA9IFtdO1xuICAgIEBJbnB1dCgnbGFiZWwtY29sb3InKSBsYWJlbGNvbG9yOiBzdHJpbmcgPSBcImJsYWNrXCI7XG4gICAgQElucHV0KCdsYWJlbCcpIGxhYmVsZmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIEBJbnB1dCgneGF4aXMtaW50ZXJ2YWwnKSB4dGlja3Njb3VudDogbnVtYmVyO1xuXG4gICAgbGFuZXM6IGFueVtdID0gW107XG4gICAgdGltZWxpbmVjaGFydERhdGE6IGFueVtdID0gW107XG4gICAgbWluZGF0ZTogYW55O1xuICAgIG1heGRhdGU6IGFueTtcbiAgICBsZWdlbmRzOiBhbnk7XG4gICAgZHJpbGxhYmxlRmxhZzogYm9vbGVhbiA9IHRydWU7XG4gICAgcmVzaXplZmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHN2ZzogYW55O1xuICAgIHVybGRhdGE6IGFueTtcbiAgICBtb250aGxpc3QgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXB0XCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuICAgIHd0OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBteXNlcnZpY2U6IENvbW1hbkRhdGFTZXJ2aWNlLCBwcml2YXRlIGNkZjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgZGV2aWNlOiBEZXZpY2VRdWVyeVNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoJ3RpbWVsaW5lJyk7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMud3QgPSB0aGlzLnN2Z3dpZHRoO1xuICAgICAgICBpZiAodGhpcy5sZXZlbCA8PSAxKSB7XG4gICAgICAgICAgICBsZXQgcmVzcDogYW55O1xuICAgICAgICAgICAgaWYgKHRoaXMuaHR0cG1ldGhvZCAmJiB0aGlzLmh0dHB1cmwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm15c2VydmljZS5mZXRjaFVybERhdGEodGhpcy5odHRwdXJsLCB0aGlzLmh0dHBtZXRob2QpLnN1YnNjcmliZSgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtVE9EYXRlKHRoaXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGEodGhpcy51cmxkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxvdENoYXJ0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsb3RDaGFydCgpO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaERhdGEoZGF0YTogYW55KSB7XG4gICAgICAgIGxldCByZXF1ZXN0SnNvbjtcbiAgICAgICAgbGV0IGtleSA9IHRoaXMuZHJpbGxhYmxlZGF0YWtleTtcbiAgICAgICAgbGV0IHJlc3A6IGFueTtcbiAgICAgICAgaWYgKHRoaXMuZHJpbGxhYmxlZGF0YWtleS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBkcmlsbGFibGVkYXRhID0gdGhpcy5nZXRNdWx0aXBsZURyaWxsYmxlS2V5RGF0YShkYXRhLCBrZXkpO1xuICAgICAgICAgICAgcmVxdWVzdEpzb24gPSBkcmlsbGFibGVkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdEpzb24gPSBkYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaHR0cG1ldGhvZCAmJiB0aGlzLmh0dHB1cmwpIHtcbiAgICAgICAgICAgIHRoaXMubXlzZXJ2aWNlLnBvc3RmZXRjaERhdGEodGhpcy5odHRwdXJsLCB0aGlzLmh0dHBtZXRob2QsIHJlcXVlc3RKc29uKS5zdWJzY3JpYmUoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzcCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlc3ApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdDaGFydCgpO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3Q2hhcnQoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1UT0RhdGUodGhpcy5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSh0aGlzLnVybGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcblxuICAgICAgICB9LCAwKTtcblxuICAgIH1cblxuICAgIGdldFJlc3BvbnNlRGF0YShodHRwUmVzcG9uc2U6IGFueSkge1xuICAgICAgICBsZXQgcmVzcG9uc2VkYXRhID0gaHR0cFJlc3BvbnNlO1xuICAgICAgICBpZiAodGhpcy5kYXRhcmVhZGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGRyID0gdGhpcy5kYXRhcmVhZGVyLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlyIG9mIGRyKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VkYXRhID0gcmVzcG9uc2VkYXRhW2lyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlZGF0YSA9IGh0dHBSZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2VkYXRhO1xuICAgIH1cblxuICAgIHBsb3RDaGFydCgpIHtcbiAgICAgICAgbGV0IGxhbmVMZW5ndGggPSB0aGlzLmxhbmVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IHRoaXMudG9vbFRpcChkMyk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzaXplZmxhZyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAvL1JFU0laRSBTVEVQIDFcbiAgICAgIGlmICh0aGlzLnd0KSB7XG4gICAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLnd0O1xuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY2hhcnRJZCkge1xuICAgICAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy5jaGFydElkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG5cbiAgICAgIH1cbiAgICAgIC8vUkVTSVpFIFNURVAgMSBFTkRTIEhFUkUgXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbSA9IFsyMCwgMjUsIDE1LCAxMjBdLCAvL3RvcCByaWdodCBib3R0b20gbGVmdFxuICAgICAgICAgICAgd2lkdGggPSB0aGlzLnN2Z3dpZHRoIC0gbVsxXSAtIG1bM10sXG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLnN2Z2hlaWdodCAtIG1bMF0gLSBtWzJdLFxuICAgICAgICAgICAgbWluaUhlaWdodCA9IGxhbmVMZW5ndGggKiAxMiArIDUwLFxuICAgICAgICAgICAgbWFpbkhlaWdodCA9IGhlaWdodCAtIG1pbmlIZWlnaHQgLSA1MDtcblxuICAgICAgICBsZXQgbWluZGF0ZTtcbiAgICAgICAgbGV0IG1heGRhdGU7XG4gICAgICAgIGxldCBiYXJoZWlnaHQgPSAyMDtcbiAgICAgICAgaWYgKHRoaXMuaHR0cHVybCAmJiB0aGlzLmh0dHBtZXRob2QpIHtcblxuICAgICAgICAgICAgbWluZGF0ZSA9IHRoaXMudXJsZGF0YVswXVsxXS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgIG1heGRhdGUgPSB0aGlzLnVybGRhdGFbdGhpcy51cmxkYXRhLmxlbmd0aCAtIDFdWzJdLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtaW5kYXRlID0gdGhpcy5kYXRhWzBdWzFdLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICAgICAgbWF4ZGF0ZSA9IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMV1bMl0uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHggPSBkMy5zY2FsZVRpbWUoKVxuICAgICAgICAgICAgLmRvbWFpbihbdGhpcy5taW5kYXRlLCB0aGlzLm1heGRhdGVdKVxuICAgICAgICAgICAgLnJhbmdlKFswLCB3aWR0aF0pO1xuXG5cbiAgICAgICAgbGV0IHgxID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAgICAgLmRvbWFpbihbbWluZGF0ZSwgbWF4ZGF0ZV0pXG4gICAgICAgICAgICAucmFuZ2UoW21bM10sIHdpZHRoICsgbVszXV0pO1xuXG4gICAgICAgIGxldCB5MSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgICAgIC5kb21haW4oWzAsIGxhbmVMZW5ndGhdKVxuICAgICAgICAgICAgLnJhbmdlKFswLCBtaW5pSGVpZ2h0XSk7XG5cblxuICAgICAgICB0aGlzLnN2ZyA9IGQzLnNlbGVjdChcIiNcIiArIHRoaXMuY29tcG9uZW50SWQpXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy5zdmd3aWR0aCArICcgJyArIHRoaXMuc3ZnaGVpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1bMV0gKyBtWzNdKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbVswXSArIG1bMl0pXG5cblxuICAgICAgICBpZiAodGhpcy5kZXZpY2UuSXNEZXNrdG9wKCkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3Znd2lkdGggPD0gNDAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4MSkudGlja3ModGhpcy54dGlja3Njb3VudCkpLlxuICAgICAgICAgICAgICAgICAgc2VsZWN0QWxsKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgOSlcbiAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoNjApXCIpXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4MSkudGlja3ModGhpcy54dGlja3Njb3VudCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeDEpLnRpY2tzKHRoaXMueHRpY2tzY291bnQpKS5cbiAgICAgICAgICAgICAgICBzZWxlY3RBbGwoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIDkpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoNjApXCIpXG4gICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtaW5pID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtWzNdICsgXCIsXCIgKyAobWFpbkhlaWdodCArIG1bMF0pICsgXCIpXCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgbWFpbkhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJtaW5pXCIpO1xuXG4gICAgICAgIC8vbWluaSBsYW5lcyBhbmQgdGV4dHNcbiAgICAgICAgbWluaS5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcIi5sYW5lTGluZXNcIilcbiAgICAgICAgICAgIC5kYXRhKHRoaXMudGltZWxpbmVjaGFydERhdGEpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgICAgICAvLyAuYXR0cihcIngxXCIsIG1bMV0pXG4gICAgICAgICAgICAuYXR0cihcInkxXCIsIChkKSA9PiB7IHJldHVybiB5MShkLmxhbmUpOyB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ4MlwiLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKFwieTJcIiwgKGQpID0+IHsgcmV0dXJuIHkxKGQubGFuZSk7IH0pXG4gICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImxpZ2h0Z3JheVwiKTtcblxuXG4gICAgICAgIG1pbmkuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCIubGFuZVRleHRcIilcbiAgICAgICAgICAgIC5kYXRhKHRoaXMubGFuZXMpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAudGV4dCgoZCkgPT4geyByZXR1cm4gZDsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtbVsxXSlcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCAoZCwgaSkgPT4geyByZXR1cm4geTEoaSArIC41KTsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuNWV4XCIpXG4gICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwiZW5kXCIpXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGFuZVRleHRcIik7XG5cbiAgICAgICAgLy9taW5pIGl0ZW0gcmVjdHNcbiAgICAgICAgbWluaS5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcIm1pbmlJdGVtc1wiKVxuICAgICAgICAgICAgLmRhdGEodGhpcy50aW1lbGluZWNoYXJ0RGF0YSlcbiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgKGQpID0+IHsgcmV0dXJuIFwibWluaUl0ZW1cIiArIGQubGFuZTsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCAoZCwgaW5kZXgpID0+IHsgcmV0dXJuIHRoaXMucHJlZGVmaW5lZGNvbG9yc1tpbmRleF0gfSlcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4geyByZXR1cm4geChkLnN0YXJ0KTsgfSlcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCAoZCkgPT4geyByZXR1cm4gKHkxKGQubGFuZSArIC41KSAtIDUpOyB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh4KGQuZW5kKSAtIHgoZC5zdGFydCkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGJhcmhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oXCJtb3VzZW1vdmVcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcC5odG1sKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1Ub29sdGlwRGF0YShkKVxuICAgICAgICAgICAgICAgICAgICAvLyAgdGhpcy50b29sVGlwRm9yQmFyKGQpXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudG9vbFRpcENvbnRlbnQoZClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkgLSAxMCkgKyBcInB4XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgXCJweFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZWxpbmVDaGFydENsaWNrKGQpXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGxldCBiYXJ3aWR0aDtcblxuICAgICAgICAvL21pbmkgbGFiZWxzXG4gICAgICAgIGxldCBtb250aGxpc3QxID0gdGhpcy5tb250aGxpc3Q7XG4gICAgICAgIGlmICh0aGlzLmxhYmVsZmxhZykge1xuICAgICAgICAgICAgbWluaS5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcIi5taW5pTGFiZWxzXCIpXG4gICAgICAgICAgICAgICAgLmRhdGEodGhpcy50aW1lbGluZWNoYXJ0RGF0YSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIiwgXCJib2xkXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhYmVsY29sb3IubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxjb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdHlsZShcImZvbnQtc2l6ZVwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBiYXJ3aWR0aCA9IE1hdGgubWluKE1hdGguYWJzKHgoZC5lbmQpIC0geChkLnN0YXJ0KSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXJ3aWR0aCAvIDIwICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRleHQoKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydGZ1bGx5ZWFyID0gZC5zdGFydC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0TW9udGggPSBtb250aGxpc3QxW2Quc3RhcnQuZ2V0TW9udGgoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kZnVsbHllYXIgPSBkLmVuZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZE1vbnRoID0gbW9udGhsaXN0MVtkLmVuZC5nZXRNb250aCgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRlID0gc3RhcnRNb250aCArIFwiIFwiICsgc3RhcnRmdWxseWVhciArIFwiLVwiICsgZW5kTW9udGggKyBcIiBcIiArIGVuZGZ1bGx5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCAoZCkgPT4geyByZXR1cm4geTEoZC5sYW5lICsgLjUpOyB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIxLjJleFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZHhcIiwgXCI5ZXhcIilcbiAgICAgICAgICAgICAgICAvL3dyaXRlIHBvaW50ZXIgYW5kIGNsaWNrIGZuXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgXCJwb2ludGVyXCIpXG4gICAgICAgICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oXCJtb3VzZW1vdmVcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuaHRtbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybVRvb2x0aXBEYXRhKGQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgdGhpcy50b29sVGlwRm9yQmFyKGQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnRvb2xUaXBDb250ZW50KGQpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkgLSAxMCkgKyBcInB4XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsIChkMy5ldmVudC5wYWdlWCArIDEwKSArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVsaW5lQ2hhcnRDbGljayhkKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcmRyaWxsYWJsZUNsaWNrKHRoaXMsIGQsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcm1Ub29sdGlwRGF0YSh0b29sdGlwRGF0YTogYW55KSB7XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcblxuICAgICAgICBsZXQgbWxpc3QgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXB0XCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xuICAgICAgICBsZXQgbGFiZWwxID0gXCJEdXJhdGlvblwiO1xuICAgICAgICBsZXQgbGFiZWwyID0gXCJOYW1lXCI7XG4gICAgICAgIGxldCBzdGFydGZ1bGx5ZWFyID0gdG9vbHRpcERhdGEuc3RhcnQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbGV0IHN0YXJ0TW9udGggPSBtbGlzdFt0b29sdGlwRGF0YS5zdGFydC5nZXRNb250aCgpXVxuICAgICAgICBsZXQgZW5kZnVsbHllYXIgPSB0b29sdGlwRGF0YS5lbmQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgbGV0IGVuZE1vbnRoID0gbWxpc3RbdG9vbHRpcERhdGEuZW5kLmdldE1vbnRoKCldXG4gICAgICAgIGxldCBkYXRlID0gc3RhcnRNb250aCArIFwiIFwiICsgc3RhcnRmdWxseWVhciArIFwiLVwiICsgZW5kTW9udGggKyBcIiBcIiArIGVuZGZ1bGx5ZWFyO1xuXG4gICAgICAgIG9iamVjdFtsYWJlbDIgKyBcIjpcIl0gPSB0b29sdGlwRGF0YS5pZDtcbiAgICAgICAgb2JqZWN0W2xhYmVsMSArIFwiOlwiXSA9IGRhdGU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbFRpcEZvckJhcihvYmplY3QpO1xuXG4gICAgfVxuXG4gICAgdHJhbnNmb3JtVE9EYXRlKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLnVybGRhdGEgPSBbXTtcblxuICAgICAgICBkYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YW9iaiA9IFtdO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ZGF0ZSA9IG5ldyBEYXRlKGVsZW1lbnRbMV0pO1xuICAgICAgICAgICAgbGV0IGVuZGRhdGUgPSBuZXcgRGF0ZShlbGVtZW50WzJdKVxuICAgICAgICAgICAgZGF0YW9iai5wdXNoKGVsZW1lbnRbMF0pO1xuICAgICAgICAgICAgZGF0YW9iai5wdXNoKHN0YXJ0ZGF0ZSk7XG4gICAgICAgICAgICBkYXRhb2JqLnB1c2goZW5kZGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnVybGRhdGEucHVzaChkYXRhb2JqKTtcblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0cmFuc2Zvcm1EYXRhKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLmxhbmVzID0gW107XG4gICAgICAgIHRoaXMudGltZWxpbmVjaGFydERhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5sZWdlbmRzID0gW107XG4gICAgICAgIGxldCBkYXRhbGVuZ3RoID0gZGF0YS5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIHRoaXMubWluZGF0ZSA9IGRhdGFbMF1bMV07XG4gICAgICAgIHRoaXMubWF4ZGF0ZSA9IGRhdGFbZGF0YWxlbmd0aF1bMl07XG4gICAgICAgIGxldCBtbGlzdCA9IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcHRcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XG5cbiAgICAgICAgZGF0YS5mb3JFYWNoKChlbGVtZW50LCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YU9iaiA9IHsgXCJsYW5lXCI6IFwiXCIsIFwiaWRcIjogXCJcIiwgXCJzdGFydFwiOiBcIlwiLCBcImVuZFwiOiBcIlwiIH07XG4gICAgICAgICAgICB0aGlzLmxhbmVzLnB1c2goZWxlbWVudFswXSk7XG4gICAgICAgICAgICBkYXRhT2JqW1wibGFuZVwiXSA9IGk7XG4gICAgICAgICAgICBkYXRhT2JqW1wiaWRcIl0gPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgZGF0YU9ialtcInN0YXJ0XCJdID0gZWxlbWVudFsxXTtcbiAgICAgICAgICAgIGRhdGFPYmpbXCJlbmRcIl0gPSBlbGVtZW50WzJdO1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZWNoYXJ0RGF0YS5wdXNoKGRhdGFPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRpbWVsaW5lY2hhcnREYXRhLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcblxuICAgICAgICAgICAgbGV0IHN0YXJ0ZnVsbHllYXIgPSBlbGVtZW50LnN0YXJ0LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBsZXQgc3RhcnRNb250aCA9IG1saXN0W2VsZW1lbnQuc3RhcnQuZ2V0TW9udGgoKV1cbiAgICAgICAgICAgIGxldCBlbmRmdWxseWVhciA9IGVsZW1lbnQuZW5kLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBsZXQgZW5kTW9udGggPSBtbGlzdFtlbGVtZW50LmVuZC5nZXRNb250aCgpXVxuICAgICAgICAgICAgbGV0IGRhdGUgPSBzdGFydE1vbnRoICsgXCIgXCIgKyBzdGFydGZ1bGx5ZWFyICsgXCItXCIgKyBlbmRNb250aCArIFwiIFwiICsgZW5kZnVsbHllYXI7XG4gICAgICAgICAgICBsZXQgb2JqZWN0ID0geyAnbGFiZWwnOiB0aGlzLmxhbmVzW2ldLCAnY29sb3InOiB0aGlzLnByZWRlZmluZWRjb2xvcnNbaV0sICdEdXJhdGlvbic6IGRhdGUgfTtcbiAgICAgICAgICAgIHRoaXMubGVnZW5kcy5wdXNoKG9iamVjdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBPYmogPSB7IFwibGFuZVwiOiBcIlwiLCBcImlkXCI6IFwiXCIsIFwic3RhcnRcIjogXCJcIiwgXCJlbmRcIjogXCJcIiB9O1xuICAgICAgICBPYmpbXCJsYW5lXCJdID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnRpbWVsaW5lY2hhcnREYXRhLnB1c2goT2JqKTtcbiAgICB9XG5cblxuICAgIHRpbWVsaW5lQ2hhcnRDbGljayhldmVudDogYW55KSB7XG4gICAgICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICAgICAgbGV0IG1saXN0ID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwdFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXTtcbiAgICAgICAgbGV0IHN0YXJ0ZnVsbHllYXIgPSBldmVudC5zdGFydC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBsZXQgc3RhcnRNb250aCA9IG1saXN0W2V2ZW50LnN0YXJ0LmdldE1vbnRoKCldXG4gICAgICAgIGxldCBlbmRmdWxseWVhciA9IGV2ZW50LmVuZC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBsZXQgZW5kTW9udGggPSBtbGlzdFtldmVudC5lbmQuZ2V0TW9udGgoKV07XG4gICAgICAgIGxldCBkYXRlID0gc3RhcnRNb250aCArIFwiIFwiICsgc3RhcnRmdWxseWVhciArIFwiLVwiICsgZW5kTW9udGggKyBcIiBcIiArIGVuZGZ1bGx5ZWFyO1xuICAgICAgICBvYmplY3RbXCJOYW1lXCJdID0gZXZlbnQuaWQ7XG4gICAgICAgIG9iamVjdFtcIkR1cmF0aW9uXCJdID0gZGF0ZTtcbiAgICAgICAgdGhpcy5jaGFydENsaWNrKG9iamVjdCk7XG4gICAgfVxuXG4gICAgLy9SRVNJWkUgU1RFUCA0IFNUQVJUU1xuICB2YWxpZGF0ZXJlc2l6ZSgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICBpZiAodGhpcy53dCkge1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgfVxuICAgIH0sIDApXG4gIH1cbiAgLy9SRVNJWkUgU1RFUCA0IEVORFNcblxuICAgIHJlc2l6ZSgpIHtcbiAgICAgICAgdGhpcy5zdmcuc2VsZWN0QWxsKFwiKlwiKS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5yZXNpemVmbGFnID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMud3QpIHtcbiAgICAgICAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy53dDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0SWQpIHtcbiAgICAgICAgICAvLyB0aGlzLnJlc2l6ZXd0ID0gdGhpcy5jaGFydElkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJcIiwgbmV3IERhdGUoKS5nZXRUaW1lKCksIFwiIFwiLCB0aGlzLnJlc2l6ZXd0KTtcbiAgICAgICAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy5jaGFydElkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jZGYuZGV0ZWN0Q2hhbmdlcygpOyBcbiAgICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcblxuICAgIH1cbiAgICB0aW1lbGluZWxlZ2VuZENsaWNrKGV2ZW50OiBhbnkpIHtcbiAgICAgICAgbGV0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZXZlbnQpKSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAnY29sb3InKSB7XG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uTGVnZW5kQ2xpY2suZW1pdChvYmopO1xuICAgIH1cblxufVxuXG5cblxuIl19